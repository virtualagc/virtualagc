<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <title>VirtualAGC-VM64 Virtual Machine</title>
  </head>
  <body>
    <h1>Contents</h1>
    <ul>
      <li><a moz-do-not-send="true" href="#WhatsThis">What's this
          Virtual Machine?</a></li>
      <li><a moz-do-not-send="true" href="#setup">Setup of VirtualBox</a><br>
      </li>
      <li><a moz-do-not-send="true" href="#WhatsNot">What's Not In this
          Virtual Machine?</a><br>
      </li>
      <li><a moz-do-not-send="true" href="#Desktop">Virtual AGC
          Facilities Available On the VM's Desktop</a></li>
      <li><a moz-do-not-send="true" href="#CommandLine">Virtual AGC
          Facilities Available From the Command Line</a></li>
      <li><a moz-do-not-send="true" href="#Lubuntu">Working With Lubuntu</a></li>
      <li><a moz-do-not-send="true" href="#LubuntuUpdates">Lubuntu
          Updates</a></li>
      <li><a moz-do-not-send="true" href="#kicad">Working With Apollo
          GNC Electrical Schematics</a></li>
      <li><a moz-do-not-send="true" href="#verilog">Working With Verilog
          Electrical Simulation of the AGC</a><br>
      </li>
    </ul>
    <h1><a name="WhatsThis"></a>What's this Virtual Machine?</h1>
    <p>This Virtual Machine (VM), called VirtualAGC-VM64, is intended to
      provide an easy and portable way to work with the materials from
      the Virtual AGC Project, and to update it, without the
      inconvenience of having to deal with complex installation
      instructions or the quirks of the various computer platforms
      (Windows, Mac OS, Linux, <i>et al.</i>, in multiple
      operating-system versions) that Virtual AGC targets.&nbsp; I won't
      describe the Virtual AGC Project itself in any detail here, since
      if you don't have a pretty good idea already what it is, then you
      can be assured that you don't need this VM at all and can stop
      reading right here.&nbsp; It suffices to say that the project
      provides information, software (both original and modern), and
      engineering drawings related to the flight computers used in the
      Gemini, Apollo, and Space Shuttle spacecraft and launch vehicles.<br>
    </p>
    <p>With this VM you'll be able to run all of the software provided
      by the Virtual AGC project, as well as to view Apollo guidance
      system electrical schematics and to perform electrical simulations
      of its digital circuity.&nbsp; For example, you <i>could</i>
      simulate electrical operation of an Apollo Guidance Computer (AGC)
      running its original software.<br>
    </p>
    <p>The VM itself is running <a moz-do-not-send="true"
        href="https://lubuntu.me/">a light-weight version of the 64-bit
        Ubuntu Linux operating system that's known as Lubuntu</a>.&nbsp;
      The VM can be run on any computer for which there's a version of <a
        moz-do-not-send="true" href="https://virtualbox.org">the
        VirtualBox virtualization environment</a>, or some common
      alternatives to it, but you likely know that already since you're
      viewing this message.<br>
    </p>
    <blockquote><b><font size="-1">Note:</font></b><font size="-1">&nbsp;







        <br>
      </font>
      <ul>
        <li><font size="-1">Login is automatic to the Lubuntu
            desktop.&nbsp; <br>
          </font></li>
        <li><font size="-1">If at some point you need to know it, your
            username and password are both "virtualagc".&nbsp; Changing
            the password will defeat certain updates, so change it at
            your peril.<br>
          </font></li>
        <li><font size="-1">Your home directory is /home/virtualagc,
            usually abbreviated as ~.</font></li>
        <li><font size="-1">The Virtual AGC source-code tree is
            maintained in the <a moz-do-not-send="true"
              href="file:///home/virtualagc/git/virtualagc/">subfolder
              git/virtualagc/</a> under your home directory.</font></li>
        <li><font size="-1">The electrical-schematics tree is maintained
            in the <a moz-do-not-send="true"
              href="file:///home/virtualagc/git/virtualagc-schematics/">subfolder




              git/virtualagc-schematics/</a> under your home directory.<br>
          </font></li>
        <li><font size="-1">Your "installed" version of the built
            Virtual AGC is in the <a moz-do-not-send="true"
              href="file:///home/rburkey/VirtualAGC/">subfolder
              VirtualAGC/</a> under your home directory.</font></li>
        <li><font size="-1">In Linux, filenames and folder names are <i>case







              sensitive</i> and "/" is the separator between the
            components of a filesystem path.<br>
          </font></li>
      </ul>
    </blockquote>
    <h1><a name="JoystickSetup"></a>Setup of VirtualBox<br>
    </h1>
    <p>I doubt if most people using modern computers will need any setup
      to use the Virtual AGC VM, beyond whatever you've <i>already</i>
      done to be reading this pleasant little note.&nbsp; However, there
      are some optional things you might want to do.&nbsp; If so, shut
      down the VM, if it's running, and look at VirtualBox's settings
      for the VirtualAGC-VM64 VM:<br>
    </p>
    <ul>
      <li>As delivered, the VM is set up to use 4 CPU cores.&nbsp; This
        can be changed in the VirtualBox Settings/System/Processor
        window.&nbsp; I have run it with 1 CPU core without any apparent
        difficulty, but this is nevertheless the case of "more is
        better".<br>
      </li>
      <li>Also as delivered, the VM is set to use 4GB of memory.&nbsp;
        This can be changed in the VirtualBox
        Settings/System/Motherboard window.&nbsp; I have run it with 1GB
        without any apparent problem.</li>
      <li>If you want to use a USB joystick to simulate the Apollo LM
        Attitude Controller Assembly (ACA, also referred to as the
        rotational hand controller, or RHC), attach it to your computer
        and look at the VirtualBox Settings/USB window.&nbsp; Use the
        hot-buttons there to add a new "USB Device Filter", choosing
        your joystick from the list you're presented with.&nbsp; Note
        that while the VM is running, it will by default take control of
        any of the devices listed in "USB Device Filters" away from your
        host computer, and only return control after shutting down the
        VM.</li>
    </ul>
    <blockquote><font size="-1"><b>Warning:</b>&nbsp; My own personal 3D
        joystick seems to be misidentified by some software within the
        VM as a tablet (i.e., a touchpad).&nbsp; So while it can be used
        as a ACA/RHC, it may also just cause random stuff to occur on
        the desktop as long as it's enabled.&nbsp; Which makes using it
        less appealing for me.&nbsp; Whether that's the case on your
        computer with your 3D joystick, who knows?</font><br>
    </blockquote>
    <ul>
    </ul>
    <h1><a name="WhatsNot"></a>What's Not In this Virtual Machine?</h1>
    <p>The original documentation for Gemini, Apollo, and the Space
      Shuttle is not directly provided within the VM due to size
      constraints.&nbsp; (I assume you wouldn't want to deal with
      multi-terabyte downloads of the VM!)&nbsp; Refer instead to
      Virtual AGC's online <a moz-do-not-send="true"
        href="https://www.ibiblio.org/apollo/links2.html">Apollo &amp;
        Gemini document library</a> or the <a moz-do-not-send="true"
        href="https://www.ibiblio.org/apollo/links-shuttle.html">Space
        Shuttle document library</a>.<br>
    </p>
    <p>Flight software for Gemini is not provided, because no surviving
      copy has ever been discovered.&nbsp; Some short programs created
      for us by a couple of the original Gemini software developers are
      present.<br>
    </p>
    <p>Flight software for the Apollo Launch Vehicle Digital Computer
      (LVDC) and the Space Shuttle General Purpose Computers (GPC) are
      not publicly provided due to <i>presumed</i> "export"
      restrictions under the International Trade in Arms Regulations
      (ITAR).&nbsp; It is hoped that at some point we can acquire either
      export licenses or else a ruling that no export licenses are
      needed, at which point the flight software will be included via an
      update.<br>
    </p>
    <p>Virtual AGC related software created by developers external to
      the Virtual AGC Project that's specific to the Windows or Mac OS
      platforms is not provided since it cannot be run on a Linux
      platform.<br>
    </p>
    <blockquote><font size="-1"><b>Aside:</b>&nbsp; It is possible to
        run <i>some</i> Windows software on Linux, via an emulation
        system called WINE (for the canard "WINE Is <i>Not</i> an
        Emulator").&nbsp; However, I'm not aware that any of the
        software mentioned in the paragraph above falls into that
        category.&nbsp; There is an article in the Orbiter Wiki (see the
        next section) that explains how to run an out-of-date version of
        Orbiter on Linux using WINE, so perhaps some day Orbiter w/NASSP
        will be included here.&nbsp; However, that day is not
        today.&nbsp; Due to its large size</font><font size="-1"><font
          size="-1"> and absence of a current use case,</font> WINE is
        not installed by default on the VM.</font><br>
    </blockquote>
    <p> </p>
    <h1><a name="Desktop"></a>Virtual AGC Facilities Available On the
      VM's Desktop<br>
    </h1>
    <p>Icons on the VM's desktop:<br>
    </p>
    <blockquote>
      <p><img moz-do-not-send="true"
          src="Icon-round-Question_mark.svg.png" alt="" height="24"> is
        the "info" icon which opens up the explanation you're reading
        right now ... but I can only assume you already figured that
        out!<br>
      </p>
      <p><img moz-do-not-send="true" src="ApolloPatch2-transparent.png"
          alt="" height="24"> opens <a moz-do-not-send="true"
href="https://www.ibiblio.org/apollo/download.html#Downloading_Running_or_Updating">the







          VirtualAGC GUI application</a>.&nbsp; That application is a
        portal that allows you to run an AGC/AGS simulation in a
        multitude of configurations, using any available version of the
        original AGC or AGS software, or to view any of that original
        software.<br>
      </p>
      <p><img moz-do-not-send="true" src="Firefox_logo.svg" alt=""
          height="24"> takes you to the Virtual AGC Project's main
        website.<br>
      </p>
      <p><img moz-do-not-send="true" src="github.com.png" alt=""
          height="24"> takes you to the Virtual AGC Project's software
        repository at GitHub.&nbsp; The corresponding <i>local</i>
        repository within this VM is <a moz-do-not-send="true"
          href="file:///home/virtualagc/git/virtualagc/">here</a>.&nbsp;
        Immediately after an update (see next item), the local
        repository is an identical copy of the master at GitHub.<br>
      </p>
      <p><img moz-do-not-send="true" src="update.png" alt="" height="24">
        updates the Virtual AGC software in this VM by downloading all
        of the latest source code from the GitHub repository, and
        rebuilding it.&nbsp; The update process will inquire several
        times whether you want to proceed:&nbsp; First before dropping
        any local changes you may have made locally to Virtual AGC
        source code, second (after showing you a list of all updates to
        be downloaded) whether you want to download them, third before
        the length process or rebuilding from source code, and finally
        after the entire process completes.&nbsp; Just input yyyy at the
        first prompt for completely unattended operation.&nbsp; After
        performing an update, an additional icon (Update.log) will
        appear on the desktop.&nbsp; The log won't be of any interest to
        you, I expect, but is available to be sent to us in case you
        encounter some difficulty updating.<br>
      </p>
      <p><img moz-do-not-send="true" src="codeblocks.png" alt=""
          height="24"> lets you perform visual debugging on AGC
        software.&nbsp; It is actually a folder, and in that folder
        there are debugging projects for a variety (albeit a small
        minority) of the available AGC software versions.&nbsp; Among
        those included are the Apollo 11 Command Module software
        (Comanche 055) and Lunar Module software (Luminary 099).<br>
      </p>
      <p><img moz-do-not-send="true" src="eeschema.svg" alt=""
          width="24" height="24"> lets you view the original AGC
        Guidance, Navigation &amp; Control electrical schematics — e.g.,
        electrical schematics for the AGC and DSKY —, as transcribed for
        a modern computer-aided design (CAD) system. There's further
        explanation in <a moz-do-not-send="true" href="#kicad">a later
          section</a>.</p>
      <p><img moz-do-not-send="true" src="GTKWave.svg" alt=""
          height="24"><img moz-do-not-send="true" src="gtkwave.svg"
          alt="" width="24" height="24"> lets you re-view the results of
        the most-recent Verilog simulation of the AGC electronics.&nbsp;
        It does not itself run the simulation, since that requires
        parameters known only to you, the user, but merely displays
        already-computed results.&nbsp; Unless I slip up committing to
        the repository, the default results available after an update
        are the first millisecond of a simulation of a model 2003993 AGC
        running the AGC program known as
        "Validation-hardware-simulation".&nbsp; Any simulations
        subsequently run by you override this until the next
        update.&nbsp; Simulations are performed from a command line.<br>
      </p>
      <p><img moz-do-not-send="true" src="archive.org.png" alt=""
          height="24"> takes you the Virtual AGC Project section of The
        Internet Archive, which contains the highest-available
        resolution scans of documents which may be available only at
        lower resolutions or lossier compression elsewhere, such as at
        the document library on our main website.<br>
      </p>
      <p><img moz-do-not-send="true" src="LM.png" alt="" height="24">
        takes you to the website of the NASSP (i.e., Apollo) add-on for
        the Orbiter spaceflight simulator, into which Virtual AGC has
        been integrated. Unfortunately, in <i>this</i> VM you cannot
        actually fly simulated Apollo missions using the Orbiter/NASSP.
        That's because Orbiter is compatible with Microsoft Windows
        only, and cannot be run on a Linux system. Nor can I freely
        provide a Windows-based VM on which to run Orbiter, because
        unlike Linux, Microsoft Windows cannot legally be freely
        distributed.<br>
      </p>
      <img moz-do-not-send="true" src="PTC-64x64.png" alt="" width="29"
        height="24"> opens the Programmable Test Controller (PTC)
      simulation, running what's called the PTC ADAPT Self-Test (PAST)
      program.&nbsp; The PTC was a test panel used for debugging Apollo
      Launch Vehicle Digital Computer (LVDC) software.&nbsp; The
      particular LVDC software it is running here is for the Aerospace
      Data Adapter/Processor Tester (ADAPT), which was a fixture for
      evaluating the Launch Vehicle Data Adapter (LVDA), a peripheral of
      the LVDC.&nbsp; Running LVDC software other than PAST must be done
      from the command line (see the next section).<br>
      <br>
      <img moz-do-not-send="true" src="utilities-terminal.png" alt=""
        width="24" height="24"> opens a Lubuntu command line.&nbsp; See
      the very next section below for reasons why you might wish to do
      that.<br>
      <br>
      <img moz-do-not-send="true" src="preferences-system.svg" alt=""
        width="24" height="24"> opens the Lubuntu "control panel" or
      "control center", or whatever term you'd like to apply to a
      facility for modifying the settings for the Lubuntu system itself.<br>
    </blockquote>
    <h1><a name="CommandLine"></a>Virtual AGC Facilities Available From
      the Command Line</h1>
    <p>Some facilities made available to you via the Virtual AGC
      software repository can be easily accessed via an integrated
      graphical interface as in the preceding section, whereas many
      others are available only via a command line.&nbsp; In this
      section, we have a brief summary of some of the more-useful
      Virtual AGC utilities available via the command line, but <i>this
        is not a comprehensive list</i> and may be updated in the
      future.&nbsp; In addition to the hyperlinked documentation, with a
      few exceptions, these programs generally accept a command-line
      option <code>--help</code> for additional information.<br>
    </p>
    <p>The programs whose names and descriptions are struck out <strike>like







        so</strike> are not (yet?) available and therefore are not
      included the VM.<br>
    </p>
    <ul>
    </ul>
    <h2>Gemini Onboard Computer (OBC)</h2>
    <ul>
      <ul>
      </ul>
      <li><b><a moz-do-not-send="true"
href="https://www.ibiblio.org/apollo/Gemini.html#yaOBCASM_the_OBC_Cross-Assembler">yaASM</a></b>,
        the assembler for OBC software source code, creating an OBS
        executable program.&nbsp; Note that no documentation for the
        original assembler or the assembly language itself, nor any
        original OBC source code, is presently known to have survived.
        Therefore, it is unlikely that the syntax required matches the
        original source code.</li>
      <ul>
      </ul>
      <li><a moz-do-not-send="true"
href="https://www.ibiblio.org/apollo/Gemini.html#yaOBC_the_OBC_CPU_Emulation"><b>yaOBC</b></a>,
        the OBS CPU emulator.&nbsp; Note that the emulator has a <a
          moz-do-not-send="true"
href="https://www.ibiblio.org/apollo/Gemini.html#Debugging_Interface_of_yaOBC">built-in







          debugging facility</a>.</li>
      <ul>
      </ul>
      <li><strike><b>yaPanel</b></strike><strike>, the Manual Data
          Insertion Unit (MDIU) simulator for astronaut interactions
          with the OBC.</strike></li>
    </ul>
    <ul>
      <ul>
      </ul>
    </ul>
    <h2>Apollo Lunar Module and Command Module AGC</h2>
    <ul>
      <ul>
      </ul>
      <li><a moz-do-not-send="true"
          href="https://www.ibiblio.org/apollo/yaYUL.html"><b>yaYUL</b></a>,
        the assembler for AGC software source code, both for Block I and
        Block II spacecraft.</li>
      <ul>
      </ul>
      <li><a moz-do-not-send="true"
          href="https://www.ibiblio.org/apollo/yaAGC.html"><b>yaAGC</b></a>,
        the Block II AGC CPU emulator.&nbsp; &nbsp; Note that the
        emulator has a <a moz-do-not-send="true"
          href="https://www.ibiblio.org/apollo/yaAGC.html#Debugging">built-in







          debugging facility</a>, but can also be visually debugged
        using Code::Blocks.</li>
      <ul>
      </ul>
      <li><a moz-do-not-send="true"
          href="https://www.ibiblio.org/apollo/yaDSKY.html#Running_yaDSKY"><b>yaDSKY2</b></a>,
        the AGC's Display-Keyboard (DSKY) simulator.</li>
      <ul>
      </ul>
      <li><a moz-do-not-send="true"
          href="https://www.ibiblio.org/apollo/yaTelemetry.html#yaTelemetry"><b>yaTelemetry</b></a>,
        the telemetry downlink monitor and uplink manager for the AGC.</li>
      <ul>
      </ul>
      <li><b><a moz-do-not-send="true"
href="https://www.ibiblio.org/apollo/yaTelemetry.html#LM_Simulator_by_Stephan_Hotto">lm_simulator</a></b>
        is a peripheral for the AGC CPU simulator providing various
        instruments such as an IMU, an FDAI, and a selection of
        control-panel switches, plus its own version of the DSKY.&nbsp;
        Note that it has some probably-uncorrectable peculiarities with
        respect to the various other graphical-interface programs
        mentioned here:</li>
      <ul>
        <br>
        <li>It has no --help option.<br>
        </li>
        <li>It is not scalable for high-resolution displays.</li>
        <li>The AGC emulator (yaAGC) must be running prior to starting
          it.</li>
        <br>
      </ul>
      <li><a moz-do-not-send="true"
          href="https://www.ibiblio.org/apollo/yaTelemetry.html#yaACA"><b>yaACA,







            yaACA2, yaACA3, jWiz</b></a>:&nbsp; The <b>yaACA<i>x</i></b>
        programs are simulators that allow a physical USB 3D joystick to
        simulate the Attitude Controller Assembly (ACA), also known as
        the Rotational Hand Controller (RHC), while <b>jWiz</b> is a
        "wizard" that helps you to decide which of the different ACA
        simulators to use.&nbsp; <br>
      </li>
      <ul>
      </ul>
    </ul>
    <blockquote>
      <blockquote><font size="-1"><b>Note:</b>&nbsp; </font><font
          size="-1"><b>yaACA<i>x</i></b> and <b>jWiz</b> expect to be
          run from ~/VirtualAGC/Resources/, since that's where their
          configuration files are, and may not behave properly
          otherwise.&nbsp; Note also that <b>jWiz</b> has no <code>--help</code>
          option.</font><br>
      </blockquote>
    </blockquote>
    <ul>
      <li><a moz-do-not-send="true"
href="https://www.ibiblio.org/apollo/Block1.html#Virtual_AGCs_CPU_Simulator_yaAGCb1"><b>yaAGCb1</b></a>,
        the Block I AGC CPU emulator.</li>
      <li><b><a moz-do-not-send="true"
href="https://www.ibiblio.org/apollo/Block1.html#Virtual_AGCs_DSKY_Simulator_yaDSKYb1">yaDSKYb1</a></b>,
        the Block I DSKY simulator.</li>
      <li><a moz-do-not-send="true"
          href="https://www.ibiblio.org/apollo/Block1.html#yaUplinkBlock1"><b>yaUplinkBlock1</b></a>,
        a digital-uplink program for sending commands to the Block I AGC
        CPU emulator.<br>
      </li>
      <li><a moz-do-not-send="true"
href="https://www.ibiblio.org/apollo/Block1.html#John_Pultoraks_Assembler_and_Simulator"><b>yaAGC-Block1</b></a>,
        John Pultorak's Block I AGC assembler and emulator.&nbsp; Note
        that assembler accepts only a custom syntax unique to it, rather
        than the original Block I source-code syntax.&nbsp; However, <b>yaYUL</b>
        (see above) can create executable object files accepted by this
        program, so that it continues to be useful as a debugger.</li>
    </ul>
    <ul>
      <ul>
      </ul>
    </ul>
    <h2>Apollo Lunar Module Abort Guidance System (AGS)</h2>
    <ul>
      <ul>
      </ul>
      <li><a moz-do-not-send="true"
href="https://www.ibiblio.org/apollo/yaAGS.html#yaLEMAP_the_AGS_Cross-Assembler"><b>yaLEMAP</b></a>,
        the assembler for AGS software source code, creating an AGS
        executable program.</li>
      <ul>
      </ul>
      <li><a moz-do-not-send="true"
          href="https://www.ibiblio.org/apollo/yaAGS.html#Utility_Programs"><b>binLEMAP</b></a>,
        for creating an AGS executable file from a list of octal values.</li>
      <ul>
      </ul>
      <li><a moz-do-not-send="true"
href="https://www.ibiblio.org/apollo/yaAGS.html#yaAGS_the_AGS_CPU_Emulation"><b>yaAGS</b></a>,
        the AGS CPU emulator.&nbsp; Note that the emulator has a <a
          moz-do-not-send="true"
          href="https://www.ibiblio.org/apollo/yaAGS.html#Debug">built-in







          debugging facility</a>.<br>
      </li>
      <ul>
      </ul>
      <li><a moz-do-not-send="true"
href="https://www.ibiblio.org/apollo/yaAGS.html#yaDEDA_the_AGS_User-Interface"><b>yaDEDA</b></a>,
        the AGS Data Entry and Display Assembly (DEDA) simulator.</li>
      <ul>
      </ul>
    </ul>
    <ul>
    </ul>
    <h2>Apollo Launch Vehicle Digital Computer (LVDC):&nbsp; </h2>
    <ul>
      <ul>
      </ul>
      <li><b><a moz-do-not-send="true"
href="https://www.ibiblio.org/apollo/LVDC.html#yaLVDCASM_the_LVDC_Cross-Assembler">yaASM.py</a></b>,
        the assembler for software source code for the LVDC and
        Programmable Test Controller (PTC), creating an LVDC/PTC
        executable program.</li>
      <ul>
      </ul>
      <li><a moz-do-not-send="true"
href="https://www.ibiblio.org/apollo/LVDC.html#yaLVDC_the_LVDC_CPU_Emulation"><b>yaLVDC</b></a>,
        the CPU emulator for the LVDC and PTC.&nbsp; There are presently
        no LVDC peripherals.&nbsp; But the emulator has a <a
          moz-do-not-send="true"
          href="https://www.ibiblio.org/apollo/LVDC.html#EmulatorDebugger">built-in







          debugging facility</a>, or can work with the telemetry or
        Programmable Test Controller systems (see next items), so LVDC
        code execution need not be entirely black-box.</li>
      <ul>
      </ul>
      <li><a moz-do-not-send="true"
          href="https://www.ibiblio.org/apollo/LVDC.html#ViewingTelemetry"><b>yaMccLvdc.py</b></a>,
        the LVDC telemetry monitor and Digital Command System (DCS).</li>
      <ul>
      </ul>
      <li><a moz-do-not-send="true"
          href="https://www.ibiblio.org/apollo/PTCTestProcedures.html"><b>yaPTC</b><b>.py</b></a>,
        the Programmable Test Controller (PTC) simulator.&nbsp; <a
          moz-do-not-send="true"
href="https://www.ibiblio.org/apollo/LVDC.html#PTC_ADAPT_Self-Test_Program">See







          here also</a>.<br>
      </li>
      <ul>
      </ul>
      <li><b>analyzeBoost.py</b>:&nbsp; <a moz-do-not-send="true"
          href="https://www.ibiblio.org/apollo/LVDC.html#DoingSomething">See







          the LVDC's "repeatable flight mode"</a>.</li>
      <ul>
      </ul>
      <li><b>yaASMflowchart2.py</b>, a software flowchart creator based
        on mysterious markings found in certain LVDC flight software
        source code.</li>
      <ul>
      </ul>
      <li><b>unHOP.py</b> is a programmer aid that parses an LVDC "HOP
        constant" into its constituent fields.</li>
      <ul>
      </ul>
      <li><b>unOP.py</b> is a programmer aid that parses an LVDC opcode
        into its constituent fields.</li>
    </ul>
    <ul>
      <ul>
      </ul>
    </ul>
    <h2>Space Shuttle</h2>
    <ul>
      <ul>
      </ul>
      <li><a moz-do-not-send="true"
          href="https://www.ibiblio.org/apollo/HAL.html"><b>HALSFC</b></a>,
        the original Intermetrics/United Space Alliance compiler for the
        HAL/S computer language in which Space Shuttle flight software
        was written, as ported for "modern" computer systems via the
        XCOM-I.py XPL/I language compiler (see below).&nbsp; HALSFC is
        actually a shell script that integrates the various compiler
        passes, which are each implemented as stand-alone programs, as
        follows:</li>
      <ul>
        <br>
        <li><b>HALSFC-PASS1</b>, "phase 1" (parsing), specialized for
          primary flight software.</li>
        <li><b>HALSFC-PASS1B</b>, same except specialized for backup
          flight software.</li>
        <li><b>HALSFC-FLO</b>, "flow generator" for "phase 1.5"
          (optimization).</li>
        <li><b>HALSFC-OPT</b>, "optimization" for "phase 1.5",
          specialized for primary flight software.</li>
        <li><b>HALSFC-OPTB</b>, same except specialized for backup
          flight software.</li>
        <li><b>HALSFC-AUXP</b>, "auxiliary optimization" for "phase
          1.5".</li>
        <li><b>HALSFC-PASS2</b>, "phase 2" (code generation),
          specialized for primary flight software.</li>
        <li><b>HALSFC-PASS2B</b>, same except specialized for backup
          flight software.</li>
        <li><strike><b>HALSFC-PASS3</b></strike><strike>, "phase 3"
            (simulation data file generation), specialized for primary
            flight software.</strike><strike><br>
          </strike></li>
        <li><strike><b>HALSFC-PASS3B</b></strike><strike>, same except
            specialized for backup flight software.</strike></li>
        <li><strike><b>HALSFC-PASS4</b></strike><strike>, "phase 4".</strike></li>
        <br>
      </ul>
      <li><a moz-do-not-send="true" href="ASM101S.html"><b>ASM101S.py</b></a>,
        a macro assembler for the IBM AP-101S assembly language.</li>
      <ul>
      </ul>
      <li><a moz-do-not-send="true" href="ASM101S.html#wildThings"><b>extractAP101S.py</b></a>,
        a program which extracts AP-101S assembly language from a report
        made by PASS2 of the HAL/S compiler (HALSFC).&nbsp; (Has no <code>--help</code>
        option.)<br>
      </li>
      <ul>
      </ul>
      <li><a moz-do-not-send="true"
          href="https://www.ibiblio.org/apollo/HALLINK101S.html#reverse"><b>readObject101S.py</b></a>,
        a program for reading and parsing AP-101S object files.<br>
      </li>
      <ul>
      </ul>
      <li><strike><b>HALLINK101S</b></strike><strike>, an AP-101S linker
          for object files produced by </strike><strike>HALSFC</strike><strike>
          and </strike><strike>ASM101S.py</strike><strike> (see above).</strike><strike><br>
        </strike></li>
      <ul>
      </ul>
      <li><strike><b>ap101s</b></strike><strike>, a light-weight IBM
          AP-101S CPU emulator.</strike><br>
      </li>
      <ul>
      </ul>
      <li><b>HAL_S_FC.py</b>, a fully-functional port of PASS1 of the
        original Intermetrics HAL/S compiler to the Python 3 language.<br>
      </li>
      <ul>
      </ul>
      <li><a moz-do-not-send="true" href="hal-s-interpreter.html"><b>yaHAL-S-FC.py</b></a>,
        a partially-functional HAL/S compiler and interpreter.</li>
      <ul>
      </ul>
      <li><a moz-do-not-send="true" href="XPL-I.html#monitor"><b>ibmHex.py</b></a>,
        a utility (and Python module) to convert back and forth between
        IBM Hexadecimal Floating-Point format and human-readable (or
        Python-readable) numbers.<br>
      </li>
      <ul>
      </ul>
      <li><a moz-do-not-send="true"
          href="https://www.ibiblio.org/apollo/XPL-I.html#sim360"><b>XCOM-I.py</b></a>,
        a compiler for the XPL/I language, which is the standard ~1970
        XPL language as extended by Intermetrics, Inc., for writing
        their compiler for the HAL/S language.<br>
      </li>
      <ul>
      </ul>
      <li><a moz-do-not-send="true"
          href="https://www.ibiblio.org/apollo/XPL-I.html#sim360"><b>sim360</b></a>,
        a light-weight IBM System/360 CPU emulator.&nbsp; It is used
        primarily in the validation process for XCOM-I.py (see above),
        the XPL/I language compiler, but can be used for other purposes
        as well.</li>
    </ul>
    <h2>Verilog Simulation of AGC Electrical Schematics<br>
    </h2>
    <p>Few of the provided programs are likely to be of direct interest,
      so I'll skip over those.&nbsp; Those which I think are potentially
      of interest are:<br>
    </p>
    <ul>
      <li><a moz-do-not-send="true"
          href="https://www.ibiblio.org/apollo/Verilog.html#AGCworkflow">simulateAGC</a>,
        which creates, runs, and displays the results of a Verilog-based
        electrical simulation of a full AGC CPU's electronics, running
        AGC software.<br>
      </li>
      <li><a moz-do-not-send="true"
href="https://www.ibiblio.org/apollo/Verilog.html#An_Example:_testVerilog">simulateModelII</a>,
        which creates, runs, and displays the results of a Verilog-based
        electrical simulation of a single AGC logic module or portion
        thereof.<br>
      </li>
      <li><a moz-do-not-send="true"
href="https://www.ibiblio.org/apollo/Verilog.html#Converting_Netlist_to_Verilog">dumbVerilog.py</a>,
        which converts the netlist of an AGC "logic module" to a Verilog
        source code.</li>
    </ul>
    <ul>
      <ul>
      </ul>
    </ul>
    <h2><a name="templates"></a>Python Templates for Peripheral Devices</h2>
    If you are engaged in creating your own peripheral devices suitable
    for the Virtual AGC framework, you might like to supplement <a
      moz-do-not-send="true"
      href="https://www.ibiblio.org/apollo/developer.html">the
      description of the communication protocol</a> with running some
    simple, model software that's easy to understand and to port.&nbsp;
    The Python script <b>piPeripheral.py</b> <a moz-do-not-send="true"
href="https://www.ibiblio.org/apollo/DIY.html#Your_Own_Peripheral_Devices">serve







      as such a model</a>, as do the more-fully worked-out <b>piDSKY.py</b>
    and <b>piDEDA.py</b> programs.&nbsp; For example, in the screenshot
    below, I am running <b>piDSKY.py</b> in parallel with the
    more-usual DSKY emulation (<b>yaDSKY2</b>), but <b>piDSKY.py</b>
    provides very different insight into the communication protocol that
    may be more useful for an implementer.
    <ul>
    </ul>
    <div align="center"><img moz-do-not-send="true" src="piDSKY.jpg"
        alt="" width="1224" height="628"></div>
    <p><br>
    </p>
    <h1><a name="Lubuntu"></a>Working With Lubuntu</h1>
    <p>You're unlikely to be familiar with Lubuntu, but be confident
      that unfamiliarity won't matter very much to you.&nbsp; Since this
      VM is not intended to be a full-fledged system for you to do your
      daily work or obtain your non-AGC-related entertainment, it
      doesn't have much software installed on it that isn't directly
      relevant to the Virtual AGC Project.&nbsp; But it doesn't need
      much, and hopefully this short section will familiarize you almost
      everything you do need to know.<br>
    </p>
    <ul>
      <li>As delivered, the desktop is configured so that a <i>single
          click</i> on any file opens it, similar to a web browser. If
        you prefer <i>double clicking</i>, as is the default for most
        operating systems, you can easily configure it. Open the
        file-system navigator by clicking on the <img
          moz-do-not-send="true" src="system-file-manager.svg" alt=""
          height="24"> icon on the toolbar at the bottom of the desktop.
        Use Edit/Preferences on the navigator's menu, and uncheck the
        box labeled "Open files with single click".</li>
      <li>Lubuntu's main menu is opened by using the icon that looks
        like&nbsp;<img moz-do-not-send="true"
          src="Lubuntu_logo_only.svg" alt="" width="24" height="24"> in
        the lower-left corner of the screen.<br>
      </li>
      <li>Web browser: Firefox is found on the Lubuntu main menu under
        the heading "Internet".</li>
      <li>Text editor: Several are installed (FeatherPad, Vim), on the
        Lubuntu main menu under the heading "Accessories", or obtained
        by right-clicking on a text file.&nbsp; I would recommend
        FeatherPad for ease of use, but some people may prefer Vim its
        more-advanced capabilities.</li>
      <li>Screenshots: I'd recommend using the VirtualBox View menu to
        make screenshots, rather than using Lubuntu's facilities or the
        facilities of the host computer.</li>
      <li>Recordings: The VirtualBox View menu has a Recording option
        you can use, and it is functional, but it's tricky to configure
        and use, so I wouldn't recommend using it if you already have
        decent screen-recording software on the host computer.<br>
      </li>
      <li>System snapshots: If you have configured the VM how you like
        it and are considering doing anything which might adversely
        affect it (such as performing a Lubuntu update), you might want
        to make a snapshot of your current VM configuration before doing
        so. I would recommend using VirtualBox's snapshotting capability
        rather than attempting to install or use any native Lubuntu
        backup facilities for that purpose.</li>
    </ul>
    <h1><a name="LubuntuUpdates"></a>Lubuntu Updates</h1>
    Regarding Lubuntu updates, I recommend <i>not</i> performing them
    routinely.&nbsp; <br>
    <br>
    It is important to update Lubuntu from time to time, because
    otherwise the VM may become so out-of-date with respect to the
    official Virtual AGC build process that Virtual AGC itself can no
    longer be built within the VM.&nbsp; On the other hand, updates to
    Lubuntu risk breaking Virtual AGC updates as well.<br>
    <blockquote><font size="-1"><b>For example</b>, you will find in
        Lubuntu-update notifications you receive that the package "bnfc"
        is marked as "held", which means that it wouldn't be updated
        along with the rest of Lubuntu.&nbsp; That's because I have
        deliberately installed an out-of-date bnfc package, in order to
        prevent breakage of a specific space-shuttle program called
        yaHAL-S-FC.py.&nbsp; I've marked the bnfc package as "held" to
        make sure that doesn't happen.&nbsp; If somehow a newer version
        does get installed, and the Virtual AGC updater is broken by
        that, the procedure is to reinstall the obsolete version of the
        package and then re-mark it as "held":</font><br>
      <blockquote>
        <pre># Recall that the password for `sudo` is "virtualagc".<br>sudo dpkg -i ~/Downloads/bnfc_2.8.3-1build1.1_amd64.deb<br>sudo apt-mark hold bnfc<br></pre>
      </blockquote>
    </blockquote>
    <ul>
    </ul>
    <p>If you make system snapshots in advance, as mentioned in the
      preceding section, you can then perform system updates without
      fear, since you can always roll back a failed update.<br>
    </p>
    <p>My <i>hope</i> is that I will remember to test the VM regularly,
      and to post advice about Lubuntu updates that are recommended or
      inadvisable.&nbsp; <a moz-do-not-send="true"
        href="download.html#LubuntuUpdates">Check here for the current
        Lubuntu update recommendations</a>. <br>
    </p>
    <h1><a name="kicad"></a>Working With Apollo GNC Electrical
      Schematics<br>
    </h1>
    <p>Here's a tiny smidgen of useful introductory info about viewing
      the CAD files for the Apollo Guidance, Navigation &amp; Control
      (GNC) System electrical schematics in the Virtual AGC VM.<br>
    </p>
    <p>At present, there are about 140 CAD files available, referenced
      by their original drawing numbers.&nbsp; Unfortunately — for
      example —, while you can easily see that we present you with
      drawing 2005260A, there's not yet any way within the VM that you
      can tell at a glance that drawing 2005260A represents "logic
      module A2" in the AGC of Apollo 11's Lunar Module.&nbsp; In other
      words, there's nothing here in the VM that says to you "Drawing
      2005260A is relevant to me and I want to look at it!"&nbsp; That's
      a deficiency I hope to correct in the future.&nbsp; In the
      meantime, what you have is the ability to work in the opposite
      direction:&nbsp; You can use our online <a moz-do-not-send="true"
href="https://www.ibiblio.org/apollo/ElectroMechanical.html#Search_by_Drawing_Number_or_Title_">drawing-tree




        lookup facility</a> to choose "Apollo 11 Lunar Module" to reach
      drawing 2014999-101 of the GN&amp;C system, then choose "COMPUTER
      ASSEMBLY" to reach drawing 2003993-031, at which point you can
      select "LOGIC MODULE A2" to reach drawing 2003888-021, and finally
      you'll see that it has the electrical schematic 2005260A, which
      you can view either in its scanned form or as an image exported
      from the CAD file ... or know to view the actual CAD file here in
      the VM.<br>
    </p>
    <p>You may perhaps wonder <i>why</i> you would want to view these
      CAD files here in the VM, using EDA software you're not familiar
      with, as opposed to simply looking at the images I just now told
      you we provide online anyway!&nbsp; Well, aside from the fun
      factor, you have useful capabilities within the CAD system that
      you wouldn't otherwise have just from viewing the images of the
      drawings.&nbsp; For example, you perform searches on component
      reference designators or net names, or even on resistor values or
      component types.&nbsp; Or you can generate netlist files in a
      variety of formats.&nbsp; Or you can highlight a given electrical
      net, with the highlighting extending even across multiple pages of
      the drawing, making it much easier to see how the interconnections
      work.&nbsp; In the screenshot below, you see a net that's
      highlighted <font color="#cc33cc">like so</font>.<br>
    </p>
    <div align="center"><img moz-do-not-send="true"
        src="exampleKiCad.png" alt="" width="676" height="268"></div>
    <ul>
      <li><img moz-do-not-send="true" src="exampleToolbar.png" alt=""
          width="79" height="154" align="right">These CAD drawings are
        in the format of the <a moz-do-not-send="true"
          href="https://www.kicad.org/">KiCad EDA software</a>, version
        6 or 7, and in particular for KiCad's schematic editor, <b>eeschema</b>.&nbsp;




        The CAD files can be directly used in later versions of KiCad,
        but you may see a harmless warning banner reading "This file was
        created by an older versions of KiCad. It will be converted to
        the new format when saved".</li>
      <li>The schematics for any given drawing tend to consist of
        multiple pages, consisting of a top-level CAD file (always
        called module.kicad_sch) and supplemental pages that represent
        either separate "sheets" of the original drawing or else
        reusable "blocks".&nbsp; So when you open a drawing, you
        sometimes just see some rectangular objects with markings like
        Page 1 or Page 2.&nbsp; You can descend into these extra sheets
        or blocks by double-clicking them.</li>
      <li>You can zoom in or zoom out using a mouse scroll-wheel.</li>
      <li>To pan, you hold in the <i>rightmost</i> mouse button while
        moving the mouse.&nbsp; (Holding the leftmost mouse button is
        used for selecting rectangular areas.)</li>
      <li>To do any of the stuff just mentioned, you have to be in
        "Select" mode, which means that the cursor looks like an
        arrowhead.&nbsp; You activate this mode using the up-arrow
        hotbutton on the toolbar to the right of the drawing (as in the
        image to the right).&nbsp; The hotbutton immediately below that
        instead enables the "Highlight" mode that I used in the
        screenshot above having a highlighted net.</li>
      <li>The electrical schematics for which desktop icons are provided
        are directly related to the original paper drawings are stored
        in <a moz-do-not-send="true"
          href="file:///home/virtualagc/git/virtualagc-schematics/Schematics/">this





          folder</a>, while alternate schematics intended to convey the
        correct functionality without corresponding to any specific
        original drawing are instead in <a moz-do-not-send="true"
          href="file:///home/virtualagc/git/virtualagc-schematics/msSchematics/">this





          folder</a>.&nbsp; Note that the alternate drawings haven't
        been endowed with any convenient links from the desktop, so you
        have to navigate to them in a file browser and explicitly run <b>eeschema</b>
        yourself if you're interested in them.&nbsp; The top-level
        schematic file for any given drawing is called
        "module.kicad_sch".</li>
    </ul>
    <h1><a name="verilog"></a>Working With Verilog Electrical Simulation
      of the AGC</h1>
    <p>The Verilog-based simulation process for Virtual AGC is <a
        moz-do-not-send="true"
        href="https://www.ibiblio.org/apollo/Verilog.html">described in
        detail online here</a>.&nbsp; Note that in this VM, the CAD
      files for the electrical schematics are stored in the folder
      ~/git/virtualagc-schematics/Schematics/.&nbsp; So for example,
      where the online description mentions (say) the testVerilog/
      folder, it's really talking about
      ~/git/virtualagc-schematics/Schematics/testVerilog/.<br>
      <br>
      The simulation process is largely automated, so you usually don't
      need to know too much about the details of how it works.&nbsp; The
      most-likely thing you'd want to do, I think, is to simulate some
      model of the Block II AGC, running some particular AGC
      software.&nbsp; There's a script called <b>simulateAGC</b> that
      builds the simulation for you, runs it, and then displays the
      results in a waveform viewer.&nbsp; Alas, the waveform viewer
      doesn't really know enough to zoom in or out to the magnification
      level you'd like, nor to guess which of the ~5000 available
      signals you'd like to see, so you'll have to manually adjust those
      yourself.&nbsp; Though once you do make those adjustments, you can
      save the setup to reuse it later.<br>
    </p>
    <p>In brief, you use the commands:<br>
    </p>
    <blockquote>
      <pre><font color="#663300">cd ~/git/virtualagc-schematics/Schematics<br>simulateAGC <i>AGC_MODEL</i> <i>AGC_SOFTWARE</i> "<i>VERILOG_OPTIONS</i>"</font><br></pre>
    </blockquote>
    <p>Here, <font color="#663300"><code><i>AGC_MODEL</i></code></font>
      is the particular model number of the AGC, of which there are a
      variety, but only models 2003200 (no flown missions) and 2003993
      (all flown Block II missions) are currently available for
      simulation purposes.&nbsp; If "" is used (or if there are no
      command-line parameters at all), the default is 2003993.&nbsp;
      Block I models will hopefully be supported at some point later,
      via an update.<br>
    </p>
    <p><font color="#663300"><i><code>AGC_SOFTWARE</code></i></font> is
      the name of the AGC software the simulated CPU runs.&nbsp; Only
      the following are currently available for simulation
      purposes:&nbsp; Artemis072, Aurora12, Borealis, Colossus237,
      Colossus249, Comanche055, Luminary099, Luminary116, Luminary131,
      Luminary210, Retread44, Sunburst120, Sunburst37, SuperJob,
      Validation, and Validation-hardware-simulation.&nbsp;
      Validation-hardware-simulation is the default if "" is used (or if
      the 2nd and 3rd command-line parameters of <b>simulateAGC</b> are
      omitted).<br>
    </p>
    <p><font color="#663300"><code>"<i>VERILOG_OPTIONS</i>"</code></font>
      is a quoted, space-separated list of command-line options for the
      Verilog compiler that creates the simulation.&nbsp; It can be left
      blank.&nbsp; Some of the useful options are:<br>
    </p>
    <ul>
      <li><font color="#663300"><code>-DRUNLENGTH=<i>N</i></code></font>,
        where <i><font color="#663300"><code>N</code></font></i> is the
        length of the simulation run in nanoseconds.&nbsp; The default
        is 250000000 (i.e., 250 milliseconds or 0.25 seconds).</li>
      <li><font color="#663300"><code>-DDUMP_DECODER</code></font>,
        which means that the simulation should log only the ~80 signals
        needed to decode CPU instructions.</li>
      <li><font color="#663300"><code>-DDUMP_HELPFUL</code></font>,
        which means that the simulation should log the ~150 signals
        needed to decode CPU instructions, plus the CPU registers A, L,
        Z, S, EB, and FB.</li>
      <li><font color="#663300"><code>-DDUMP_BACKPLANE</code></font>,
        which means that the simulation should log the ~2000 signals
        appearing on the AGC backplane.</li>
      <li><font color="#663300"><code>-DDUMP_ALL</code></font>, which
        means that the simulation should log <i>all</i> ~5000 signals
        in the AGC.&nbsp; This is the default.</li>
      <li><font color="#663300"><code>-DSPOOF_SC</code></font>, which
        means to simulate certain signals input to the AGC from the
        spacecraft, which does not occur by default.</li>
      <li><font color="#663300"><code>-Pagc.GATE_DELAY=</code><code><i>N</i></code></font>,
        which means to set the logic-gate propagation delay to <font
          color="#663300"><i><code>N</code></i></font>
        nanoseconds.&nbsp; The default is 20.<br>
      </li>
    </ul>
    <p>In choosing from among these various parameters, note that the
      output log of the simulation, which is a file called agc.fst, has
      a size <i>very</i> roughly equal to 20 bytes times the run length
      in milliseconds times the number of signals logged.&nbsp; The
      logged waveforms in agc.fst can be re-displayed later by using
      the&nbsp;<img moz-do-not-send="true" src="gtkwave.svg" alt=""
        width="16" height="16"> desktop icon.<br>
    </p>
    <p>The next-most-likely thing I think you'd want to do is to
      simulate the electronics of a single AGC logic module, such as
      module A1, implemented perhaps by the schematic drawing
      2005259A.&nbsp; You could do this via the commands</p>
    <blockquote>
      <pre><font color="#663300">cd ~/git/virtualagc-schematics/Schematics/2005259A<br>simulateModuleII <i>MODULE_NUMBER</i></font></pre>
    </blockquote>
    <p>with <font color="#663300"><i><code>MODULE_NUMBER</code></i></font>
      being <font color="#663300"><code>A1</code></font>.&nbsp; This
      creates a simulation log-file called module.fst and displays the
      signal traces logged in it.&nbsp; Note, though, that it will not
      attempt to guess which signals you want to view, so when the
      waveform viewer appears, you'll have to make that selection
      yourself.&nbsp; Moreover, the desktop icon does <i>not</i>
      re-display module.fst for you, and you would instead need to use
      the command "<font color="#663300"><code>gtkwave module.fst</code></font>"
      (or one of several alternative techniques found in GTKWave
      documentation) to re-display the simulation results later.<br>
    </p>
    <p>Or if you wanted to simulate just a portion of a logic module,
      say the subcircuit of module A1 called "testVerilog" that's used
      by the online documentation as an example, its schematics would
      have to reside in a subdirectory of the same name, and it would be
      simulated via</p>
    <blockquote>
      <pre><font color="#663300">cd ~/git/virtualagc-schematics/Schematics/testVerilog<br></font><font color="#663300">simulateModuleII A1</font></pre>
    </blockquote>
    <p> </p>
    <ul>
    </ul>
    <ul>
    </ul>
    <p>However, to meaningfully simulate any circuit via <b>simulateModuleII</b>
      would require you to create a "test bench" source-code file in the
      Verilog language, specifically tailored to what you want to
      accomplish in the simulation.&nbsp; For example, what input
      signals are applied, and when?&nbsp; What signals do you want to
      log the values of for later viewing?&nbsp; What messages do you
      want to print during the simulation process?&nbsp; You are
      provided with sample test-bench files, but other than the case of
      module A1 these are unlikely to meet your need without significant
      modification, and it's outside of our scope here to try and cover
      the process of creating such test-bench files.&nbsp; I would note,
      however, that if you rewrite any of the sample test-bench files
      provided, your changes will be unceremoniously and silently dumped
      the next time you update the VM, so you are advised always to
      create a <i>new</i> folder for any logic module you want to
      simulate.<br>
    </p>
    <p><i><br>
        (Last updated 2025-02-20 by Ron Burkey)</i><br>
      <br>
    </p>
  </body>
</html>
