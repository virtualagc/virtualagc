<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta content="text/html;charset=ISO-8859-1" http-equiv="Content-Type">
<title>Assembly listing generated by yaYUL</title>
<style type="text/css">
p.nobreak { white-space:nowrap; }
a { text-decoration:none; }
</style>
<style type="text/css">
.op{
font-weight: bold;
color: #993300;
}
</style>
<style type="text/css">
.dn{
color: #009900;
}
</style>
<style type="text/css">
.fe{
color: #FF0000;
}
</style>
<style type="text/css">
.in{
color: #FF6600;
}
</style>
<style type="text/css">
.ps{
color: #336600;
}
</style>
<style type="text/css">
.sm{
color: #0000FF;
}
</style>
<style type="text/css">
.wn{
color: #FF9900;
}
</style>
<style type="text/css">
.co{
font-style: italic;
color: #993399;
}
</style>
</head>
<body>
<p class="nobreak">
<span style="font-family: monospace;">
<pre>
<h1>Source Code</h1>
</pre>
</span>
</p>
<table style="text-align: left;" border="1" cellpadding="2" cellspacing="2">
<tbody>
<tr>
<td style="white-space: nowrap; vertical-align: middle;">
<img alt="" src="Apollo32.png" style="width: 32px; height: 32px;" align="left">
</td>
<td style="vertical-align: middle;">
This is a reconstruction of the AGC program Luminary 99 Rev 0. It was the
second release of the Lunar Module flight software targeted for use in Apollo 11, after Luminary 97.
A bug (which had been around since at least Apollo 10, Luminary 69) was
discovered in Rev 0 shortly before the Apollo 11 flight, resulting in a last minute
revision into <a href="../Luminary099/MAIN.agc.html">Rev 1</a>, 
which is what actually flew rather than
the Rev 0 presented here.  A hardcopy of Rev 0 is known to
exist &mdash; it belonged to AGC developer Allan Klumpp for many years &mdash; but
unfortunately the Virtual AGC Project has not had access to that hardcopy.  Thus
the code you see here had been reconstructed (we believe accurately) rather than
transcribed.  The first step of the reconstruction of the Rev 0 source code was
the transcription of the Rev 1 source code from a hardcopy in the MIT Museum collection.
The process of reverting the active portion of the source code (i.e., other than
program comments) from Rev 1 to Rev 0 was very minor, consisting 
only of moving the position of the STARTSB1 label in <a href="FRESH_START_AND_RESTART.agc.html">
FRESH START AND RESTART</a>.  Allan had previously given
us the checksums of the memory banks of Rev 0, and we have verified the program presented here has checksums
identical to all banks of Allan's listing of Rev 0.  The notations on Allan's Rev 0 program listing read, 
in part:<br>
<br>
<pre>
	GAP:  ASSEMBLE REVISION 099 OF AGC PROGRAM LUMINARY BY NASA 2021112-051
</pre>
<br>
A single program comment is known to differ between Rev 0 and Rev 1, but these are
harder to reconstruct and verify than changes to the active portion of the code.  Thus
it is possible that there are additional differences between the program comments
in Rev 0 and Rev 1 that are unknown to us, and therefore are not reflected in the code
presented here.
</td></tr></tbody></table>
<p class="nobreak">
<span style="font-family: monospace;">
<pre>
049210,000002:                                                                                                  <span class="co">## Copyright:   Public domain.</span>
049211,000003:                                                                                                  <span class="co">## Filename:    LATITUDE_LONGITUDE_SUBROUTINES.agc</span>
049212,000004:                                                                                                  <span class="co">## Purpose:     Part of the reconstructed source code for LMY99 Rev 0,</span>
049213,000005:                                                                                                  <span class="co">##              otherwise known as Luminary Rev 99, the second release</span>
049214,000006:                                                                                                  <span class="co">##              of the Apollo Guidance Computer (AGC) software for Apollo 11.</span>
049215,000007:                                                                                                  <span class="co">##              It differs from LMY99 Rev 1 (the flown version) only in the</span>
049216,000008:                                                                                                  <span class="co">##              placement of a single label. The corrections shown here have</span>
049217,000009:                                                                                                  <span class="co">##              been verified to have the same bank checksums as AGC developer</span>
049218,000010:                                                                                                  <span class="co">##              Allan Klumpp's copy of Luminary Rev 99, and so are believed</span>
049219,000011:                                                                                                  <span class="co">##              to be accurate. This file is intended to be a faithful </span>
049220,000012:                                                                                                  <span class="co">##              recreation, except that the code format has been changed to </span>
049221,000013:                                                                                                  <span class="co">##              conform to the requirements of the yaYUL assembler rather than </span>
049222,000014:                                                                                                  <span class="co">##              the original YUL assembler.</span>
049223,000015:                                                                                                  <span class="co">##</span>
049224,000016:                                                                                                  <span class="co">## Assembler:   yaYUL</span>
049225,000017:                                                                                                  <span class="co">## Contact:     Jim Lawton &lt;jim DOT lawton AT gmail DOT com></span>
049226,000018:                                                                                                  <span class="co">## Website:     www.ibiblio.org/apollo.</span>
049227,000019:                                                                                                  <span class="co">## Pages:       1133-1139</span>
049228,000020:                                                                                                  <span class="co">## Mod history: 2009-05-28 JL   Updated from page images.</span>
049229,000021:                                                                                                  <span class="co">##              2011-01-06 JL   Fixed interpretive indentation.</span>
049230,000022:                                                                                                  <span class="co">##              2016-12-17 RSB  Proofed text comments with octopus/ProoferComments</span>
049231,000023:                                                                                                  <span class="co">##                              and corrected the errors found.</span>
049232,000024:                                                                                                  <span class="co">##              2017-03-15 RSB  Comment-text fixes identified in 5-way</span>
049233,000025:                                                                                                  <span class="co">##                              side-by-side diff of Luminary 69/99/116/131/210.</span>
049234,000026:                                                                                                  <span class="co">##              2017-08-01 MAS  Created from LMY99 Rev 1.</span>
049235,000027: 
049236,000028:                                                                                                  <span class="co">## This source code has been transcribed or otherwise adapted from</span>
049237,000029:                                                                                                  <span class="co">## digitized images of a hardcopy from the MIT Museum.  The digitization</span>
049238,000030:                                                                                                  <span class="co">## was performed by Paul Fjeld, and arranged for by Deborah Douglas of</span>
049239,000031:                                                                                                  <span class="co">## the Museum.  Many thanks to both.  The images (with suitable reduction</span>
049240,000032:                                                                                                  <span class="co">## in storage size and consequent reduction in image quality as well) are</span>
049241,000033:                                                                                                  <span class="co">## available online at www.ibiblio.org/apollo.  If for some reason you</span>
049242,000034:                                                                                                  <span class="co">## find that the images are illegible, contact me at info@sandroid.org</span>
049243,000035:                                                                                                  <span class="co">## about getting access to the (much) higher-quality images which Paul</span>
049244,000036:                                                                                                  <span class="co">## actually created.</span>
049245,000037:                                                                                                  <span class="co">##</span>
049246,000038:                                                                                                  <span class="co">## The code has been modified to match LMY99 Revision 0, otherwise</span>
049247,000039:                                                                                                  <span class="co">## known as Luminary Revision 99, the Apollo 11 software release preceeding</span>
049248,000040:                                                                                                  <span class="co">## the listing from which it was transcribed. It has been verified to</span>
049249,000041:                                                                                                  <span class="co">## contain the same bank checksums as AGC developer Allan Klumpp's listing</span>
049250,000042:                                                                                                  <span class="co">## of Luminary Revision 99 (for which we do not have scans).</span>
049251,000043:                                                                                                  <span class="co">##</span>
049252,000044:                                                                                                  <span class="co">## Notations on Allan Klumpp's listing read, in part:</span>
049253,000045:                                                                                                  <span class="co">##</span>
049254,000046:                                                                                                  <span class="co">##      ASSEMBLE REVISION 099 OF AGC PROGRAM LUMINARY BY NASA 2021112-51</span>
049255,000047: 
</pre>
</span>
</p>
<table style="text-align: left;" border="1" cellpadding="2" cellspacing="2">
<tbody>
<tr>
<td style="white-space: nowrap; vertical-align: middle;">
<img alt="" src="Apollo32.png" style="width: 32px; height: 32px;" align="left">
</td>
<td style="vertical-align: middle;">
Page 1133
</td></tr></tbody></table>
<p class="nobreak">
<span style="font-family: monospace;">
<pre>
049257,000049:                                                                                                  <span class="co">#  SUBROUTINE TO CONVERT RAD VECTOR AT GIVEN TIME TO LAT,LONG AND ALT</span>
049258,000050: 
049259,000051:                                                                                                  <span class="co">#  CALLING SEQUENCE</span>
049260,000052:                                                                                                  <span class="co">#        L-1     CALL</span>
049261,000053:                                                                                                  <span class="co">#        L               LAT-LONG</span>
049262,000054: 
049263,000055:                                                                                                  <span class="co">#  SUBROUTINES USED</span>
049264,000056:                                                                                                  <span class="co">#        R-TO-RP, ARCTAN, SETGAMMA, SETRE</span>
049265,000057: 
049266,000058:                                                                                                  <span class="co">#  ERASABLE INIT. REQ.</span>
049267,000059:                                                                                                  <span class="co">#        AXO, -AYO, AZO, TEPHEM (SET AT LAUNCH TIME)</span>
049268,000060:                                                                                                  <span class="co">#        ALPHAV = POSITION VECTOR METERS B-29</span>
049269,000061:                                                                                                  <span class="co">#        MPAC -- TIME (CSECS B-28)</span>
049270,000062:                                                                                                  <span class="co">#        ERADFLAG =1, TO COMPUTE EARTH RADIUS, =0 FOR FIXED EARTH RADIUS</span>
049271,000063:                                                                                                  <span class="co">#        LUNAFLAG=0 FOR EARTH, 1 FOR MOON</span>
049272,000064: 
049273,000065:                                                                                                  <span class="co">#  OUTPUT</span>
049274,000066:                                                                                                  <span class="co">#        LATITUDE IN LAT         (REVS. B-0)</span>
049275,000067:                                                                                                  <span class="co">#        LONGITUDE IN LONG       (REVS. B-0)</span>
049276,000068:                                                                                                  <span class="co">#        ALTITUDE IN ALT         METERS B-29</span>
049277,000069: 
049278,000070: 30,3775                                           <span class="ps">BANK    </span> 30                                    
049279,000071: 13,2000                                           <span class="ps">SETLOC  </span> <a href="TAGS_FOR_RELATIVE_SETLOC_AND_BLANK_BANK_CARDS.agc.html#4C41544C4F4E47">LATLONG</a>                               
049280,000072: 13,2000                                           <span class="ps">BANK    </span>                                       
049281,000073: 
049282,000074: 13,2351                                           <span class="ps">COUNT*  </span> $$/LT-LG                              
049283,000075: 13,2351  E4,1431                                  <span class="ps">EBANK=  </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#414C50484156">ALPHAV</a>                                
<a name="4C41542D4C4F4E47"></a>049284,000076: 13,2351           40220        <span class="sm">LAT-LONG</span>           <span class="in">STQ     </span> <span class="in">SETPD     </span>                            
049285,000077: 13,2352           03674                                    <a href="ERASABLE_ASSIGNMENTS.agc.html#494E434F52504558">INCORPEX</a>                              
049286,000078: 13,2353           00001                                    0D                                    
049287,000079: 13,2354           24007                           <span class="in">STOVL   </span> 6D                                    <span class="co">#  SAVE TIME IN 6-7D FOR R-TO-RP</span>
049288,000080: 13,2355           02032                                    <a href="ERASABLE_ASSIGNMENTS.agc.html#414C50484156">ALPHAV</a>                                
049289,000081: 13,2356           51406                           <span class="in">PUSH    </span> <span class="in">ABVAL     </span>                            <span class="co">#  0-5D= R FOR R-TO-RP</span>
049290,000082: 13,2357           16070                           <span class="in">STODL   </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#414C5048414D">ALPHAM</a>                                <span class="co">#  ABS. VALUE OF R FOR ALT FORMULA BELOW</span>
049291,000083: 13,2360           24007                                    <a href="INTERPRETIVE_CONSTANTS.agc.html#5A45524F564543">ZEROVEC</a>                               <span class="co">#  SET MPAC=0 FOR EARTH, NON-ZERO FOR MOON</span>
049292,000084: 13,2361           71414                           <span class="in">BOFF    </span> <span class="in">COS       </span>                            <span class="co">#  USE COS(0) TO GET NON-ZERO IN MPAC</span>
049293,000085: 13,2362           01743                                    <a href="FLAGWORD_ASSIGNMENTS.agc.html#4C554E41464C4147">LUNAFLAG</a>                              <span class="co">#  0=EARTH, 1=MOON</span>
049294,000086: 13,2363           26364                                    <a href="#43414C4C52545250">CALLRTRP</a>                              
<a name="43414C4C52545250"></a>049295,000087: 13,2364           77624        <span class="sm">CALLRTRP</span>           <span class="in">CALL    </span>                                       
049296,000088: 13,2365           51670                                    <a href="PLANETARY_INERTIAL_ORIENTATION.agc.html#522D544F2D5250">R-TO-RP</a>                               <span class="co">#  RP VECTOR CONVERTED FROM R B-29</span>
049297,000089: 13,2366           77656                           <span class="in">UNIT    </span>                                       <span class="co">#  UNIT RP B-1</span>
049298,000090: 13,2367           36032                           <span class="in">STCALL  </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#414C50484156">ALPHAV</a>                                <span class="co">#  U2= 1/2 SINL FOR SETRE SUBR BELOW</span>
049299,000091: 13,2370           26550                                    <a href="#53455447414D4D41">SETGAMMA</a>                              <span class="co">#        SET GAMMA=B2/A2 FOR EARTH, =1 FOR MOON</span>
049300,000092: 13,2371           77624                           <span class="in">CALL    </span>                                       <span class="co">#        SCALED B-1</span>
049301,000093: 13,2372           26560                                    <a href="#5345545245">SETRE</a>                                 <span class="co">#  CALC RE METERS B-29</span>
049302,000094: 13,2373           63545                           <span class="in">DLOAD   </span> <span class="in">DSQ       </span>                            
049303,000095: 13,2374           02032                                    <a href="ERASABLE_ASSIGNMENTS.agc.html#414C50484156">ALPHAV</a>                                
049304,000096: 13,2375           63525                           <span class="in">PDDL    </span> <span class="in">DSQ       </span>                            
049305,000097: 13,2376           02034                                    <a href="ERASABLE_ASSIGNMENTS.agc.html#414C50484156">ALPHAV</a>     +2                         
049306,000098: 13,2377           75415                           <span class="in">DAD     </span> <span class="in">SQRT      </span>                            
</pre>
</span>
</p>
<table style="text-align: left;" border="1" cellpadding="2" cellspacing="2">
<tbody>
<tr>
<td style="white-space: nowrap; vertical-align: middle;">
<img alt="" src="Apollo32.png" style="width: 32px; height: 32px;" align="left">
</td>
<td style="vertical-align: middle;">
Page 1134
</td></tr></tbody></table>
<p class="nobreak">
<span style="font-family: monospace;">
<pre>
049308,000100: 13,2400           76405                           <span class="in">DMP     </span> <span class="in">SL1R      </span>                            
049309,000101: 13,2401           00011                                    <a href="#47414D5250">GAMRP</a>                                 
049310,000102: 13,2402           14021                           <span class="in">STODL   </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#434F535448">COSTH</a>                                 <span class="co">#  COS(LAT) B-1</span>
049311,000103: 13,2403           02036                                    <a href="ERASABLE_ASSIGNMENTS.agc.html#414C50484156">ALPHAV</a>     +4                         
049312,000104: 13,2404           34023                           <span class="in">STCALL  </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#53494E5448">SINTH</a>                                 <span class="co">#  SIN(LAT) B-1</span>
049313,000105: 13,2405           26510                                    <a href="#41524354414E">ARCTAN</a>                                
049314,000106: 13,2406           15121                           <span class="in">STODL   </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#4C4154">LAT</a>                                   <span class="co">#  LAT B0</span>
049315,000107: 13,2407           02032                                    <a href="ERASABLE_ASSIGNMENTS.agc.html#414C50484156">ALPHAV</a>                                
049316,000108: 13,2410           14021                           <span class="in">STODL   </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#434F535448">COSTH</a>                                 <span class="co">#  COS(LONG) B-1</span>
049317,000109: 13,2411           02034                                    <a href="ERASABLE_ASSIGNMENTS.agc.html#414C50484156">ALPHAV</a>     +2                         
049318,000110: 13,2412           34023                           <span class="in">STCALL  </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#53494E5448">SINTH</a>                                 <span class="co">#  SIN(LONG) B-1</span>
049319,000111: 13,2413           26510                                    <a href="#41524354414E">ARCTAN</a>                                
049320,000112: 13,2414           15123                           <span class="in">STODL   </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#4C4F4E47">LONG</a>                                  <span class="co">#  LONG. REVS B-0 IN RANGE -1/2 TO 1/2</span>
049321,000113: 13,2415           02070                                    <a href="ERASABLE_ASSIGNMENTS.agc.html#414C5048414D">ALPHAM</a>                                
049322,000114: 13,2416           77625                           <span class="in">DSU     </span>                                       <span class="co">#  ALT= R-RE METERS B-29</span>
049323,000115: 13,2417           03673                                    <a href="ERASABLE_ASSIGNMENTS.agc.html#455241444D">ERADM</a>                                 
049324,000116: 13,2420           35125                           <span class="in">STCALL  </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#414C54">ALT</a>                                   <span class="co">#  EXIT WITH ALT METERS B-29</span>
049325,000117: 13,2421           03674                                    <a href="ERASABLE_ASSIGNMENTS.agc.html#494E434F52504558">INCORPEX</a>                              
</pre>
</span>
</p>
<table style="text-align: left;" border="1" cellpadding="2" cellspacing="2">
<tbody>
<tr>
<td style="white-space: nowrap; vertical-align: middle;">
<img alt="" src="Apollo32.png" style="width: 32px; height: 32px;" align="left">
</td>
<td style="vertical-align: middle;">
Page 1135
</td></tr></tbody></table>
<p class="nobreak">
<span style="font-family: monospace;">
<pre>
049327,000119:                                                                                                  <span class="co">#  SUBROUTINE TO CONVERT LAT,LONG,ALT AT GIVEN TIME TO RADIUS VECTOR</span>
049328,000120: 
049329,000121:                                                                                                  <span class="co">#  CALLING SEQUENCE</span>
049330,000122:                                                                                                  <span class="co">#        L-1     CALL</span>
049331,000123:                                                                                                  <span class="co">#        L               LALOTORV</span>
049332,000124: 
049333,000125:                                                                                                  <span class="co">#  SUBROUTINES USED</span>
049334,000126:                                                                                                  <span class="co">#        SETGAMMA, SETRE, RP-TO-R</span>
049335,000127: 
049336,000128:                                                                                                  <span class="co">#  ERASABLE INIT. REQ.</span>
049337,000129:                                                                                                  <span class="co">#        AXO, AYO, AZO, TEPHEM SET AT LAUNCH TIME</span>
049338,000130:                                                                                                  <span class="co">#        LAT -- LATITUDE         (REVS B0)</span>
049339,000131:                                                                                                  <span class="co">#        LONG -- LONGITUDE       (REVS B0)</span>
049340,000132:                                                                                                  <span class="co">#        ALT -- ALTITUDE         (METERS) B-29</span>
049341,000133:                                                                                                  <span class="co">#        MPAC -- TIME            (CSECS B-28)</span>
049342,000134:                                                                                                  <span class="co">#        ERADFLAG =1 TO COMPUTE EARTH RADIUS, =0 FOR FIXED EARTH RADIUS</span>
049343,000135:                                                                                                  <span class="co">#        LUNAFLAG=0 FOR EARTH, 1 FOR MOON</span>
049344,000136: 
049345,000137:                                                                                                  <span class="co">#  OUTPUT</span>
049346,000138:                                                                                                  <span class="co">#        R-VECTOR IN ALPHAV      (METERS B-29)</span>
049347,000139: 
<a name="4C414C4F544F5256"></a>049348,000140: 13,2422           40220        <span class="sm">LALOTORV</span>           <span class="in">STQ     </span> <span class="in">SETPD     </span>                            <span class="co">#  LAT,LONG,ALT TO R VECTOR</span>
049349,000141: 13,2423           03674                                    <a href="ERASABLE_ASSIGNMENTS.agc.html#494E434F52504558">INCORPEX</a>                              
049350,000142: 13,2424           00001                                    0D                                    
049351,000143: 13,2425           34007                           <span class="in">STCALL  </span> 6D                                    <span class="co">#  6-7D= TIME FOR RP-TO-R</span>
049352,000144: 13,2426           26550                                    <a href="#53455447414D4D41">SETGAMMA</a>                              <span class="co">#  GAMMA=B2/A2 FOR EARTH, 1 FOR MOON B-1</span>
049353,000145: 13,2427           73545                           <span class="in">DLOAD   </span> <span class="in">SIN       </span>                            <span class="co">#                COS(LONG)COS(LAT) IN MPAC</span>
049354,000146: 13,2430           01121                                    <a href="ERASABLE_ASSIGNMENTS.agc.html#4C4154">LAT</a>                                   <span class="co">#      UNIT RP = SIN(LONG)COS(LAT)    2-3D</span>
049355,000147: 13,2431           65275                           <span class="in">DMPR    </span> <span class="in">PDDL      </span>                            <span class="co">#  PD 2          GAMMA*SIN(LAT)       0-1D</span>
049356,000148: 13,2432           00011                                    <a href="#47414D5250">GAMRP</a>                                 
049357,000149: 13,2433           01121                                    <a href="ERASABLE_ASSIGNMENTS.agc.html#4C4154">LAT</a>                                   <span class="co">#         0-1D = GAMMA*SIN(LAT) B-2</span>
049358,000150: 13,2434           65346                           <span class="in">COS     </span> <span class="in">PDDL      </span>                            <span class="co">#  PD4    2-3D = COS(LAT) B-1 TEMPORARILY</span>
049359,000151: 13,2435           01123                                    <a href="ERASABLE_ASSIGNMENTS.agc.html#4C4F4E47">LONG</a>                                  
049360,000152: 13,2436           57356                           <span class="in">SIN     </span> <span class="in">DMPR      </span>                            <span class="co">#  PD 2</span>
049361,000153: 13,2437           71525                           <span class="in">PDDL    </span> <span class="in">COS       </span>                            <span class="co">#  PD 4   2-3D = SIN(LONG)COS(LAT) B-2</span>
049362,000154: 13,2440           01121                                    <a href="ERASABLE_ASSIGNMENTS.agc.html#4C4154">LAT</a>                                   
049363,000155: 13,2441           71525                           <span class="in">PDDL    </span> <span class="in">COS       </span>                            <span class="co">#  PD 6   4-5D = COS(LAT) B-1 TEMPORARILY</span>
049364,000156: 13,2442           01123                                    <a href="ERASABLE_ASSIGNMENTS.agc.html#4C4F4E47">LONG</a>                                  
049365,000157: 13,2443           55475                           <span class="in">DMPR    </span> <span class="in">VDEF      </span>                            <span class="co">#  PD 4   MPAC = COS(LONG)COS(LAT) B-2</span>
049366,000158: 13,2444           41456                           <span class="in">UNIT    </span> <span class="in">PUSH      </span>                            <span class="co">#  0-5D= UNIT RP FOR RP-TO-R SUBR.</span>
049367,000159: 13,2445           36032                           <span class="in">STCALL  </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#414C50484156">ALPHAV</a>                                <span class="co">#  ALPHAV +4= SINL FOR SETRE SUBR.</span>
049368,000160: 13,2446           26560                                    <a href="#5345545245">SETRE</a>                                 <span class="co">#  RE METERS B-29</span>
049369,000161: 13,2447           43145                           <span class="in">DLOAD   </span> <span class="in">BOFF      </span>                            <span class="co">#  SET MPAC=0 FOR EARTH, NON-ZERO FOR MOON</span>
049370,000162: 13,2450           24007                                    <a href="INTERPRETIVE_CONSTANTS.agc.html#5A45524F564543">ZEROVEC</a>                               
049371,000163: 13,2451           01743                                    <a href="FLAGWORD_ASSIGNMENTS.agc.html#4C554E41464C4147">LUNAFLAG</a>                              
049372,000164: 13,2452           26454                                    <a href="#43414C4C52505254">CALLRPRT</a>                              
049373,000165: 13,2453           77746                           <span class="in">COS     </span>                                       <span class="co">#  USE COS(0) TO GET NON-ZERO IN MPAC</span>
<a name="43414C4C52505254"></a>049374,000166: 13,2454           77624        <span class="sm">CALLRPRT</span>           <span class="in">CALL    </span>                                       
049375,000167: 13,2455           55716                                    <a href="PLANETARY_INERTIAL_ORIENTATION.agc.html#52502D544F2D52">RP-TO-R</a>                               <span class="co">#  EXIT WITH UNIT R VECTOR IN MPAC</span>
049376,000168: 13,2456           16032                           <span class="in">STODL   </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#414C50484156">ALPHAV</a>                                
049377,000169: 13,2457           03673                                    <a href="ERASABLE_ASSIGNMENTS.agc.html#455241444D">ERADM</a>                                 
</pre>
</span>
</p>
<table style="text-align: left;" border="1" cellpadding="2" cellspacing="2">
<tbody>
<tr>
<td style="white-space: nowrap; vertical-align: middle;">
<img alt="" src="Apollo32.png" style="width: 32px; height: 32px;" align="left">
</td>
<td style="vertical-align: middle;">
Page 1136
</td></tr></tbody></table>
<p class="nobreak">
<span style="font-family: monospace;">
<pre>
049379,000171: 13,2460           74215                           <span class="in">DAD     </span> <span class="in">VXSC      </span>                            <span class="co">#  (RE + ALT)(UNIT R) METERS B-30</span>
049380,000172: 13,2461           01125                                    <a href="ERASABLE_ASSIGNMENTS.agc.html#414C54">ALT</a>                                   
049381,000173: 13,2462           02032                                    <a href="ERASABLE_ASSIGNMENTS.agc.html#414C50484156">ALPHAV</a>                                
049382,000174: 13,2463           77772                           <span class="in">VSL1    </span>                                       <span class="co">#  R METERS B-29</span>
049383,000175: 13,2464           36032                           <span class="in">STCALL  </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#414C50484156">ALPHAV</a>                                <span class="co">#  EXIT WITH R IN METERS B-29</span>
049384,000176: 13,2465           03674                                    <a href="ERASABLE_ASSIGNMENTS.agc.html#494E434F52504558">INCORPEX</a>                              
049385,000177: 
049386,000178:                                                                                                  <span class="co">#  SUBROUTINE TO COMPUTE EARTH RADIUS</span>
049387,000179: 
049388,000180:                                                                                                  <span class="co">#  INPUT</span>
049389,000181:                                                                                                  <span class="co">#        1/2 SIN LAT IN ALPHAV +4</span>
049390,000182: 
049391,000183:                                                                                                  <span class="co">#  OUTPUT</span>
049392,000184:                                                                                                  <span class="co">#        EARTH RADIUS IN ERADM AND MPAC (METERS B-29)</span>
049393,000185: 
<a name="47455445524144"></a>049394,000186: 13,2466           63545        <span class="sm">GETERAD </span>           <span class="in">DLOAD   </span> <span class="in">DSQ       </span>                            
049395,000187: 13,2467           02036                                    <a href="ERASABLE_ASSIGNMENTS.agc.html#414C50484156">ALPHAV</a>     +4                         <span class="co">#  SIN**2(L)</span>
049396,000188: 13,2470           44352                           <span class="in">SL1     </span> <span class="in">BDSU      </span>                            
049397,000189: 13,2471           24005                                    <a href="#4450312F32">DP1/2</a>                                 <span class="co">#  COS**2(L)</span>
049398,000190: 13,2472           44275                           <span class="in">DMPR    </span> <span class="in">BDSU      </span>                            
049399,000191: 13,2473           26507                                    <a href="#4545">EE</a>                                    
049400,000192: 13,2474           24005                                    <a href="#4450312F32">DP1/2</a>                                 
049401,000193: 13,2475           75465                           <span class="in">BDDV    </span> <span class="in">SQRT      </span>                            
049402,000194: 13,2476           26503                                    <a href="#4232585343">B2XSC</a>                                 
049403,000195: 13,2477           77622                           <span class="in">SR4R    </span>                                       
049404,000196: 13,2500           03673                           <span class="in">STORE   </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#455241444D">ERADM</a>                                 
049405,000197: 13,2501           77616                           <span class="in">RVQ     </span>                                       
049406,000198: 
049407,000199:                                                                                                  <span class="co">#  THE FOLLOWING CONSTANTS WERE COMPUTED WITH A=6378166, B=6356784 METERS</span>
049408,000200:                                                                                                  <span class="co">#  B2XSC = B**2 SCALED B-51</span>
049409,000201:                                                                                                  <span class="co">#  B2/A2 = B**2/A**2 SCALED B-1</span>
049410,000202:                                                                                                  <span class="co">#  EE = (1-B**2/A**2) SCALED B-0</span>
049411,000203: 
<a name="4232585343"></a>049412,000204: 13,2502           00446 00305  <span class="sm">B2XSC   </span>           <span class="ps">2DEC    </span> .0179450689                            <span class="co">#  B**2 SCALED B-51</span>
<a name="4450312F32"></a>049413,000205: 13,2504  12,2004               <span class="sm">DP1/2   </span>           <span class="ps">=       </span> <a href="INTERPRETIVE_CONSTANTS.agc.html#58554E4954">XUNIT</a>                                 
<a name="42322F4132"></a>049414,000206: 13,2504           17711 05254  <span class="sm">B2/A2   </span>           <span class="ps">2DEC    </span> .9933064884 B-1                        <span class="co">#  GAMMA= B**2/A**2 B-1</span>
<a name="4545"></a>049415,000207: 13,2506           00155 25250  <span class="sm">EE      </span>           <span class="ps">2DEC    </span> 6.6935116  E-3                        <span class="co">#  (1-B**2/A**2) B-0</span>
049416,000208: 
</pre>
</span>
</p>
<table style="text-align: left;" border="1" cellpadding="2" cellspacing="2">
<tbody>
<tr>
<td style="white-space: nowrap; vertical-align: middle;">
<img alt="" src="Apollo32.png" style="width: 32px; height: 32px;" align="left">
</td>
<td style="vertical-align: middle;">
Page 1137
</td></tr></tbody></table>
<p class="nobreak">
<span style="font-family: monospace;">
<pre>
049418,000210:                                                                                                  <span class="co">#  ARCTAN SUBROUTINE</span>
049419,000211: 
049420,000212:                                                                                                  <span class="co">#  CALLING SEQUENCE</span>
049421,000213:                                                                                                  <span class="co">#        SIN THETA IN SINTH B-1</span>
049422,000214:                                                                                                  <span class="co">#        COS THETA IN COSTH B-1</span>
049423,000215:                                                                                                  <span class="co">#        CALL ARCTAN</span>
049424,000216: 
049425,000217:                                                                                                  <span class="co">#  OUTPUT</span>
049426,000218:                                                                                                  <span class="co">#        ARCTAN THETA IN MPAC AND THETA B-0 IN RANGE -1/2 TO +1/2</span>
049427,000219: 
<a name="41524354414E"></a>049428,000220: 13,2510           77600        <span class="sm">ARCTAN  </span>           <span class="in">BOV     </span>                                       
049429,000221: 13,2511           26512                                    <a href="#434C524F56464C57">CLROVFLW</a>                              
<a name="434C524F56464C57"></a>049430,000222: 13,2512           63545        <span class="sm">CLROVFLW</span>           <span class="in">DLOAD   </span> <span class="in">DSQ       </span>                            
049431,000223: 13,2513           00023                                    <a href="ERASABLE_ASSIGNMENTS.agc.html#53494E5448">SINTH</a>                                 
049432,000224: 13,2514           63525                           <span class="in">PDDL    </span> <span class="in">DSQ       </span>                            
049433,000225: 13,2515           00021                                    <a href="ERASABLE_ASSIGNMENTS.agc.html#434F535448">COSTH</a>                                 
049434,000226: 13,2516           77615                           <span class="in">DAD     </span>                                       
049435,000227: 13,2517           75454                           <span class="in">BZE     </span> <span class="in">SQRT      </span>                            
049436,000228: 13,2520           26536                                    <a href="#41524354414E5858">ARCTANXX</a>                              <span class="co">#  ATAN=0/0  SET THETA=0</span>
049437,000229: 13,2521           40065                           <span class="in">BDDV    </span> <span class="in">BOV       </span>                            
049438,000230: 13,2522           00023                                    <a href="ERASABLE_ASSIGNMENTS.agc.html#53494E5448">SINTH</a>                                 
049439,000231: 13,2523           26543                                    <a href="#4154414E3D3930">ATAN=90</a>                               
049440,000232: 13,2524           67542                           <span class="in">SR1     </span> <span class="in">ASIN      </span>                            
049441,000233: 13,2525           00025                           <span class="in">STORE   </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#5448455441">THETA</a>                                 
049442,000234: 13,2526           50125                           <span class="in">PDDL    </span> <span class="in">BMN       </span>                            
049443,000235: 13,2527           00021                                    <a href="ERASABLE_ASSIGNMENTS.agc.html#434F535448">COSTH</a>                                 
049444,000236: 13,2530           26532                                    <a href="#4E4547434F53">NEGCOS</a>                                
049445,000237: 13,2531           43545                           <span class="in">DLOAD   </span> <span class="in">RVQ       </span>                            
<a name="4E4547434F53"></a>049446,000238: 13,2532           57545        <span class="sm">NEGCOS  </span>           <span class="in">DLOAD   </span> <span class="in">DCOMP     </span>                            
049447,000239: 13,2533           43244                           <span class="in">BPL     </span> <span class="in">DAD       </span>                            
049448,000240: 13,2534           26540                                    <a href="#4E45474F5554">NEGOUT</a>                                
049449,000241: 13,2535           24005                                    <a href="#4450312F32">DP1/2</a>                                 
<a name="41524354414E5858"></a>049450,000242: 13,2536           00025        <span class="sm">ARCTANXX</span>           <span class="in">STORE   </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#5448455441">THETA</a>                                 
049451,000243: 13,2537           77616                           <span class="in">RVQ     </span>                                       
049452,000244: 
<a name="4E45474F5554"></a>049453,000245: 13,2540           52025        <span class="sm">NEGOUT  </span>           <span class="in">DSU     </span> <span class="in">GOTO      </span>                            
049454,000246: 13,2541           24005                                    <a href="#4450312F32">DP1/2</a>                                 
049455,000247: 13,2542           26536                                    <a href="#41524354414E5858">ARCTANXX</a>                              
<a name="4154414E3D3930"></a>049456,000248: 13,2543           75345        <span class="sm">ATAN=90 </span>           <span class="in">DLOAD   </span> <span class="in">SIGN      </span>                            
049457,000249: 13,2544           11037                                    <a href="TAGS_FOR_RELATIVE_SETLOC_AND_BLANK_BANK_CARDS.agc.html#4C4F4450312F34">LODP1/4</a>                               
049458,000250: 13,2545           00023                                    <a href="ERASABLE_ASSIGNMENTS.agc.html#53494E5448">SINTH</a>                                 
049459,000251: 13,2546           00025                           <span class="in">STORE   </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#5448455441">THETA</a>                                 
049460,000252: 13,2547           77616                           <span class="in">RVQ     </span>                                       
049461,000253: 
<a name="32445A45524F"></a>049462,000254: 13,2550  12,2006               <span class="sm">2DZERO  </span>           <span class="ps">=       </span> <a href="ORBITAL_INTEGRATION.agc.html#44505A45524F">DPZERO</a>                                
049463,000255: 
</pre>
</span>
</p>
<table style="text-align: left;" border="1" cellpadding="2" cellspacing="2">
<tbody>
<tr>
<td style="white-space: nowrap; vertical-align: middle;">
<img alt="" src="Apollo32.png" style="width: 32px; height: 32px;" align="left">
</td>
<td style="vertical-align: middle;">
Page 1138
</td></tr></tbody></table>
<p class="nobreak">
<span style="font-family: monospace;">
<pre>
049465,000257:                                                                                                  <span class="co">#  ..... SETGAMMA SUBROUTINE .....</span>
049466,000258:                                                                                                  <span class="co">#  SUBROUTINE TO SET GAMMA FOR THE LAT-LONG AND LALOTORV SUBROUTINES</span>
049467,000259: 
049468,000260:                                                                                                  <span class="co">#  GAMMA = B**2/A**2 FOR EARTH (B-1)</span>
049469,000261:                                                                                                  <span class="co">#  GAMMA = 1 FOR MOON (B-1)</span>
049470,000262: 
049471,000263:                                                                                                  <span class="co">#  CALLING SEQUENCE</span>
049472,000264:                                                                                                  <span class="co">#        L       CALL</span>
049473,000265:                                                                                                  <span class="co">#        L+1             SETGAMMA</span>
049474,000266: 
049475,000267:                                                                                                  <span class="co">#  INPUT</span>
049476,000268:                                                                                                  <span class="co">#        LUNAFLAG=0 FOR EARTH, =1 FOR MOON</span>
049477,000269: 
049478,000270:                                                                                                  <span class="co">#  OUTPUT</span>
049479,000271:                                                                                                  <span class="co">#        GAMMA IN GAMRP (B-1)</span>
049480,000272: 
<a name="53455447414D4D41"></a>049481,000273: 13,2550           43145        <span class="sm">SETGAMMA</span>           <span class="in">DLOAD   </span> <span class="in">BOFF      </span>                            <span class="co">#  BRANCH FOR EARTH</span>
049482,000274: 13,2551           26505                                    <a href="#42322F4132">B2/A2</a>                                 <span class="co">#  EARTH GAMMA</span>
049483,000275: 13,2552           01743                                    <a href="FLAGWORD_ASSIGNMENTS.agc.html#4C554E41464C4147">LUNAFLAG</a>                              
049484,000276: 13,2553           26556                                    <a href="#534554474D4558">SETGMEX</a>                               
049485,000277: 13,2554           77735                           <span class="in">SLOAD   </span>                                       
049486,000278: 13,2555           24005                                    <a href="PLANETARY_INERTIAL_ORIENTATION.agc.html#314231">1B1</a>                                   <span class="co">#  MOON GAMMA</span>
<a name="534554474D4558"></a>049487,000279: 13,2556           00011        <span class="sm">SETGMEX </span>           <span class="in">STORE   </span> <a href="#47414D5250">GAMRP</a>                                 
049488,000280: 13,2557           77616                           <span class="in">RVQ     </span>                                       
<a name="47414D5250"></a>049489,000281: 13,2560                        <span class="sm">GAMRP   </span>           <span class="ps">=       </span> 8D                                    
049490,000282: 
</pre>
</span>
</p>
<table style="text-align: left;" border="1" cellpadding="2" cellspacing="2">
<tbody>
<tr>
<td style="white-space: nowrap; vertical-align: middle;">
<img alt="" src="Apollo32.png" style="width: 32px; height: 32px;" align="left">
</td>
<td style="vertical-align: middle;">
Page 1139
</td></tr></tbody></table>
<p class="nobreak">
<span style="font-family: monospace;">
<pre>
049492,000284:                                                                                                  <span class="co">#  ..... SETRE SUBROUTINE .....</span>
049493,000285:                                                                                                  <span class="co">#  SUBROUTINE TO SET RE (EARTH OR MOON RADIUS)</span>
049494,000286: 
049495,000287:                                                                                                  <span class="co">#        RE = RM FOR MOON</span>
049496,000288:                                                                                                  <span class="co">#        RE = RREF FOR FIXED EARTH RADIUS OR COMPUTED RF FOR FISCHER ELLIPSOID</span>
049497,000289: 
049498,000290:                                                                                                  <span class="co">#  CALLING SEQUENCE</span>
049499,000291:                                                                                                  <span class="co">#        L       CALL</span>
049500,000292:                                                                                                  <span class="co">#        L+1             SETRE</span>
049501,000293: 
049502,000294:                                                                                                  <span class="co">#  SUBROUTINES USED</span>
049503,000295:                                                                                                  <span class="co">#        GETERAD</span>
049504,000296: 
049505,000297:                                                                                                  <span class="co">#  INPUT</span>
049506,000298:                                                                                                  <span class="co">#        ERADFLAG = 0 FOR FIXED RE, 1 FOR COMPUTED RE</span>
049507,000299:                                                                                                  <span class="co">#        ALPHAV +4 = 1/2 SINL IF GETERAD IS CALLED</span>
049508,000300:                                                                                                  <span class="co">#        LUNAFLAG = 0 FOR EARTH, =1 FOR MOON</span>
049509,000301: 
049510,000302:                                                                                                  <span class="co">#  OUTPUT</span>
049511,000303:                                                                                                  <span class="co">#        ERADM = 504RM FOR MOON (METERS B-29)</span>
049512,000304:                                                                                                  <span class="co">#        ERADM = ERAD OR COMPUTED RF FOR EARTH (METERS B-29)</span>
049513,000305: 
<a name="5345545245"></a>049514,000306: 13,2560           71220        <span class="sm">SETRE   </span>           <span class="in">STQ     </span> <span class="in">DLOAD     </span>                            
049515,000307: 13,2561           00051                                    <a href="#534554524558">SETREX</a>                                
049516,000308: 13,2562           10003                                    <a href="CONTROLLED_CONSTANTS.agc.html#353034524D">504RM</a>                                 
049517,000309: 13,2563           71214                           <span class="in">BON     </span> <span class="in">DLOAD     </span>                            <span class="co">#  BRANCH FOR MOON</span>
049518,000310: 13,2564           01703                                    <a href="FLAGWORD_ASSIGNMENTS.agc.html#4C554E41464C4147">LUNAFLAG</a>                              
049519,000311: 13,2565           26575                                    <a href="#545354524C53524D">TSTRLSRM</a>                              
049520,000312: 13,2566           10001                                    <a href="CONTROLLED_CONSTANTS.agc.html#45524144">ERAD</a>                                  
049521,000313: 13,2567           45014                           <span class="in">BOFF    </span> <span class="in">CALL      </span>                            <span class="co">#  ERADFLAG=0 FOR FIXED RE, 1 FOR COMPUTED</span>
049522,000314: 13,2570           00742                                    <a href="FLAGWORD_ASSIGNMENTS.agc.html#45524144464C4147">ERADFLAG</a>                              
049523,000315: 13,2571           26573                                    <a href="#534554525858">SETRXX</a>                                
049524,000316: 13,2572           26466                                    <a href="#47455445524144">GETERAD</a>                               
<a name="534554525858"></a>049525,000317: 13,2573           37673        <span class="sm">SETRXX  </span>           <span class="in">STCALL  </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#455241444D">ERADM</a>                                 <span class="co">#  EXIT WITH RE OR RM METERS B-29</span>
049526,000318: 13,2574           00051                                    <a href="#534554524558">SETREX</a>                                
<a name="545354524C53524D"></a>049527,000319: 13,2575           77214        <span class="sm">TSTRLSRM</span>           <span class="in">BON     </span> <span class="in">VLOAD     </span>                            <span class="co">#  ERADFLAG=0, SET R0=RLS</span>
049528,000320: 13,2576           00702                                    <a href="FLAGWORD_ASSIGNMENTS.agc.html#45524144464C4147">ERADFLAG</a>                              <span class="co">#          =1      R0=RM</span>
049529,000321: 13,2577           26573                                    <a href="#534554525858">SETRXX</a>                                
049530,000322: 13,2600           02023                                    <a href="ERASABLE_ASSIGNMENTS.agc.html#524C53">RLS</a>                                   
049531,000323: 13,2601           64446                           <span class="in">ABVAL   </span> <span class="in">SR2R      </span>                            <span class="co">#  SCALE FROM B-27 TO B-29</span>
049532,000324: 13,2602           77650                           <span class="in">GOTO    </span>                                       
049533,000325: 13,2603           26573                                    <a href="#534554525858">SETRXX</a>                                
<a name="534554524558"></a>049534,000326: 13,2604  0000051               <span class="sm">SETREX  </span>           <span class="ps">=       </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#5332">S2</a>                                    
049535,000327: 
049536,000328: 

End of include-file LATITUDE_LONGITUDE_SUBROUTINES.agc.  Parent file is <a href="MAIN.agc.html">MAIN.agc</a>
</pre>
</span>
</p>
</body>
</html>
