<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta content="text/html;charset=ISO-8859-1" http-equiv="Content-Type">
<title>Assembly listing generated by yaYUL</title>
<style type="text/css">
p.nobreak { white-space:nowrap; }
a { text-decoration:none; }
a:visited { COLOR: #000850; }
</style>
<style type="text/css">
.op{
font-weight: bold;
color: #993300;
}
</style>
<style type="text/css">
.dn{
color: #009900;
}
</style>
<style type="text/css">
.fe{
color: #FF0000;
}
</style>
<style type="text/css">
.in{
color: #FF6600;
}
</style>
<style type="text/css">
.ps{
color: #336600;
}
</style>
<style type="text/css">
.sm{
color: #0000FF;
}
</style>
<style type="text/css">
.wn{
color: #FF9900;
}
</style>
<style type="text/css">
.co{
font-style: italic;
color: #993399;
}
</style>
</head>
<body>
<p class="nobreak">
<span style="font-family: monospace;">
<pre>
<h1>Source Code</h1>
</pre>
</span>
</p>
<table style="text-align: left;" border="1" cellpadding="2" cellspacing="2">
<tbody>
<tr>
<td style="white-space: nowrap; vertical-align: middle;">
<img alt="" src="Apollo32.png" style="width: 32px; height: 32px;" align="left">
</td>
<td style="vertical-align: middle;">
These source-code files are part of a reconstructed copy of Comanche 051, the
original release of the Apollo 11 Command Module (CM) Apollo Guidance Computer
(AGC) software. 
<br><br>
The reconstruction began with source code of Comanche 055 previously transcribed
from a digitized copy of that program.  The code was then updated by undoing
changes related to the R-2 lunar potential model, using hints from program
comments and change-indicating asterisks in the Comanche 055 listing as a guide.
The reconstruction was verified by matching memory-bank checksums to those listed
in drawing 2021153D. Note that page numbers in the reconstructed code match those
on the Comanche 055 printout, although the added code would likely have changed page
numbers for a real Comanche 051 listing.
<br><br>
Comments from the original source code are prefixed with a single '#' symbol, 
whereas comments added later are prefixed by "##" or "###".  Report any errors 
noted by creating an 
issue report at <a href="https://github.com/rburkey2005/virtualagc/issues">the Virtual AGC
project's GitHub repository</a>.
</td></tr></tbody></table>

<p class="nobreak">
<span style="font-family: monospace;">
<pre>
040681,000002:                                                                                                  <span class="co">## Copyright:   Public domain.</span>
040682,000003:                                                                                                  <span class="co">## Filename:    S-BAND_ANTENNA_FOR_CM.agc</span>
040683,000004:                                                                                                  <span class="co">## Purpose:     A section of Comanche revision 051.</span>
040684,000005:                                                                                                  <span class="co">##              It is part of the reconstructed source code for the</span>
040685,000006:                                                                                                  <span class="co">##              original release of the flight software for the Command</span>
040686,000007:                                                                                                  <span class="co">##              Module's (CM) Apollo Guidance Computer (AGC) for Apollo 11.</span>
040687,000008:                                                                                                  <span class="co">##              The code has been recreated from a copy of Comanche 055. It</span>
040688,000009:                                                                                                  <span class="co">##              has been adapted such that the resulting bugger words</span>
040689,000010:                                                                                                  <span class="co">##              exactly match those specified for Comanche 51 in NASA drawing</span>
040690,000011:                                                                                                  <span class="co">##              2021153D, which gives relatively high confidence that the</span>
040691,000012:                                                                                                  <span class="co">##              reconstruction is correct.</span>
040692,000013:                                                                                                  <span class="co">## Reference:   pp. 934-935</span>
040693,000014:                                                                                                  <span class="co">## Assembler:   yaYUL</span>
040694,000015:                                                                                                  <span class="co">## Contact:     Ron Burkey &lt;info@sandroid.org>.</span>
040695,000016:                                                                                                  <span class="co">## Website:     www.ibiblio.org/apollo/index.html</span>
040696,000017:                                                                                                  <span class="co">## Mod history: 2019-07-30 MAS  Created from Comanche 55.</span>
040697,000018: 
</pre>
</span>
</p>
<table style="text-align: left;" border="1" cellpadding="2" cellspacing="2">
<tbody>
<tr>
<td style="white-space: nowrap; vertical-align: middle;">
<img alt="" src="Apollo32.png" style="width: 32px; height: 32px;" align="left">
</td>
<td style="vertical-align: middle;">
Page 934
</td></tr></tbody></table>
<p class="nobreak">
<span style="font-family: monospace;">
<pre>
040699,000020: 23,3205                                           <span class="ps">BANK    </span> 23                                    
040700,000021: 42,2000                                           <span class="ps">SETLOC  </span> <a href="TAGS_FOR_RELATIVE_SETLOC_AND_BLANK_BANK_CARDS.agc.html#5342414E44">SBAND</a>                                 
040701,000022: 42,2000                                           <span class="ps">BANK    </span>                                       
040702,000023: 
040703,000024: 42,3652                                           <span class="ps">COUNT*  </span> $$/R05                                
040704,000025: 42,3652  E4,1417                                  <span class="ps">EBANK=  </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#454D53414C54">EMSALT</a>                                
040705,000026: 
<a name="5342414E44414E54"></a>040706,000027: 42,3652           04662        <span class="sm">SBANDANT</span>           <span class="op">TC      </span> <a href="INTER-BANK_COMMUNICATION.agc.html#42414E4B43414C4C">BANKCALL</a>                              <span class="co">#  V 64 E GETS US HERE</span>
040707,000028: 42,3653           17653                           <span class="ps">CADR    </span> <a href="IMU_MODE_SWITCHING_ROUTINES.agc.html#523032424F5448">R02BOTH</a>                               <span class="co">#  CHECK IF IMU IS ON AND ALIGNED</span>
040708,000029: 42,3654           06006                           <span class="op">TC      </span> <a href="INTERPRETER.agc.html#494E5450524554">INTPRET</a>                               
040709,000030: 42,3655           45034                           <span class="in">RTB     </span> <span class="in">CALL      </span>                            
040710,000031: 42,3656           45510                                    <a href="RTB_OP_CODES.agc.html#4C4F414454494D45">LOADTIME</a>                              <span class="co">#  PICKUP CURRENT TIME SCALED B-28</span>
040711,000032: 42,3657           47477                                    <a href="POWERED_FLIGHT_SUBROUTINES.agc.html#43445554524947">CDUTRIG</a>                               <span class="co">#  COMPUTE SINES AND COSINES OF CDU ANGLES</span>
040712,000033: 42,3660           34041                           <span class="in">STCALL  </span> <a href="ORBITAL_INTEGRATION.agc.html#5444454331">TDEC1</a>                                 <span class="co">#  ADVANCE INTEGRATION TO TIME IN TDEC1</span>
040713,000034: 42,3661           27114                                    <a href="INTEGRATION_INITIALIZATION.agc.html#43534D434F4E4943">CSMCONIC</a>                              <span class="co">#  USING CONIC INTEGRATION</span>
040714,000035: 42,3662           46135                           <span class="in">SLOAD   </span> <span class="in">BHIZ      </span>                            <span class="co">#  ORIGIN OF REFERENCE INERTIAL SYSTEM IS</span>
040715,000036: 42,3663           00050                                    <a href="ERASABLE_ASSIGNMENTS.agc.html#5832">X2</a>                                    <span class="co">#  EARTH = 0, MOON = 2</span>
040716,000037: 42,3664           65677                                    <a href="#4549534F49">EISOI</a>                                 
040717,000038: 42,3665           77775                           <span class="in">VLOAD   </span>                                       
040718,000039: 42,3666           00001                                    <a href="ORBITAL_INTEGRATION.agc.html#52415454">RATT</a>                                  
040719,000040: 42,3667           00003                           <span class="in">STORE   </span> <a href="#52434D">RCM</a>                                   <span class="co">#  MOVE RATT TO PREVENT WIPEOUT</span>
040720,000041: 42,3670           45145                           <span class="in">DLOAD   </span> <span class="in">CALL      </span>                            <span class="co">#  MOON, PUSH ON</span>
040721,000042: 42,3671           00015                                    <a href="ORBITAL_INTEGRATION.agc.html#544154">TAT</a>                                   <span class="co">#  GET ORIGINAL TIME</span>
040722,000043: 42,3672           54115                                    <a href="LUNAR_AND_SOLAR_EPHEMERIDES_SUBROUTINES.agc.html#4C554E504F53">LUNPOS</a>                                <span class="co">#  COMPUTE POSITION VECTOR OF MOON</span>
040723,000044: 42,3673           57455                           <span class="in">VAD     </span> <span class="in">VCOMP     </span>                            <span class="co">#  R= -(REM+RCM) = NEG. OF S/C POS. VEC</span>
040724,000045: 42,3674           00003                                    <a href="#52434D">RCM</a>                                   
040725,000046: 42,3675           77650                           <span class="in">GOTO    </span>                                       
040726,000047: 42,3676           65701                                    <a href="#4549534F49">EISOI</a>      +2                         
<a name="4549534F49"></a>040727,000048: 42,3677           57575        <span class="sm">EISOI   </span>           <span class="in">VLOAD   </span> <span class="in">VCOMP     </span>                            <span class="co">#  EARTH, R= -RCM</span>
040728,000049: 42,3700           00001                                    <a href="ORBITAL_INTEGRATION.agc.html#52415454">RATT</a>                                  
040729,000050: 42,3701           64201                           <span class="in">SETPD   </span> <span class="in">MXV       </span>                            <span class="co">#  RCS TO STABLE MEMBER- B-1X B-29X B+1</span>
040730,000051: 42,3702           00003                                    2D                                    <span class="co">#  2D</span>
040731,000052: 42,3703           01736                                    <a href="ERASABLE_ASSIGNMENTS.agc.html#524546534D4D4154">REFSMMAT</a>                              <span class="co">#  STABLE MEMBER.  B-1X B-29X B+1= B-29</span>
040732,000053: 42,3704           65372                           <span class="in">VSL1    </span> <span class="in">PDDL      </span>                            <span class="co">#  8D</span>
040733,000054: 42,3705           15335                                    <a href="TAGS_FOR_RELATIVE_SETLOC_AND_BLANK_BANK_CARDS.agc.html#4849365A45524F53">HI6ZEROS</a>                              
040734,000055: 42,3706           24025                           <span class="in">STOVL   </span> <a href="#594157414E47">YAWANG</a>                                <span class="co">#  ZERO OUT YAWANG, SET UP FOR SMNB</span>
040735,000056: 42,3707           00003                                    <a href="#52434D">RCM</a>                                   <span class="co">#  TRANSFORMATION.  SM COORD.  SCALED B-29</span>
040736,000057: 42,3710           77624                           <span class="in">CALL    </span>                                       
040737,000058: 42,3711           47644                                    <a href="POWERED_FLIGHT_SUBROUTINES.agc.html#2A534D4E422A">*SMNB*</a>                                
040738,000059: 42,3712           00003                           <span class="in">STORE   </span> <a href="#52">R</a>                                     <span class="co">#  SAVE NAV. BASE COORDINATES</span>
040739,000060: 42,3713           63256                           <span class="in">UNIT    </span> <span class="in">PDVL      </span>                            <span class="co">#  14D</span>
040740,000061: 42,3714           00003                                    <a href="#52">R</a>                                     
040741,000062: 42,3715           72431                           <span class="in">VPROJ   </span> <span class="in">VSL2      </span>                            <span class="co">#  COMPUTE PROJECTION OF VECTOR INTO CM</span>
040742,000063: 42,3716           15327                                    <a href="TAGS_FOR_RELATIVE_SETLOC_AND_BLANK_BANK_CARDS.agc.html#4849554E49545A">HIUNITZ</a>                               <span class="co">#  XY-PLANE, R-(R.UZ)UZ</span>
040743,000064: 42,3717           40045                           <span class="in">BVSU    </span> <span class="in">BOV       </span>                            <span class="co">#  CLEAR OVERFLOW INDICATOR IF SET</span>
040744,000065: 42,3720           00003                                    <a href="#52">R</a>                                     
040745,000066: 42,3721           65722                                    <a href="#434F56434E56">COVCNV</a>                                
<a name="434F56434E56"></a>040746,000067: 42,3722           40056        <span class="sm">COVCNV  </span>           <span class="in">UNIT    </span> <span class="in">BOV       </span>                            <span class="co">#  TEST OVERFLOW FOR INDICATION OF NULL</span>
040747,000068: 42,3723           65737                                    <a href="#4E4F41444A555354">NOADJUST</a>                              <span class="co">#  VECTOR</span>
040748,000069: 42,3724           50206                           <span class="in">PUSH    </span> <span class="in">DOT       </span>                            <span class="co">#  20D</span>
</pre>
</span>
</p>
<table style="text-align: left;" border="1" cellpadding="2" cellspacing="2">
<tbody>
<tr>
<td style="white-space: nowrap; vertical-align: middle;">
<img alt="" src="Apollo32.png" style="width: 32px; height: 32px;" align="left">
</td>
<td style="vertical-align: middle;">
Page 935
</td></tr></tbody></table>
<p class="nobreak">
<span style="font-family: monospace;">
<pre>
040750,000071: 42,3725           15333                                    <a href="TAGS_FOR_RELATIVE_SETLOC_AND_BLANK_BANK_CARDS.agc.html#4849554E495458">HIUNITX</a>                               <span class="co">#  COMPUTE YAW ANGLE = ACOS (URP.UX)</span>
040751,000072: 42,3726           65552                           <span class="in">SL1     </span> <span class="in">ACOS      </span>                            <span class="co">#  REVOLUTIONS SCALED B0</span>
040752,000073: 42,3727           50315                           <span class="in">PDVL    </span> <span class="in">DOT       </span>                            <span class="co">#  22D YAWANG</span>
040753,000074: 42,3730           00017                                    <a href="#555250">URP</a>                                   
040754,000075: 42,3731           15331                                    <a href="TAGS_FOR_RELATIVE_SETLOC_AND_BLANK_BANK_CARDS.agc.html#4849554E495459">HIUNITY</a>                               <span class="co">#  COMPUTE FOLLOWING- URP.UY</span>
040755,000076: 42,3732           51152                           <span class="in">SL1     </span> <span class="in">BPL       </span>                            <span class="co">#  POSITIVE</span>
040756,000077: 42,3733           65737                                    <a href="#4E4F41444A555354">NOADJUST</a>                              <span class="co">#  YES, 0-180 DEGREES</span>
040757,000078: 42,3734           45345                           <span class="in">DLOAD   </span> <span class="in">DSU       </span>                            <span class="co">#  NO, 181-360 DEGREES 20D</span>
040758,000079: 42,3735           15343                                    <a href="INTERPRETIVE_CONSTANTS.agc.html#4450504F534D4158">DPPOSMAX</a>                              <span class="co">#  COMPUTE 2 PI MINUS YAW ANGLE</span>
040759,000080: 42,3736           77606                           <span class="in">PUSH    </span>                                       <span class="co">#  22D YAWANG</span>
<a name="4E4F41444A555354"></a>040760,000081: 42,3737           50375        <span class="sm">NOADJUST</span>           <span class="in">VLOAD   </span> <span class="in">DOT       </span>                            <span class="co">#  COMPUTE PITCH ANGLE</span>
040761,000082: 42,3740           00011                                    <a href="#5552">UR</a>                                    <span class="co">#  ACOS (UR.UZ) - PI/2</span>
040762,000083: 42,3741           15327                                    <a href="TAGS_FOR_RELATIVE_SETLOC_AND_BLANK_BANK_CARDS.agc.html#4849554E49545A">HIUNITZ</a>                               
040763,000084: 42,3742           65552                           <span class="in">SL1     </span> <span class="in">ACOS      </span>                            <span class="co">#  REVOLUTIONS B0</span>
040764,000085: 42,3743           77625                           <span class="in">DSU     </span>                                       
040765,000086: 42,3744           15325                                    <a href="TAGS_FOR_RELATIVE_SETLOC_AND_BLANK_BANK_CARDS.agc.html#48494450312F34">HIDP1/4</a>                               
040766,000087: 42,3745           16321                           <span class="in">STODL   </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#52484F5342">RHOSB</a>                                 
040767,000088: 42,3746           00025                                    <a href="#594157414E47">YAWANG</a>                                
040768,000089: 42,3747           02323                           <span class="in">STORE   </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#47414D4D415342">GAMMASB</a>                               <span class="co">#  PATCH FOR CHECKOUT</span>
040769,000090: 42,3750           77776                           <span class="in">EXIT    </span>                                       
040770,000091: 42,3751           31044                           <span class="op">CA      </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#4558545642414354">EXTVBACT</a>                              <span class="co">#  IS BIT 5 STILL ON</span>
040771,000092: 42,3752           75013                           <span class="op">MASK    </span> <a href="FIXED-FIXED_CONSTANT_POOL.agc.html#42495435">BIT5</a>                                  
040772,000093: 42,3753           00006                           <span class="op">EXTEND  </span>                                       
040773,000094: 42,3754           15534                           <span class="op">BZF     </span> <a href="DISPLAY_INTERFACE_ROUTINES.agc.html#454E44455854">ENDEXT</a>                                <span class="co">#  NO, WE HAVE BEEN ANSWERED</span>
040774,000095: 42,3755           33771                           <span class="op">CAF     </span> <a href="#5630364E3531">V06N51</a>                                <span class="co">#  DISPLAY ANGLES</span>
040775,000096: 42,3756           04662                           <span class="op">TC      </span> <a href="INTER-BANK_COMMUNICATION.agc.html#42414E4B43414C4C">BANKCALL</a>                              
040776,000097: 42,3757           20600                           <span class="ps">CADR    </span> <a href="DISPLAY_INTERFACE_ROUTINES.agc.html#474F4D41524B4652">GOMARKFR</a>                              
040777,000098: 42,3760           05625                           <span class="op">TC      </span> <a href="SERVICE_ROUTINES.agc.html#42354F4646">B5OFF</a>                                 <span class="co">#  TERMINATE</span>
040778,000099: 42,3761           05625                           <span class="op">TC      </span> <a href="SERVICE_ROUTINES.agc.html#42354F4646">B5OFF</a>                                 
040779,000100: 42,3762           05217                           <span class="op">TC      </span> <a href="EXECUTIVE.agc.html#454E444F464A4F42">ENDOFJOB</a>                              <span class="co">#  RECYCLE</span>
040780,000101: 42,3763           35015                           <span class="op">CAF     </span> <a href="FIXED-FIXED_CONSTANT_POOL.agc.html#42495433">BIT3</a>                                  <span class="co">#  IMMEDIATE RETURN</span>
040781,000102: 42,3764           05526                           <span class="op">TC      </span> <a href="DISPLAY_INTERFACE_ROUTINES.agc.html#424C414E4B4554">BLANKET</a>                               <span class="co">#  BLANK R3</span>
040782,000103: 42,3765           35017                           <span class="op">CAF     </span> <a href="FIXED-FIXED_CONSTANT_POOL.agc.html#42495431">BIT1</a>                                  <span class="co">#  DELAY MINIMUM TIME TO ALLOW DISPLAY IN</span>
040783,000104: 42,3766           04662                           <span class="op">TC      </span> <a href="INTER-BANK_COMMUNICATION.agc.html#42414E4B43414C4C">BANKCALL</a>                              
040784,000105: 42,3767           01732                           <span class="ps">CADR    </span> <a href="SERVICE_ROUTINES.agc.html#44454C41594A4F42">DELAYJOB</a>                              
040785,000106: 42,3770           13654                           <span class="op">TCF     </span> <a href="#5342414E44414E54">SBANDANT</a>   +2                         
<a name="5630364E3531"></a>040786,000107: 42,3771           01463        <span class="sm">V06N51  </span>           <span class="ps">VN      </span> 0651                                  
<a name="52434D"></a>040787,000108: 42,3772                        <span class="sm">RCM     </span>           <span class="ps">EQUALS  </span> 2D                                    
<a name="5552"></a>040788,000109: 42,3772                        <span class="sm">UR      </span>           <span class="ps">EQUALS  </span> 8D                                    
<a name="555250"></a>040789,000110: 42,3772                        <span class="sm">URP     </span>           <span class="ps">EQUALS  </span> 14D                                   
<a name="594157414E47"></a>040790,000111: 42,3772                        <span class="sm">YAWANG  </span>           <span class="ps">EQUALS  </span> 20D                                   
<a name="5049544348414E47"></a>040791,000112: 42,3772                        <span class="sm">PITCHANG</span>           <span class="ps">EQUALS  </span> 22D                                   
<a name="52"></a>040792,000113: 42,3772  0000002               <span class="sm">R       </span>           <span class="ps">EQUALS  </span> <a href="#52434D">RCM</a>                                   
040793,000114: 42,3772  30,2000                                  <span class="ps">SBANK=  </span> <a href="TAGS_FOR_RELATIVE_SETLOC_AND_BLANK_BANK_CARDS.agc.html#4C4F575355504552">LOWSUPER</a>                              
040794,000115: 

End of include-file S-BAND_ANTENNA_FOR_CM.agc.  Parent file is <a href="MAIN.agc.html">MAIN.agc</a>
</pre>
</span>
</p>
</body>
</html>
