<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta content="text/html;charset=ISO-8859-1" http-equiv="Content-Type">
<title>Assembly listing generated by yaYUL</title>
<style type="text/css">
p.nobreak { white-space:nowrap; }
a { text-decoration:none; }
a:visited { COLOR: #000850; }
</style>
<style type="text/css">
.op{
font-weight: bold;
color: #993300;
}
</style>
<style type="text/css">
.dn{
color: #009900;
}
</style>
<style type="text/css">
.fe{
color: #FF0000;
}
</style>
<style type="text/css">
.in{
color: #FF6600;
}
</style>
<style type="text/css">
.ps{
color: #336600;
}
</style>
<style type="text/css">
.sm{
color: #0000FF;
}
</style>
<style type="text/css">
.wn{
color: #FF9900;
}
</style>
<style type="text/css">
.co{
font-style: italic;
color: #993399;
}
</style>
</head>
<body>
<p class="nobreak">
<span style="font-family: monospace;">
<pre>
<h1>Source Code</h1>
</pre>
</span>
</p>
<table style="text-align: left;" border="1" cellpadding="2" cellspacing="2">
<tbody>
<tr>
<td style="white-space: nowrap; vertical-align: middle;">
<img alt="" src="Apollo32.png" style="width: 32px; height: 32px;" align="left">
</td>
<td style="vertical-align: middle;">
These source-code files were transcribed from scans made from Don Eyles's personal
copy of Luminary 069.  They were scanned at archive.org's Boston 
facility, and the scanning was sponsored by Onno Hommes.  The code was transcribed
from these scans by a team of volunteers who are referenced in the program 
comments.  Comments from the original source code are prefixed with a single '#' symbol, 
whereas comments added later are prefixed by "##" or "###".  In some cases, where
similar code blocks exist in previously-transcribed AGC programs (primarily
Luminary 99, from Apollo 11) those code blocks were used as a starting point and
then corrected to agree with the Luminary 69 scans.  The full scans are available
at <a href="http://www.archive.org/details/virtualagcproject/">the Virtual AGC
project's collection at archive.org</a>, while more-convenient reduced-size (but reduced-quality)
images are available at <a href="http://www.ibiblio.org/apollo/ScansForConversion/Luminary069/">
the main Virtual AGC website</a>.  Report any errors noted by creating an 
issue report at <a href="https://github.com/rburkey2005/virtualagc/issues">the Virtual AGC
project's GitHub repository</a>. Notations on the program listing read, in part:<br>
<br>
<pre>
	GAP:  ASSEMBLE REVISION 069 OF AGC PROGRAM LUMINARY BY NASA 2021112-011
	19:02 NOV. 25,1968
</pre>
Note that the date is the date of the printout, not the date of the program revision.
</td></tr></tbody></table>

<p class="nobreak">
<span style="font-family: monospace;">
<pre>
065508,000002:                                                                                                  <span class="co">## Copyright:   Public domain.</span>
065509,000003:                                                                                                  <span class="co">## Filename:    SPS_BACK-UP_RCS_CONTROL.agc</span>
065510,000004:                                                                                                  <span class="co">## Purpose:     The main source file for Luminary revision 069.</span>
065511,000005:                                                                                                  <span class="co">##              It is part of the source code for the original release</span>
065512,000006:                                                                                                  <span class="co">##              of the flight software for the Lunar Module's (LM) Apollo</span>
065513,000007:                                                                                                  <span class="co">##              Guidance Computer (AGC) for Apollo 10. The actual flown</span>
065514,000008:                                                                                                  <span class="co">##              version was Luminary 69 revision 2, which included a</span>
065515,000009:                                                                                                  <span class="co">##              newer lunar gravity model and only affected module 2.</span>
065516,000010:                                                                                                  <span class="co">##              This file is intended to be a faithful transcription, except</span>
065517,000011:                                                                                                  <span class="co">##              that the code format has been changed to conform to the</span>
065518,000012:                                                                                                  <span class="co">##              requirements of the yaYUL assembler rather than the</span>
065519,000013:                                                                                                  <span class="co">##              original YUL assembler.</span>
065520,000014:                                                                                                  <span class="co">## Reference:   pp. 1500-1502</span>
065521,000015:                                                                                                  <span class="co">## Assembler:   yaYUL</span>
065522,000016:                                                                                                  <span class="co">## Contact:     Ron Burkey &lt;info@sandroid.org>.</span>
065523,000017:                                                                                                  <span class="co">## Website:     www.ibiblio.org/apollo/index.html</span>
065524,000018:                                                                                                  <span class="co">## Mod history: 2016-12-13 MAS  Created from Luminary 99.</span>
065525,000019:                                                                                                  <span class="co">##              2016-12-18 MAS  Updated from comment-proofed Luminary 99 version.</span>
065526,000020:                                                                                                  <span class="co">##              2017-01-22 HG   Transcribed</span>
065527,000021:                                                                                                  <span class="co">##              2017-01-28 RSB  Proofed comment text using octopus/prooferComments</span>
065528,000022:                                                                                                  <span class="co">##                              and fixed errors found.</span>
065529,000023: 
</pre>
</span>
</p>
<table style="text-align: left;" border="1" cellpadding="2" cellspacing="2">
<tbody>
<tr>
<td style="white-space: nowrap; vertical-align: middle;">
<img alt="" src="Apollo32.png" style="width: 32px; height: 32px;" align="left">
</td>
<td style="vertical-align: middle;">
Page 1500
</td></tr></tbody></table>
<p class="nobreak">
<span style="font-family: monospace;">
<pre>
065531,000025:                                                                                                  <span class="co">#  PROGRAM NAME:  SPSRCS</span>
065532,000026: 
065533,000027:                                                                                                  <span class="co">#  AUTHOR:  EDGAR M. OSHIKA (AC ELECTRONICS)</span>
065534,000028: 
065535,000029:                                                                                                  <span class="co">#  MODIFIED:  TO RETURN TO ALL AXES VIA Q BY P. S. WEISSMAN, OCT 7, 1968</span>
065536,000030: 
065537,000031:                                                                                                  <span class="co">#  FUNCTIONAL DESCRIPTION:</span>
065538,000032: 
065539,000033:                                                                                                  <span class="co">#  THIS PROGRAM CONTROLS THE FIRING OF ALL RCS JETS IN THE DOCKED CONFIGURATION ACCORDING TO THE FOLLOWING PHASE</span>
065540,000034:                                                                                                  <span class="co">#  PLANE LOGIC.</span>
065541,000035: 
065542,000036:                                                                                                  <span class="co">#  1.  OUTER RATE LIMIT (SPSRCS)</span>
065543,000037: 
065544,000038:                                                                                                  <span class="co">#  IF MAGNITUDE OF EDOT IS GREATER THAN 1.73 DEG/SEC SET JET FIRING TIME, TJ, TO REDUCE RATE AND THEN RETURN TO</span>
065545,000039:                                                                                                  <span class="co">#  CALLING PROGRAM (REQUESTING 4 JETS FOR P-AXIS).</span>
065546,000040:                                                                                                  <span class="co">#  OTHERWISE, CONTINUE.</span>
065547,000041: 
065548,000042:                                                                                                  <span class="co">#  2.  RATE DEAD BAND TEST ( JTONTEST)</span>
065549,000043: 
065550,000044:                                                                                                  <span class="co">#  IF JETS ARE FIRING NEGATIVE AND RATE IS GREATER THAN -0.101 DEG/SEC, LEAVE JETS ON AND RETURN,</span>
065551,000045:                                                                                                  <span class="co">#  IF JETS ARE FIRING POSITIVE AND RATE IS LESS THAN +0.101 DEG/SEC, LEAVE JETS ON AND RETURN, OTHERWISE CONTINUE.</span>
065552,000046: 
065553,000047:                                                                                                  <span class="co">#  3.  COASTING TEST (SPSSTART)</span>
065554,000048: 
065555,000049:                                                                                                  <span class="co">#  IF STATE (E,EDOT) IS BELOW LINE  E + 4 X EDOT > -1.4 DEG  AND EDOT IS LESS THAN 1.30 DEG/SEC SET JET TIME POSI-</span>
065556,000050:                                                                                                  <span class="co">#  TIVE AND RETURN,</span>
065557,000051:                                                                                                  <span class="co">#  IF STATE IS ABOVE LINE E + 4 X EDOT > +1.4 DEG AND EDOT IS GREATER THAN -1.30 DEG/SEC, SET JET TIME NEGATIVE</span>
065558,000052:                                                                                                  <span class="co">#  AND RETURN,</span>
065559,000053:                                                                                                  <span class="co">#  OTHERWISE, SET JET TIME ZERO AND RETURN.</span>
065560,000054: 
065561,000055:                                                                                                  <span class="co">#  THE MINIMUM PULSE WIDTH OF THIS CONTROLLER IS DETERMINED BY THE REPETITION  RATE AT WHICH THIS ROUTINE IS CALLED</span>
065562,000056:                                                                                                  <span class="co">#  AND IS NOMINALLY 100 MS FOR ALL AXES IN DRIFTING FLIGHT.   DURING POWERED FLIGHT THE MINIMUM IS 100 MS FOR THE</span>
065563,000057:                                                                                                  <span class="co">#  P AXIS AND 200 MS FOR THE CONTROL OF THE U AND V AXES.</span>
065564,000058: 
065565,000059:                                                                                                  <span class="co">#  CALLING SEQUENCE:</span>
065566,000060: 
065567,000061:                                                                                                  <span class="co">#           TC     SPSRCS          FROM Q,R AXES RCS AUTOPILOT</span>
065568,000062:                                                                                                  <span class="co">#                      INHINT                  FROM P-AXIS RCS AUTOPILOT</span>
065569,000063:                                                                                                  <span class="co">#                      TC      IBNKCALL</span>
065570,000064:                                                                                                  <span class="co">#                      CADR    SPSRCS</span>
065571,000065: 
065572,000066: 
065573,000067:                                                                                                  <span class="co">#  EXIT:</span>
065574,000068: 
065575,000069:                                                                                                  <span class="co">#           TC     Q</span>
065576,000070:                                                                                                  <span class="co">#  ALARM/ABORT MODE:    NONE</span>
065577,000071: 
065578,000072:                                                                                                  <span class="co">#  SUBROUTINES CALLED:    NONE</span>
065579,000073: 
065580,000074:                                                                                                  <span class="co">#  INPUT:      E, EDOT</span>
065581,000075: 
</pre>
</span>
</p>
<table style="text-align: left;" border="1" cellpadding="2" cellspacing="2">
<tbody>
<tr>
<td style="white-space: nowrap; vertical-align: middle;">
<img alt="" src="Apollo32.png" style="width: 32px; height: 32px;" align="left">
</td>
<td style="vertical-align: middle;">
Page 1501
</td></tr></tbody></table>
<p class="nobreak">
<span style="font-family: monospace;">
<pre>
065583,000077:                                                                                                  <span class="co">#             TJP, TJV, TJU           TJ MUST NOT BE NEGATIVE ZERO</span>
065584,000078: 
065585,000079:                                                                                                  <span class="co">#  OUTPUT:    TJP, TJV, TJU</span>
065586,000080:                                                                                                  <span class="co">#             NUMBERT = 6,            WHEN RATE LIMITING P AXIS.</span>
065587,000081: 
065588,000082: 
065589,000083: 17,3700                                           <span class="ps">BANK    </span> 17                                    
065590,000084: 17,2000                                           <span class="ps">SETLOC  </span> <a href="TAGS_FOR_RELATIVE_SETLOC_AND_BLANK_BANK_CARDS.agc.html#4441505332">DAPS2</a>                                 
065591,000085: 17,2000                                           <span class="ps">BANK    </span>                                       
065592,000086: 
065593,000087: 17,3700                                           <span class="ps">COUNT*  </span> $$/DAPBU                              
065594,000088: 
065595,000089: 17,3700  E6,1525                                  <span class="ps">EBANK=  </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#544A55">TJU</a>                                   
<a name="535053524353"></a>065596,000090: 17,3700           31425        <span class="sm">SPSRCS  </span>           <span class="op">CA      </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#45444F54">EDOT</a>                                  
065597,000091: 17,3701           00006                           <span class="op">EXTEND  </span>                                       
065598,000092: 17,3702           74766                           <span class="op">MP      </span> <a href="#524154454C494D31">RATELIM1</a>                              <span class="co">#  OUTER RATE LIMIT = 1.73 DEG/SEC</span>
065599,000093: 17,3703           00006                           <span class="op">EXTEND  </span>                                       
065600,000094: 17,3704           13717                           <span class="op">BZF     </span> <a href="#4A544F4E54455354">JTONTEST</a>                              
065601,000095: 
065602,000096: 17,3705           54001                           <span class="op">TS      </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#4C">L</a>                                     
065603,000097: 17,3706           36241                           <span class="op">CA      </span> <a href="FIXED-FIXED_CONSTANT_POOL.agc.html#534958">SIX</a>                                   
065604,000098: 17,3707           55741                           <span class="op">TS      </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#4E554D42455254">NUMBERT</a>                               
065605,000099: 17,3710           10001                           <span class="op">CCS     </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#4C">L</a>                                     
065606,000100: 17,3711           13753                           <span class="op">TCF     </span> <a href="#4E45475448525354">NEGTHRST</a>                              
065607,000101: 17,3712           05677                           <span class="op">TC      </span> <a href="ALARM_AND_ABORT.agc.html#434353484F4C45">CCSHOLE</a>                               <span class="co">#  **TEMP ** FILL WITH A CONSTANT</span>
<a name="524154454C494D32"></a>065608,000102: 17,3713  17,3664               <span class="sm">RATELIM2</span>           <span class="ps">=       </span> <a href="TJET_LAW.agc.html#2E31415434">.1AT4</a>                                 <span class="co">#  = OCT 00632,  1.125 DEG/SEC</span>
<a name="504F535448525354"></a>065609,000103: 17,3713           34736        <span class="sm">POSTHRST</span>           <span class="op">CA      </span> <a href="FIXED-FIXED_CONSTANT_POOL.agc.html#48414C46">HALF</a>                                  
065610,000104: 
065611,000105: 17,3714           51476                           <span class="op">NDX     </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#41584953435452">AXISCTR</a>                               
065612,000106: 17,3715           55525                           <span class="op">TS      </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#544A55">TJU</a>                                   
065613,000107: 17,3716           00002                           <span class="op">TC      </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#51">Q</a>                                     
065614,000108: 
<a name="4A544F4E54455354"></a>065615,000109: 17,3717           51476        <span class="sm">JTONTEST</span>           <span class="op">NDX     </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#41584953435452">AXISCTR</a>                               
065616,000110: 17,3720           11525                           <span class="op">CCS     </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#544A55">TJU</a>                                   
065617,000111: 17,3721           13725                           <span class="op">TCF     </span> +4                                    
065618,000112: 17,3722           13737                           <span class="op">TCF     </span> <a href="#5350535354415254">SPSSTART</a>                              
065619,000113: 17,3723           31425                           <span class="op">CA      </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#45444F54">EDOT</a>                                  
065620,000114: 17,3724           13726                           <span class="op">TCF     </span> +2                                    
065621,000115: 
065622,000116: 17,3725           41425                 +4        <span class="op">CS      </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#45444F54">EDOT</a>                                  
065623,000117: 17,3726           22000                           <span class="op">LXCH    </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#41">A</a>                                     
065624,000118: 17,3727           40111                           <span class="op">CS      </span> <a href="FLAGWORD_ASSIGNMENTS.agc.html#444150424F4F4C53">DAPBOOLS</a>                              <span class="co">#  IF DRIFTBIT = 1, USE ZERO TARGET RATE</span>
065625,000119: 17,3730           74744                           <span class="op">MASK    </span> <a href="FLAGWORD_ASSIGNMENTS.agc.html#4452494654424954">DRIFTBIT</a>                              <span class="co">#  IF DRIFTBIT = 0, USE 0.10 RATE TARGET</span>
065626,000120: 17,3731           10000                           <span class="op">CCS     </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#41">A</a>                                     
065627,000121: 17,3732           34767                           <span class="op">CA      </span> <a href="#52415445444231">RATEDB1</a>                               
065628,000122: 17,3733           60001                           <span class="op">AD      </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#4C">L</a>                                     
065629,000123: 17,3734           00006                           <span class="op">EXTEND  </span>                                       
065630,000124: 17,3735           63737                           <span class="op">BZMF    </span> +2                                    
065631,000125: 17,3736           13716                           <span class="op">TCF     </span> <a href="#504F535448525354">POSTHRST</a>   +3                         
065632,000126: 
</pre>
</span>
</p>
<table style="text-align: left;" border="1" cellpadding="2" cellspacing="2">
<tbody>
<tr>
<td style="white-space: nowrap; vertical-align: middle;">
<img alt="" src="Apollo32.png" style="width: 32px; height: 32px;" align="left">
</td>
<td style="vertical-align: middle;">
Page 1502
</td></tr></tbody></table>
<p class="nobreak">
<span style="font-family: monospace;">
<pre>
<a name="5350535354415254"></a>065634,000128: 17,3737           31425        <span class="sm">SPSSTART</span>           <span class="op">CA      </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#45444F54">EDOT</a>                                  
065635,000129: 17,3740           61750                           <span class="op">AD      </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#45">E</a>                                     
065636,000130: 17,3741           00006                           <span class="op">EXTEND  </span>                                       
065637,000131: 17,3742           71411                           <span class="op">MP      </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#444B4442">DKDB</a>                                  <span class="co">#  PAD LOADED DEADBAND. FRESHSTART: 1.4 DEG</span>
065638,000132: 17,3743           00006                           <span class="op">EXTEND  </span>                                       
065639,000133: 17,3744           13761                           <span class="op">BZF     </span> <a href="#544A5A45524F">TJZERO</a>                                
065640,000134: 
065641,000135: 17,3745           00006                           <span class="op">EXTEND  </span>                                       
065642,000136: 17,3746           63755                           <span class="op">BZMF    </span> +7                                    
065643,000137: 17,3747           31425                           <span class="op">CA      </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#45444F54">EDOT</a>                                  
065644,000138: 17,3750           63664                           <span class="op">AD      </span> <a href="#524154454C494D32">RATELIM2</a>                              
065645,000139: 17,3751           00006                           <span class="op">EXTEND  </span>                                       
065646,000140: 17,3752           63761                           <span class="op">BZMF    </span> <a href="#544A5A45524F">TJZERO</a>                                
<a name="4E45475448525354"></a>065647,000141: 17,3753           44736        <span class="sm">NEGTHRST</span>           <span class="op">CS      </span> <a href="FIXED-FIXED_CONSTANT_POOL.agc.html#48414C46">HALF</a>                                  
065648,000142: 17,3754           13714                           <span class="op">TCF     </span> <a href="#504F535448525354">POSTHRST</a>   +1                         
065649,000143: 17,3755           43664                 +7        <span class="op">CS      </span> <a href="#524154454C494D32">RATELIM2</a>                              
065650,000144: 17,3756           61425                           <span class="op">AD      </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#45444F54">EDOT</a>                                  
065651,000145: 17,3757           00006                           <span class="op">EXTEND  </span>                                       
065652,000146: 17,3760           63713                           <span class="op">BZMF    </span> <a href="#504F535448525354">POSTHRST</a>                              
<a name="544A5A45524F"></a>065653,000147: 17,3761           34755        <span class="sm">TJZERO  </span>           <span class="op">CA      </span> <a href="FIXED-FIXED_CONSTANT_POOL.agc.html#5A45524F">ZERO</a>                                  
065654,000148: 17,3762           13714                           <span class="op">TCF     </span> <a href="#504F535448525354">POSTHRST</a>   +1                         
065655,000149: 
065656,000150: 
<a name="524154454C494D31"></a>065657,000151: 17,3763     4766               <span class="sm">RATELIM1</span>           <span class="ps">=       </span> <a href="FIXED-FIXED_CONSTANT_POOL.agc.html#43414C4C434F4445">CALLCODE</a>                              <span class="co">#  = 00032, CORRESPONDING TO 1.73 DEG/SEC</span>
<a name="52415445444231"></a>065658,000152: 17,3763     4767               <span class="sm">RATEDB1 </span>           <span class="ps">=       </span> <a href="FIXED-FIXED_CONSTANT_POOL.agc.html#544255494C444658">TBUILDFX</a>                              <span class="co">#   = 00045, CORRESPONDS TO 0.101 DEG/SEC</span>

End of include-file SPS_BACK-UP_RCS_CONTROL.agc.  Parent file is <a href="MAIN.agc.html">MAIN.agc</a>
</pre>
</span>
</p>
</body>
</html>
