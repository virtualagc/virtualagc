<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta content="text/html;charset=ISO-8859-1" http-equiv="Content-Type">
<title>Assembly listing generated by yaYUL</title>
<style type="text/css">
p.nobreak { white-space:nowrap; }
a { text-decoration:none; }
a:visited { COLOR: #000850; }
</style>
<style type="text/css">
.op{
font-weight: bold;
color: #993300;
}
</style>
<style type="text/css">
.dn{
color: #009900;
}
</style>
<style type="text/css">
.fe{
color: #FF0000;
}
</style>
<style type="text/css">
.in{
color: #FF6600;
}
</style>
<style type="text/css">
.ps{
color: #336600;
}
</style>
<style type="text/css">
.sm{
color: #0000FF;
}
</style>
<style type="text/css">
.wn{
color: #FF9900;
}
</style>
<style type="text/css">
.co{
font-style: italic;
color: #993399;
}
</style>
</head>
<body>
<p class="nobreak">
<span style="font-family: monospace;">
<pre>
<h1>Source Code</h1>
</pre>
</span>
</p>
<table style="text-align: left;" border="1" cellpadding="2" cellspacing="2">
<tbody>
<tr>
<td style="white-space: nowrap; vertical-align: middle;">
<img alt="" src="Apollo32.png" style="width: 32px; height: 32px;" align="left">
</td>
<td style="vertical-align: middle;">
These source-code files were transcribed from scans made from Don Eyles's personal
copy of Luminary 069.  They were scanned at archive.org's Boston 
facility, and the scanning was sponsored by Onno Hommes.  The code was transcribed
from these scans by a team of volunteers who are referenced in the program 
comments.  Comments from the original source code are prefixed with a single '#' symbol, 
whereas comments added later are prefixed by "##" or "###".  In some cases, where
similar code blocks exist in previously-transcribed AGC programs (primarily
Luminary 99, from Apollo 11) those code blocks were used as a starting point and
then corrected to agree with the Luminary 69 scans.  The full scans are available
at <a href="http://www.archive.org/details/virtualagcproject/">the Virtual AGC
project's collection at archive.org</a>, while more-convenient reduced-size (but reduced-quality)
images are available at <a href="http://www.ibiblio.org/apollo/ScansForConversion/Luminary069/">
the main Virtual AGC website</a>.  Report any errors noted by creating an 
issue report at <a href="https://github.com/rburkey2005/virtualagc/issues">the Virtual AGC
project's GitHub repository</a>. Notations on the program listing read, in part:<br>
<br>
<pre>
	GAP:  ASSEMBLE REVISION 069 OF AGC PROGRAM LUMINARY BY NASA 2021112-011
	19:02 NOV. 25,1968
</pre>
Note that the date is the date of the printout, not the date of the program revision.
</td></tr></tbody></table>

<p class="nobreak">
<span style="font-family: monospace;">
<pre>
029047,000002:                                                                                                  <span class="co">## Copyright:   Public domain.</span>
029048,000003:                                                                                                  <span class="co">## Filename:    GROUND_TRACKING_DETERMINATION_PROGRAM_-_P21.agc</span>
029049,000004:                                                                                                  <span class="co">## Purpose:     The main source file for Luminary revision 069.</span>
029050,000005:                                                                                                  <span class="co">##              It is part of the source code for the original release</span>
029051,000006:                                                                                                  <span class="co">##              of the flight software for the Lunar Module's (LM) Apollo</span>
029052,000007:                                                                                                  <span class="co">##              Guidance Computer (AGC) for Apollo 10. The actual flown</span>
029053,000008:                                                                                                  <span class="co">##              version was Luminary 69 revision 2, which included a</span>
029054,000009:                                                                                                  <span class="co">##              newer lunar gravity model and only affected module 2.</span>
029055,000010:                                                                                                  <span class="co">##              This file is intended to be a faithful transcription, except</span>
029056,000011:                                                                                                  <span class="co">##              that the code format has been changed to conform to the</span>
029057,000012:                                                                                                  <span class="co">##              requirements of the yaYUL assembler rather than the</span>
029058,000013:                                                                                                  <span class="co">##              original YUL assembler.</span>
029059,000014:                                                                                                  <span class="co">## Reference:   pp. 664-666</span>
029060,000015:                                                                                                  <span class="co">## Assembler:   yaYUL</span>
029061,000016:                                                                                                  <span class="co">## Contact:     Ron Burkey &lt;info@sandroid.org>.</span>
029062,000017:                                                                                                  <span class="co">## Website:     www.ibiblio.org/apollo/index.html</span>
029063,000018:                                                                                                  <span class="co">## Mod history: 2016-12-13 MAS  Created from Luminary 99.</span>
029064,000019:                                                                                                  <span class="co">##              2016-12-14 MAS  Updated from comment-proofed Luminary 99 version.</span>
029065,000020:                                                                                                  <span class="co">##              2016-12-15 RRB  Updated for Luminary 69.</span>
029066,000021:                                                                                                  <span class="co">##              2017-01-28 RSB  Proofed comment text using octopus/prooferComments</span>
029067,000022:                                                                                                  <span class="co">##                              but no errors found.</span>
029068,000023:                                                                                                  <span class="co">##              2017-03-15 RSB  Comment-text fixes identified in 5-way</span>
029069,000024:                                                                                                  <span class="co">##                              side-by-side diff of Luminary 69/99/116/131/210.</span>
029070,000025: 
</pre>
</span>
</p>
<table style="text-align: left;" border="1" cellpadding="2" cellspacing="2">
<tbody>
<tr>
<td style="white-space: nowrap; vertical-align: middle;">
<img alt="" src="Apollo32.png" style="width: 32px; height: 32px;" align="left">
</td>
<td style="vertical-align: middle;">
Page 664
</td></tr></tbody></table>
<p class="nobreak">
<span style="font-family: monospace;">
<pre>
029072,000027:                                                                                                  <span class="co">#  GROUND TRACKING DETERMINATION PROGRAM P21</span>
029073,000028:                                                                                                  <span class="co">#  PROGRAM DESCRIPTION</span>
029074,000029:                                                                                                  <span class="co">#  MOD NO - 1</span>
029075,000030:                                                                                                  <span class="co">#  MOD BY - N. M. NEVILLE</span>
029076,000031: 
029077,000032:                                                                                                  <span class="co">#  FUNCTIONAL DECRIPTION -</span>
029078,000033: 
029079,000034:                                                                                                  <span class="co">#  TO PROVIDE THE ASTRONAUT DETAILS OF THE LM OR CSM GROUND TRACK WITHOUT</span>
029080,000035:                                                                                                  <span class="co">#  THE NEED FOR GROUND COMMUNICATION (REQUESTED BY DSKY).</span>
029081,000036:                                                                                                  <span class="co">#  CALLING SEQUENCE -</span>
029082,000037: 
029083,000038:                                                                                                  <span class="co">#        ASTRONAUT REQUEST THROUGH DSKY V37E21E</span>
029084,000039:                                                                                                  <span class="co">#  SUBROUTINES CALLED -</span>
029085,000040: 
029086,000041:                                                                                                  <span class="co">#  GOPERF4</span>
029087,000042:                                                                                                  <span class="co">#  GOFLASH</span>
029088,000043:                                                                                                  <span class="co">#  THISPREC</span>
029089,000044:                                                                                                  <span class="co">#  OTHPREC</span>
029090,000045:                                                                                                  <span class="co">#  LAT-LONG</span>
029091,000046: 
029092,000047:                                                                                                  <span class="co">#  NORMAL EXIT MODES -</span>
029093,000048: 
029094,000049:                                                                                                  <span class="co">#  ASTRONAUT REQUEST TROUGH DSKY TO TERMINATE PROGRAM V34E</span>
029095,000050:                                                                                                  <span class="co">#  ALARM OR ABORT EXIT MODES -</span>
029096,000051: 
029097,000052:                                                                                                  <span class="co">#  NONE</span>
029098,000053:                                                                                                  <span class="co">#  OUTPUT -</span>
029099,000054: 
029100,000055:                                                                                                  <span class="co">#  OCTAL DISPLAY OF OPTION CODE AND VEHICLE WHOSE GROUND TRACK IS TO BE</span>
029101,000056:                                                                                                  <span class="co">#  COMPUTED</span>
029102,000057:                                                                                                  <span class="co">#        OPTION CODE     00002</span>
029103,000058:                                                                                                  <span class="co">#        THIS            00001</span>
029104,000059:                                                                                                  <span class="co">#        OTHER           00002</span>
029105,000060:                                                                                                  <span class="co">#  DECIMAL DISPLAY OF TIME TO BE INTEGRATED TO HOURS , MINUTES , SECONDS</span>
029106,000061:                                                                                                  <span class="co">#  DECIMAL DISPLAY OF LAT,LONG,ALT</span>
029107,000062: 
029108,000063:                                                                                                  <span class="co">#  ERASABLE INITIALIZATION REQUIRED</span>
029109,000064: 
029110,000065:                                                                                                  <span class="co">#  AX0           2DEC    4.652459653 E-5 RADIANS         %68-69 CONSTANTS"</span>
029111,000066: 
029112,000067:                                                                                                  <span class="co">#  -AY0          2DEC    2.147535898 E-5 RADIANS</span>
029113,000068: 
029114,000069:                                                                                                  <span class="co">#  AZ0           2DEC    .7753206164     REVOLUTIONS</span>
029115,000070:                                                                                                  <span class="co">#  FOR LUNAR ORBITS 504LM VECTOR IS NEEDED</span>
029116,000071: 
029117,000072:                                                                                                  <span class="co">#  504LM         2DEC    -2.700340600 E-5 RADIANS</span>
029118,000073: 
029119,000074:                                                                                                  <span class="co">#  504LM _2      2DEC    -7.514128400 E-4 RADIANS</span>
029120,000075: 
029121,000076:                                                                                                  <span class="co">#  504LM _4      2DEC    _2.553198641 E-4 RADIANS</span>
029122,000077: 
029123,000078:                                                                                                  <span class="co">#  NONE</span>
029124,000079:                                                                                                  <span class="co">#  DEBRIS</span>
</pre>
</span>
</p>
<table style="text-align: left;" border="1" cellpadding="2" cellspacing="2">
<tbody>
<tr>
<td style="white-space: nowrap; vertical-align: middle;">
<img alt="" src="Apollo32.png" style="width: 32px; height: 32px;" align="left">
</td>
<td style="vertical-align: middle;">
Page 665
</td></tr></tbody></table>
<p class="nobreak">
<span style="font-family: monospace;">
<pre>
029126,000081: 
029127,000082:                                                                                                  <span class="co">#  CENTRALS-A,Q,L</span>
029128,000083:                                                                                                  <span class="co">#  OTHER - THOSE USED BY THE ABOVE LISTED SUBROUTINES</span>
029129,000084:                                                                                                  <span class="co">#  SEE LEMPREC, LAT-LONG</span>
029130,000085: 
029131,000086: 35,2511  30,2000                                  <span class="ps">SBANK=  </span> <a href="TAGS_FOR_RELATIVE_SETLOC_AND_BLANK_BANK_CARDS.agc.html#4C4F575355504552">LOWSUPER</a>                              <span class="co">#  FOR LOW 2CADR'S.</span>
029132,000087: 
029133,000088: 33,2200                                           <span class="ps">BANK    </span> 33                                    
029134,000089: 24,2000                                           <span class="ps">SETLOC  </span> <a href="TAGS_FOR_RELATIVE_SETLOC_AND_BLANK_BANK_CARDS.agc.html#50323053">P20S</a>                                  
029135,000090: 24,2000                                           <span class="ps">BANK    </span>                                       
029136,000091: 
029137,000092: 24,3402  E7,1756                                  <span class="ps">EBANK=  </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#50323154494D45">P21TIME</a>                               
029138,000093: 24,3402                                           <span class="ps">COUNT*  </span> $$/<a href="ERASABLE_ASSIGNMENTS.agc.html#503231">P21</a>                                
<a name="50524F473231"></a>029139,000094: 24,3402           34753        <span class="sm">PROG21  </span>           <span class="op">CAF     </span> <a href="FIXED-FIXED_CONSTANT_POOL.agc.html#4F4E45">ONE</a>                                   
029140,000095: 24,3403           55145                           <span class="op">TS      </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#4F5054494F4E32">OPTION2</a>                               <span class="co">#  ASSUMED VEHICLE IS LM, R2 = 00001</span>
029141,000096: 24,3404           34752                           <span class="op">CAF     </span> <a href="FIXED-FIXED_CONSTANT_POOL.agc.html#42495432">BIT2</a>                                  <span class="co">#  OPTION 2</span>
029142,000097: 24,3405           04616                           <span class="op">TC      </span> <a href="INTER-BANK_COMMUNICATION.agc.html#42414E4B43414C4C">BANKCALL</a>                              
029143,000098: 24,3406           20506                           <span class="ps">CADR    </span> <a href="DISPLAY_INTERFACE_ROUTINES.agc.html#474F5045524634">GOPERF4</a>                               
029144,000099: 24,3407           06001                           <span class="op">TC      </span> <a href="FRESH_START_AND_RESTART.agc.html#474F544F504F4F48">GOTOPOOH</a>                              <span class="co">#  TERMINATE</span>
029145,000100: 24,3410           03412                           <span class="op">TC      </span> +2                                    <span class="co">#  PROCEED VALUE OF ASSUMED VEHICLE OK</span>
029146,000101: 24,3411           03404                           <span class="op">TC      </span> -5                                    <span class="co">#  R2 LOADED THROUGH DSKY</span>
<a name="50323150524F4731"></a>029147,000102: 24,3412           33503        <span class="sm">P21PROG1</span>           <span class="op">CAF     </span> <a href="#56364E3334">V6N34</a>                                 <span class="co">#  LOAD DESIRED TIME OF LAT-LONG.</span>
029148,000103: 24,3413           04616                           <span class="op">TC      </span> <a href="INTER-BANK_COMMUNICATION.agc.html#42414E4B43414C4C">BANKCALL</a>                              
029149,000104: 24,3414           20351                           <span class="ps">CADR    </span> <a href="DISPLAY_INTERFACE_ROUTINES.agc.html#474F464C415348">GOFLASH</a>                               
029150,000105: 24,3415           06001                           <span class="op">TC      </span> <a href="FRESH_START_AND_RESTART.agc.html#474F544F504F4F48">GOTOPOOH</a>                              <span class="co">#  TERM</span>
029151,000106: 24,3416           03420                           <span class="op">TC      </span> +2                                    <span class="co">#  PROCEED VALUES OK</span>
029152,000107: 24,3417           03412                           <span class="op">TC      </span> -5                                    <span class="co">#  TIME LOADED THROUGH DSKY</span>
029153,000108: 24,3420           06036                           <span class="op">TC      </span> <a href="INTERPRETER.agc.html#494E5450524554">INTPRET</a>                               
029154,000109: 24,3421           77745                           <span class="in">DLOAD   </span>                                       
029155,000110: 24,3422           01046                                    <a href="ERASABLE_ASSIGNMENTS.agc.html#44535054454D31">DSPTEM1</a>                               
029156,000111: 24,3423           03757                           <span class="in">STORE   </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#50323154494D45">P21TIME</a>                               
029157,000112: 24,3424           45335                           <span class="in">SLOAD   </span> <span class="in">DSU       </span>                            
029158,000113: 24,3425           01146                                    <a href="ERASABLE_ASSIGNMENTS.agc.html#4F5054494F4E32">OPTION2</a>                               
029159,000114: 24,3426           11501                                    <a href="#5032314F4E454E4E">P21ONENN</a>                              
029160,000115: 24,3427           71230                           <span class="in">BHIZ    </span> <span class="in">DLOAD     </span>                            
029161,000116: 24,3430           51443                                    <a href="#50323150524F4732">P21PROG2</a>                              <span class="co">#  VEHICLE TO BE INTEGRATED IS LEM</span>
029162,000117: 24,3431           03757                                    <a href="ERASABLE_ASSIGNMENTS.agc.html#50323154494D45">P21TIME</a>                               <span class="co">#  VEHICLE TO BE INTEGRATED IS CSM</span>
029163,000118: 24,3432           34041                           <span class="in">STCALL  </span> <a href="ORBITAL_INTEGRATION.agc.html#5444454331">TDEC1</a>                                 <span class="co">#  INTEGRATE TO TIME SPECIFIED IN TDEC</span>
029164,000119: 24,3433           27043                                    <a href="TAGS_FOR_RELATIVE_SETLOC_AND_BLANK_BANK_CARDS.agc.html#4F544850524543">OTHPREC</a>                               <span class="co">#  ADJUST UNITS FOR LAT-LONG ROUTINE</span>
<a name="50323150524F4741"></a>029165,000120: 24,3434           46135        <span class="sm">P21PROGA</span>           <span class="in">SLOAD   </span> <span class="in">BHIZ      </span>                            
029166,000121: 24,3435           00050                                    <a href="ERASABLE_ASSIGNMENTS.agc.html#5832">X2</a>                                    
029167,000122: 24,3436           51451                                    <a href="#50323150524F4733">P21PROG3</a>                              
029168,000123: 24,3437           43175                           <span class="in">VLOAD   </span> <span class="in">SETGO     </span>                            
029169,000124: 24,3440           00001                                    <a href="ORBITAL_INTEGRATION.agc.html#52415454">RATT</a>                                  
029170,000125: 24,3441           01423                                    <a href="FLAGWORD_ASSIGNMENTS.agc.html#4C554E41464C4147">LUNAFLAG</a>                              
029171,000126: 24,3442           51454                                    <a href="#50323150524F4734">P21PROG4</a>                              
<a name="50323150524F4732"></a>029172,000127: 24,3443           77745        <span class="sm">P21PROG2</span>           <span class="in">DLOAD   </span>                                       
029173,000128: 24,3444           03757                                    <a href="ERASABLE_ASSIGNMENTS.agc.html#50323154494D45">P21TIME</a>                               
029174,000129: 24,3445           34041                           <span class="in">STCALL  </span> <a href="ORBITAL_INTEGRATION.agc.html#5444454331">TDEC1</a>                                 
029175,000130: 24,3446           27057                                    <a href="TAGS_FOR_RELATIVE_SETLOC_AND_BLANK_BANK_CARDS.agc.html#5448495350524543">THISPREC</a>                              
029176,000131: 24,3447           77650                           <span class="in">GOTO    </span>                                       
</pre>
</span>
</p>
<table style="text-align: left;" border="1" cellpadding="2" cellspacing="2">
<tbody>
<tr>
<td style="white-space: nowrap; vertical-align: middle;">
<img alt="" src="Apollo32.png" style="width: 32px; height: 32px;" align="left">
</td>
<td style="vertical-align: middle;">
Page 666
</td></tr></tbody></table>
<p class="nobreak">
<span style="font-family: monospace;">
<pre>
029178,000133: 24,3450           51434                                    <a href="#50323150524F4741">P21PROGA</a>                              
<a name="50323150524F4733"></a>029179,000134: 24,3451           43175        <span class="sm">P21PROG3</span>           <span class="in">VLOAD   </span> <span class="in">CLEAR     </span>                            
029180,000135: 24,3452           00001                                    <a href="ORBITAL_INTEGRATION.agc.html#52415454">RATT</a>                                  
029181,000136: 24,3453           01663                                    <a href="FLAGWORD_ASSIGNMENTS.agc.html#4C554E41464C4147">LUNAFLAG</a>                              
<a name="50323150524F4734"></a>029182,000137: 24,3454           16032        <span class="sm">P21PROG4</span>           <span class="in">STODL   </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#414C50484156">ALPHAV</a>                                
029183,000138: 24,3455           00015                                    <a href="ORBITAL_INTEGRATION.agc.html#544154">TAT</a>                                   
029184,000139: 24,3456           45014                           <span class="in">CLEAR   </span> <span class="in">CALL      </span>                            
029185,000140: 24,3457           00662                                    <a href="FLAGWORD_ASSIGNMENTS.agc.html#45524144464C4147">ERADFLAG</a>                              
029186,000141: 24,3460           26351                                    <a href="LATITUDE_LONGITUDE_SUBROUTINES.agc.html#4C41542D4C4F4E47">LAT-LONG</a>                              
029187,000142: 24,3461           77776                           <span class="in">EXIT    </span>                                       
029188,000143: 24,3462           33502                           <span class="op">CAF     </span> <a href="#5630364E3433">V06N43</a>                                <span class="co">#  DISPLAY LAT,LONG,ALT</span>
029189,000144: 24,3463           04616                           <span class="op">TC      </span> <a href="INTER-BANK_COMMUNICATION.agc.html#42414E4B43414C4C">BANKCALL</a>                              <span class="co">#  LAT,LONG = 1/2 REVS B0</span>
029190,000145: 24,3464           20351                           <span class="ps">CADR    </span> <a href="DISPLAY_INTERFACE_ROUTINES.agc.html#474F464C415348">GOFLASH</a>                               <span class="co">#  ALT = KM B14</span>
029191,000146: 24,3465           06001                           <span class="op">TC      </span> <a href="FRESH_START_AND_RESTART.agc.html#474F544F504F4F48">GOTOPOOH</a>                              <span class="co">#  TERM</span>
029192,000147: 24,3466           06001                           <span class="op">TC      </span> <a href="FRESH_START_AND_RESTART.agc.html#474F544F504F4F48">GOTOPOOH</a>                              
029193,000148: 24,3467           06036                           <span class="op">TC      </span> <a href="INTERPRETER.agc.html#494E5450524554">INTPRET</a>                               <span class="co">#  V32E RECYCLE</span>
029194,000149: 24,3470           43345                           <span class="in">DLOAD   </span> <span class="in">DAD       </span>                            
029195,000150: 24,3471           03757                                    <a href="ERASABLE_ASSIGNMENTS.agc.html#50323154494D45">P21TIME</a>                               
029196,000151: 24,3472           11477                                    <a href="#363030534543">600SEC</a>                                <span class="co">#  600 SECONDS OR 10 MIN</span>
029197,000152: 24,3473           01046                           <span class="in">STORE   </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#44535054454D31">DSPTEM1</a>                               
029198,000153: 24,3474           77634                           <span class="in">RTB     </span>                                       
029199,000154: 24,3475           51412                                    <a href="#50323150524F4731">P21PROG1</a>                              
<a name="363030534543"></a>029200,000155: 24,3476           00003 25140  <span class="sm">600SEC  </span>           <span class="ps">2DEC    </span> 60000      B-28                       <span class="co">#  10 MIN</span>
029201,000156: 
<a name="5032314F4E454E4E"></a>029202,000157: 24,3500           00001        <span class="sm">P21ONENN</span>           <span class="ps">OCT     </span> 00001                                 <span class="co">#  NEEDED TO DETERMINE VEHICLE</span>
029203,000158: 24,3501           00000                           <span class="ps">OCT     </span> 00000                                 <span class="co">#  TO BE INTEGRATED</span>
<a name="5630364E3433"></a>029204,000159: 24,3502           01453        <span class="sm">V06N43  </span>           <span class="ps">VN      </span> 00643                                 
<a name="56364E3334"></a>029205,000160: 24,3503           01442        <span class="sm">V6N34   </span>           <span class="ps">VN      </span> 00634                                 
029206,000161: 
029207,000162: 

End of include-file GROUND_TRACKING_DETERMINATION_PROGRAM_-_P21.agc.  Parent file is <a href="MAIN.agc.html">MAIN.agc</a>
</pre>
</span>
</p>
</body>
</html>
