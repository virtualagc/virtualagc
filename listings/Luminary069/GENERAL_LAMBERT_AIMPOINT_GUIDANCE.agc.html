<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta content="text/html;charset=ISO-8859-1" http-equiv="Content-Type">
<title>Assembly listing generated by yaYUL</title>
<style type="text/css">
p.nobreak { white-space:nowrap; }
a { text-decoration:none; }
a:visited { COLOR: #000850; }
</style>
<style type="text/css">
.op{
font-weight: bold;
color: #993300;
}
</style>
<style type="text/css">
.dn{
color: #009900;
}
</style>
<style type="text/css">
.fe{
color: #FF0000;
}
</style>
<style type="text/css">
.in{
color: #FF6600;
}
</style>
<style type="text/css">
.ps{
color: #336600;
}
</style>
<style type="text/css">
.sm{
color: #0000FF;
}
</style>
<style type="text/css">
.wn{
color: #FF9900;
}
</style>
<style type="text/css">
.co{
font-style: italic;
color: #993399;
}
</style>
</head>
<body>
<p class="nobreak">
<span style="font-family: monospace;">
<pre>
<h1>Source Code</h1>
</pre>
</span>
</p>
<table style="text-align: left;" border="1" cellpadding="2" cellspacing="2">
<tbody>
<tr>
<td style="white-space: nowrap; vertical-align: middle;">
<img alt="" src="Apollo32.png" style="width: 32px; height: 32px;" align="left">
</td>
<td style="vertical-align: middle;">
These source-code files were transcribed from scans made from Don Eyles's personal
copy of Luminary 069.  They were scanned at archive.org's Boston 
facility, and the scanning was sponsored by Onno Hommes.  The code was transcribed
from these scans by a team of volunteers who are referenced in the program 
comments.  Comments from the original source code are prefixed with a single '#' symbol, 
whereas comments added later are prefixed by "##" or "###".  In some cases, where
similar code blocks exist in previously-transcribed AGC programs (primarily
Luminary 99, from Apollo 11) those code blocks were used as a starting point and
then corrected to agree with the Luminary 69 scans.  The full scans are available
at <a href="http://www.archive.org/details/virtualagcproject/">the Virtual AGC
project's collection at archive.org</a>, while more-convenient reduced-size (but reduced-quality)
images are available at <a href="http://www.ibiblio.org/apollo/ScansForConversion/Luminary069/">
the main Virtual AGC website</a>.  Report any errors noted by creating an 
issue report at <a href="https://github.com/rburkey2005/virtualagc/issues">the Virtual AGC
project's GitHub repository</a>. Notations on the program listing read, in part:<br>
<br>
<pre>
	GAP:  ASSEMBLE REVISION 069 OF AGC PROGRAM LUMINARY BY NASA 2021112-011
	19:02 NOV. 25,1968
</pre>
Note that the date is the date of the printout, not the date of the program revision.
</td></tr></tbody></table>

<p class="nobreak">
<span style="font-family: monospace;">
<pre>
028888,000002:                                                                                                  <span class="co">## Copyright:   Public domain.</span>
028889,000003:                                                                                                  <span class="co">## Filename:    GENERAL_LAMBERT_AIMPOINT_GUIDANCE.agc</span>
028890,000004:                                                                                                  <span class="co">## Purpose:     The main source file for Luminary revision 069.</span>
028891,000005:                                                                                                  <span class="co">##              It is part of the source code for the original release</span>
028892,000006:                                                                                                  <span class="co">##              of the flight software for the Lunar Module's (LM) Apollo</span>
028893,000007:                                                                                                  <span class="co">##              Guidance Computer (AGC) for Apollo 10. The actual flown</span>
028894,000008:                                                                                                  <span class="co">##              version was Luminary 69 revision 2, which included a</span>
028895,000009:                                                                                                  <span class="co">##              newer lunar gravity model and only affected module 2.</span>
028896,000010:                                                                                                  <span class="co">##              This file is intended to be a faithful transcription, except</span>
028897,000011:                                                                                                  <span class="co">##              that the code format has been changed to conform to the</span>
028898,000012:                                                                                                  <span class="co">##              requirements of the yaYUL assembler rather than the</span>
028899,000013:                                                                                                  <span class="co">##              original YUL assembler.</span>
028900,000014:                                                                                                  <span class="co">## Reference:   pp. 661-663</span>
028901,000015:                                                                                                  <span class="co">## Assembler:   yaYUL</span>
028902,000016:                                                                                                  <span class="co">## Contact:     Ron Burkey &lt;info@sandroid.org>.</span>
028903,000017:                                                                                                  <span class="co">## Website:     www.ibiblio.org/apollo/index.html</span>
028904,000018:                                                                                                  <span class="co">## Mod history: 2016-12-13 MAS  Created from Luminary 99.</span>
028905,000019:                                                                                                  <span class="co">##              2016-12-14 MAS  Updated from comment-proofed Luminary 99 version.</span>
028906,000020:                                                                                                  <span class="co">##              2016-12-17 RRB  Updated for Luminary 69.</span>
028907,000021:                                                                                                  <span class="co">##              2017-01-28 RSB  Proofed comment text using octopus/prooferComments</span>
028908,000022:                                                                                                  <span class="co">##                              and fixed errors found.</span>
028909,000023: 
</pre>
</span>
</p>
<table style="text-align: left;" border="1" cellpadding="2" cellspacing="2">
<tbody>
<tr>
<td style="white-space: nowrap; vertical-align: middle;">
<img alt="" src="Apollo32.png" style="width: 32px; height: 32px;" align="left">
</td>
<td style="vertical-align: middle;">
Page 661
</td></tr></tbody></table>
<p class="nobreak">
<span style="font-family: monospace;">
<pre>
028911,000025: 
028912,000026:                                                                                                  <span class="co">#  GENERAL LAMBERT AIMPOINT GUIDANCE **</span>
028913,000027:                                                                                                  <span class="co">#  WRITTEN BY RAMA M AIYAWAR</span>
028914,000028: 
028915,000029:                                                                                                  <span class="co">#  PROGRAM P-31 DESCRIPTION **</span>
028916,000030: 
028917,000031:                                                                                                  <span class="co">#  1.    TO ACCEPT TARGETING PARAMETERS OBTAINED FROM A SOURCE EXTERNAL</span>
028918,000032:                                                                                                  <span class="co">#        TO THE LEM AND COMPUTE THERE FROM THE REQUIRED-VELOCITY AND</span>
028919,000033:                                                                                                  <span class="co">#        OTHER INITIAL CONDITIONS REQUIRED BY LM FOR DESIRED MANEUVER.</span>
028920,000034:                                                                                                  <span class="co">#        THE TARGETING PARAMETERS ARE TIG (TIME OF IGNITION), TARGET </span>
028921,000035:                                                                                                  <span class="co">#        VECTOR (RTARG), AND THE TIME FROM TIG UNTIL THE TARGET IS</span>
028922,000036:                                                                                                  <span class="co">#        REACHED(DELLT4), DESIRED TIME OF FLIGHT FROM RINIT TO RTARG..</span>
028923,000037: 
028924,000038:                                                                                                  <span class="co">#  ASSUMPTIONS **</span>
028925,000039: 
028926,000040:                                                                                                  <span class="co">#  1.    THE TARGET PARAMETERS MAY HAVE BEEN LOADED PRIOR TO THE</span>
028927,000041:                                                                                                  <span class="co">#        EXECUTION OF THIS PROGRAM.</span>
028928,000042:                                                                                                  <span class="co">#  2.    THIS PROGRAM IS APPLICABLE IN EITHER EARTH OR LUNAR ORBIT.</span>
028929,000043:                                                                                                  <span class="co">#  3.    THIS PROGRAM IS DESIGNED FOR ONE-MAN OPERATION, AND SHOULD</span>
028930,000044:                                                                                                  <span class="co">#        BE SELECTED BY THE ASTRONAUT BY DSKY ENTRY V37 E31.</span>
028931,000045: 
028932,000046:                                                                                                  <span class="co">#  SUBROUTINES USED **</span>
028933,000047:                                                                                                  <span class="co">#  </span>
028934,000048:                                                                                                  <span class="co">#  MANUPARM, TTG/N35, R02BOTH, MIDGIM, DISPMGA, FLAGDOWN, BANKCALL,</span>
028935,000049:                                                                                                  <span class="co">#  GOTOPOOH, ENDOFJOB, PHASCHNG, GOFLASHR, GOFLASH.</span>
028936,000050: 
028937,000051:                                                                                                  <span class="co">#  MANUPARM      CALCULATES APOGEE, PERIGEE ALTITUDES AND DELTAV DESIRED</span>
028938,000052:                                                                                                  <span class="co">#                FOR THE MANEUVER.</span>
028939,000053: 
028940,000054:                                                                                                  <span class="co">#  TTG/N35       CLOCKTASK - UPDATES CLOCK.</span>
028941,000055: 
028942,000056:                                                                                                  <span class="co">#  MIDGIM        CALCULATES MIDDLE GIMBAL ANGLE FOR DISPLAY.</span>
028943,000057: 
028944,000058:                                                                                                  <span class="co">#  R02BOTH       IMU - STATUS CHECK ROUTINE.</span>
028945,000059: 
028946,000060:                                                                                                  <span class="co">#  DISPLAYS USED IN P-31LM **</span>
028947,000061: 
028948,000062:                                                                                                  <span class="co">#  V06N33        DISPLAY SOTRED TIG (IN HRS. MINS. SECS)</span>
028949,000063:                                                                                                  <span class="co">#  V06N42        DISPLAY APOGEE, PERIGEE, DELTAV.</span>
028950,000064:                                                                                                  <span class="co">#  V16N35        DISPLAY TIME FROM TIG.</span>
028951,000065:                                                                                                  <span class="co">#  V06N45        TIME FROM IGNITION AND MIDDLE GIMBAL ANGLE.</span>
028952,000066: 
028953,000067:                                                                                                  <span class="co">#  ERASABLE INITIALIZATION REQUIRED **</span>
028954,000068: 
028955,000069:                                                                                                  <span class="co">#  TIG           TIME OF IGNITION                DP      (B+28) CS.</span>
028956,000070: 
028957,000071:                                                                                                  <span class="co">#  DELLT4        DESIRED TIME OF FLIGHT          DP      (B+28) CS</span>
028958,000072:                                                                                                  <span class="co">#                FROM RINIT TO RTARG.</span>
028959,000073:                                                                                                  <span class="co">#  RTARG         RADIUS VECTOR OF TARGET POSITION VECTOR</span>
028960,000074:                                                                                                  <span class="co">#                RADIUS VECTOR   SCALED TO  (B+29)METERS IF EARTH ORBIT</span>
</pre>
</span>
</p>
<table style="text-align: left;" border="1" cellpadding="2" cellspacing="2">
<tbody>
<tr>
<td style="white-space: nowrap; vertical-align: middle;">
<img alt="" src="Apollo32.png" style="width: 32px; height: 32px;" align="left">
</td>
<td style="vertical-align: middle;">
Page 662
</td></tr></tbody></table>
<p class="nobreak">
<span style="font-family: monospace;">
<pre>
028962,000076:                                                                                                  <span class="co">#                RADIUS VECTOR SCALED TO    (B+27)METERS IF MOON ORBIT</span>
028963,000077: 
028964,000078:                                                                                                  <span class="co">#  OUTPUT **</span>
028965,000079: 
028966,000080:                                                                                                  <span class="co">#  HAPO          APOGEE ALTITUDE</span>
028967,000081:                                                                                                  <span class="co">#  HPER          PERIGEE ALTITUDE</span>
028968,000082:                                                                                                  <span class="co">#  VGDISP        MAG.OF DELTAV FOR DISPLAY ,SCALING      B+7 M/CS EARTH</span>
028969,000083:                                                                                                  <span class="co">#                MAG.OF DELTAV FOR DISPLAY, SCALING      B+5 M/CS MOON</span>
028970,000084:                                                                                                  <span class="co">#  MIDGIM        MIDDLE GIMBAL ANGLE</span>
028971,000085:                                                                                                  <span class="co">#  XDELVFLG      RESETS XDELVFLG FOR LAMBERT VG COMPUTATIONS</span>
028972,000086: 
028973,000087:                                                                                                  <span class="co">#  ALARMS OR ABORTS      NONE **</span>
028974,000088: 
028975,000089:                                                                                                  <span class="co">#  RESTARTS ARE VIA GROUP 4 **</span>
028976,000090: 
028977,000091: 35,2000                                           <span class="ps">SETLOC  </span> <a href="TAGS_FOR_RELATIVE_SETLOC_AND_BLANK_BANK_CARDS.agc.html#474C4D">GLM</a>                                   
028978,000092: 35,2000                                           <span class="ps">BANK    </span>                                       
028979,000093: 
028980,000094: 35,2414  E7,1466                                  <span class="ps">EBANK=  </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#53554245584954">SUBEXIT</a>                               
028981,000095: 
028982,000096: 35,2414                                           <span class="ps">COUNT*  </span> $$/<a href="#503331">P31</a>                                
<a name="503331"></a>028983,000097: 35,2414           02325        <span class="sm">P31     </span>           <span class="op">TC      </span> <a href="P32-P35,_P72-P75.agc.html#503230464C474F4E">P20FLGON</a>                              
028984,000098: 35,2415           32025                           <span class="op">CAF     </span> <a href="P30,P37.agc.html#5630364E3333">V06N33</a>                                <span class="co">#  TIG</span>
028985,000099: 35,2416           03651                           <span class="op">TC      </span> <a href="P34-P35,_P74-P75.agc.html#564E504F4F48">VNPOOH</a>                                
028986,000100: 35,2417           06036                           <span class="op">TC      </span> <a href="INTERPRETER.agc.html#494E5450524554">INTPRET</a>                               
028987,000101: 35,2420           71214                           <span class="in">CLEAR   </span> <span class="in">DLOAD     </span>                            
028988,000102: 35,2421           00670                                    <a href="FLAGWORD_ASSIGNMENTS.agc.html#5550444154464C47">UPDATFLG</a>                              
028989,000103: 35,2422           03440                                    <a href="ERASABLE_ASSIGNMENTS.agc.html#544947">TIG</a>                                   
028990,000104: 35,2423           34041                           <span class="in">STCALL  </span> <a href="ORBITAL_INTEGRATION.agc.html#5444454331">TDEC1</a>                                 <span class="co">#  INTEGRATE STATE VECTORS TO TIG</span>
028991,000105: 35,2424           27057                                    <a href="INTEGRATION_INITIALIZATION.agc.html#4C454D50524543">LEMPREC</a>                               
028992,000106: 35,2425           40375                           <span class="in">VLOAD   </span> <span class="in">SETPD     </span>                            
028993,000107: 35,2426           00001                                    <a href="ORBITAL_INTEGRATION.agc.html#52415454">RATT</a>                                  
028994,000108: 35,2427           00001                                    0D                                    
028995,000109: 35,2430           03640                           <span class="in">STORE   </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#52544947">RTIG</a>                                  
028996,000110: 35,2431           26327                           <span class="in">STOVL   </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#52494E4954">RINIT</a>                                 
028997,000111: 35,2432           00007                                    <a href="ORBITAL_INTEGRATION.agc.html#56415454">VATT</a>                                  
028998,000112: 35,2433           03646                           <span class="in">STORE   </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#56544947">VTIG</a>                                  
028999,000113: 35,2434           16335                           <span class="in">STODL   </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#56494E4954">VINIT</a>                                 
029000,000114: 35,2435           32364                                    <a href="P32-P35,_P72-P75.agc.html#5033305A45524F">P30ZERO</a>                               
029001,000115: 35,2436           65206                           <span class="in">PUSH    </span> <span class="in">PDDL      </span>                            <span class="co">#  E4 AND NUMIT = 0</span>
029002,000116: 35,2437           03450                                    <a href="ERASABLE_ASSIGNMENTS.agc.html#44454C4C5434">DELLT4</a>                                
029003,000117: 35,2440           66015                           <span class="in">DAD     </span> <span class="in">SXA,1     </span>                            
029004,000118: 35,2441           03440                                    <a href="ERASABLE_ASSIGNMENTS.agc.html#544947">TIG</a>                                   
029005,000119: 35,2442           03375                                    <a href="ERASABLE_ASSIGNMENTS.agc.html#52545831">RTX1</a>                                  
029006,000120: 35,2443           03627                           <span class="in">STORE   </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#545041535334">TPASS4</a>                                
029007,000121: 35,2444           45134                           <span class="in">SXA,2   </span> <span class="in">CALL      </span>                            
029008,000122: 35,2445           03376                                    <a href="ERASABLE_ASSIGNMENTS.agc.html#52545832">RTX2</a>                                  
029009,000123: 35,2446           22000                                    <a href="P34-P35,_P74-P75.agc.html#494E495456454C">INITVEL</a>                               
029010,000124: 35,2447           41575                           <span class="in">VLOAD   </span> <span class="in">PUSH      </span>                            
</pre>
</span>
</p>
<table style="text-align: left;" border="1" cellpadding="2" cellspacing="2">
<tbody>
<tr>
<td style="white-space: nowrap; vertical-align: middle;">
<img alt="" src="Apollo32.png" style="width: 32px; height: 32px;" align="left">
</td>
<td style="vertical-align: middle;">
Page 663
</td></tr></tbody></table>
<p class="nobreak">
<span style="font-family: monospace;">
<pre>
029012,000126: 35,2450           03366                                    <a href="ERASABLE_ASSIGNMENTS.agc.html#44454C5645455433">DELVEET3</a>                              
029013,000127: 35,2451           03654                           <span class="in">STORE   </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#44454C5653494E">DELVSIN</a>                               
029014,000128: 35,2452           43046                           <span class="in">ABVAL   </span> <span class="in">CLEAR     </span>                            
029015,000129: 35,2453           01267                                    <a href="FLAGWORD_ASSIGNMENTS.agc.html#5844454C56464C47">XDELVFLG</a>                              
029016,000130: 35,2454           37662                           <span class="in">STCALL  </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#564744495350">VGDISP</a>                                
029017,000131: 35,2455           20021                                    <a href="P34-P35,_P74-P75.agc.html#4745542E4C5643">GET.LVC</a>                               
029018,000132: 35,2456           63375                           <span class="in">VLOAD   </span> <span class="in">PDVL      </span>                            
029019,000133: 35,2457           03640                                    <a href="ERASABLE_ASSIGNMENTS.agc.html#52544947">RTIG</a>                                  
029020,000134: 35,2460           02343                                    <a href="ERASABLE_ASSIGNMENTS.agc.html#56495052494D45">VIPRIME</a>                               
029021,000135: 35,2461           77624                           <span class="in">CALL    </span>                                       
029022,000136: 35,2462           46277                                    <a href="P34-P35,_P74-P75.agc.html#5045524941504F31">PERIAPO1</a>                              
029023,000137: 35,2463           77624                           <span class="in">CALL    </span>                                       
029024,000138: 35,2464           46407                                    <a href="P34-P35,_P74-P75.agc.html#53484946545231">SHIFTR1</a>                               
029025,000139: 35,2465           77624                           <span class="in">CALL    </span>                                       <span class="co">#  LIMIT DISPLAY TO 9999.9 N. MI.</span>
029026,000140: 35,2466           45636                                    <a href="R30.agc.html#4D415843484B">MAXCHK</a>                                
029027,000141: 35,2467           16325                           <span class="in">STODL   </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#48504552">HPER</a>                                  
029028,000142: 35,2470           00005                                    4D                                    
029029,000143: 35,2471           77624                           <span class="in">CALL    </span>                                       
029030,000144: 35,2472           46407                                    <a href="P34-P35,_P74-P75.agc.html#53484946545231">SHIFTR1</a>                               
029031,000145: 35,2473           77624                           <span class="in">CALL    </span>                                       <span class="co">#  LIMIT DISPLAY TO 9999.9 N. MI.</span>
029032,000146: 35,2474           45636                                    <a href="R30.agc.html#4D415843484B">MAXCHK</a>                                
029033,000147: 35,2475           02323                           <span class="in">STORE   </span> <a href="ERASABLE_ASSIGNMENTS.agc.html#4841504F">HAPO</a>                                  
029034,000148: 35,2476           77776                           <span class="in">EXIT    </span>                                       
029035,000149: 35,2477           33666                           <span class="op">CAF     </span> <a href="P34-P35,_P74-P75.agc.html#5630364E3831">V06N81</a>                                <span class="co">#  DELVLVC</span>
029036,000150: 35,2500           03651                           <span class="op">TC      </span> <a href="P34-P35,_P74-P75.agc.html#564E504F4F48">VNPOOH</a>                                
029037,000151: 35,2501           32026                           <span class="op">CAF     </span> <a href="P30,P37.agc.html#5630364E3432">V06N42</a>                                <span class="co">#  HAPO, HPER, VGDISP</span>
029038,000152: 35,2502           03651                           <span class="op">TC      </span> <a href="P34-P35,_P74-P75.agc.html#564E504F4F48">VNPOOH</a>                                
029039,000153: 35,2503           06036                           <span class="op">TC      </span> <a href="INTERPRETER.agc.html#494E5450524554">INTPRET</a>                               
<a name="5245564E31363435"></a>029040,000154: 35,2504           45014        <span class="sm">REVN1645</span>           <span class="in">SET     </span> <span class="in">CALL      </span>                            <span class="co">#  TRKMKCNT, TTOGO, +MGA</span>
029041,000155: 35,2505           01071                                    <a href="FLAGWORD_ASSIGNMENTS.agc.html#46494E414C464C47">FINALFLG</a>                              
029042,000156: 35,2506           73542                                    <a href="P34-P35,_P74-P75.agc.html#564E31363435">VN1645</a>                                
029043,000157: 35,2507           77650                           <span class="in">GOTO    </span>                                       
029044,000158: 35,2510           72504                                    <a href="#5245564E31363435">REVN1645</a>                              

End of include-file GENERAL_LAMBERT_AIMPOINT_GUIDANCE.agc.  Parent file is <a href="MAIN.agc.html">MAIN.agc</a>
</pre>
</span>
</p>
</body>
</html>
