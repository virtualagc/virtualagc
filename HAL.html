<!DOCTYPE doctype PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
  <head>
    <title>HAL/S Development Chain</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="Author" content="Ronald Burkey">
    <link rel="icon" type="image/png" href="favicon.png">
    <meta name="author" content="Ronald S. Burkey">
    <script type="text/javascript" src="Header.js"></script>
  </head>
  <body style="background-image: url(gray3.jpg);">
    <script type="text/javascript">
document.write(headerTemplate.replace("@TITLE@","HAL/S Development Toolchain").replace("@SUBTITLE@","Contemporary and Modern"))
</script><br>
    <h1>Table of Contents </h1>
    <ul>
      <li><a moz-do-not-send="true" href="#Introduction">Introduction</a></li>
      <li><a moz-do-not-send="true" href="#HALSFC">HALSFC</a></li>
      <li><a moz-do-not-send="true" href="#templib">Template Libraries</a><br>
      </li>
      <li><a moz-do-not-send="true" href="#Installation">Installation of
          HALSFC</a></li>
      <li><a moz-do-not-send="true" href="#wildThings">Where the Wild
          HAL/S Files Are</a><br>
      </li>
      <li><a moz-do-not-send="true" href="#differences">Some Differences
          Between the Old and the New</a></li>
      <ul>
        <li><a moz-do-not-send="true" href="#ebcdic">EBCDIC vs ASCII</a></li>
        <li><a moz-do-not-send="true" href="#common2">COMMON Memory</a></li>
        <li><a moz-do-not-send="true" href="#overstrike">Overstruck
            Lines in Reports</a></li>
      </ul>
      <ul>
      </ul>
      <li><a moz-do-not-send="true" href="#dangers">Dangers Lurking In <i>New</i>
          HAL/S Source Code</a><br>
      </li>
      <ul>
      </ul>
      <li><a moz-do-not-send="true" href="#options1">Compiler Options,
          Part One</a><br>
      </li>
      <li><a moz-do-not-send="true" href="#moron">More on the Compiler
          Options</a></li>
      <li><a moz-do-not-send="true" href="#debuggingAids">Debugging-Aid
          Options</a><br>
      </li>
      <li><a moz-do-not-send="true" href="#filesUsed">Files Used or
          Created by the HAL/S Compiler</a></li>
      <li><a moz-do-not-send="true" href="#validation">Validating the
          Compiler</a></li>
      <ul>
        <li><a moz-do-not-send="true" href="#mindReader">My Mind-Reading
            Trick</a></li>
        <li><a moz-do-not-send="true" href="valPASS1">Validating Phase 1</a></li>
        <li><a moz-do-not-send="true" href="valPASS2">Validating Phase
            1.5 and Phase 2</a></li>
        <li><a moz-do-not-send="true" href="#DebuggingCompiler">Debugging









            the Compiler Itself</a><br>
        </li>
      </ul>
      <li><a moz-do-not-send="true" href="#halmat">The Mystery and Magic
          of HALMAT</a><br>
      </li>
      <li><a moz-do-not-send="true" href="#glossary">A Glossary and Some
          References</a></li>
      <ul>
      </ul>
    </ul>
    <h1><a name="Introduction"></a>Introduction</h1>
    <p>The principal claim to fame of the HAL/S computer language is
      that the bulk of the flight software for the <a
        moz-do-not-send="true" href="Shuttle.html">Space Shuttle</a> was
      written in it, as supplemented by source code in the assembly
      language of the Shuttle's General Purpose Computers (GPC).&nbsp;
      GPCs were IBM AP-101S computers or (for early missions) IBM
      AP-101B computers.&nbsp; HAL/S also seems to have been used for
      the flight software of the <a moz-do-not-send="true"
        href="https://en.wikipedia.org/wiki/Galileo_(spacecraft)">Galileo


















        probe</a>, though in that case the onboard computers were based
      on <a moz-do-not-send="true"
        href="https://en.wikipedia.org/wiki/RCA_1802">RCA 1802 COSMAC
        microprocessors</a>.<br>
    </p>
    <blockquote><font size="-1"><b>Aside:</b>&nbsp; The other claim to
        fame is that HAL/S has an optional pseudo-mathematical notation
        in which arithmetical expressions look a bit more like
        mathematical formulas as traditionally printed than they
        generally do in other programming languages.&nbsp; This
        more-traditional appearance supposedly eased program
        readability.</font><br>
    </blockquote>
    <p>HAL/S was devised by the company <a moz-do-not-send="true"
        href="https://en.wikipedia.org/wiki/AverStar">Intermetrics, Inc.</a>,
      and touted as one of the "standard" languages in which NASA flight
      software should be written.&nbsp; In spite of the two successes I
      mentioned above, I haven't found much evidence that it ever became
      a NASA standard.&nbsp; Indeed, <a moz-do-not-send="true"
href="Shuttle/UVA-528208-AMCS83-102%20-%20On%20the%20Engineering%20of%20Crucial%20Software.pdf">a
        1983 report</a> that investigated the language candidates HAL/S
      versus ADA versus Modula 2 concluded that only ADA met all of the
      desired criteria.&nbsp; Today, with sympathetic apologies to the
      folks who developed it (and using it) back in the day, I'd regard
      HAL/S as a dead language, though I'd be happy to be instructed
      otherwise.<br>
    </p>
    <p>One factor greatly in its favor, both as a language for flight
      software and for general-purpose computing, is a very fine book
      about the language, namely Michael Ryer's <a
        moz-do-not-send="true"
        href="Shuttle/Programming%20in%20HAL_S%20Sept%201978.pdf"><i>Programming


















          in HAL/S</i></a>.&nbsp; That may sound like an odd advantage
      to mention, but "very fine books about them" are something that
      computer languages with a minimal user base tend to lack.&nbsp;
      Authors have more incentive to spend their time writing about
      widely-successful languages with large numbers of users.<br>
    </p>
    <p>Nevertheless, the Space Shuttle's flight software <i>was</i>
      written in HAL/S, so anybody interested in working with that
      flight software, even if only as a self-enrichment pastime, also
      needs appropriate development tools for working with HAL/S.&nbsp;
      The Space Shuttle's flight software came in two very-different
      flavors, namely the <i>primary</i> flight software (PFS, but
      more-commonly even if more-loosely referred to as PASS) and the <i>backup</i>
      flight software (BFS), with the BFS being basically a clean-room
      implementation of a subset of PASS functionality.&nbsp; By
      emphasizing PASS and BFS I don't mean to disparage Galileo's
      software.&nbsp; However, I have seen no Galileo flight software,
      and as far as I know right now have no prospect for ever getting
      my hands on it.&nbsp; If you have Galileo flight software source
      code, or even related documentation, by all means contact
      me.&nbsp; I'll expand the scope of my HAL/S efforts quicker than
      you can bat an eyelash.<br>
    </p>
    <p><a moz-do-not-send="true"
        href="Shuttle/TDA%20Progress%20Report%2042-64.pdf">A 1981
        article</a> summarizes the HAL/S activity up to that point in
      time, describing 16 implementations of HAL/S compilers and
      cross-compilers for various combinations of host- and
      target-computers.&nbsp; <i>None</i> of those host- or
      target-computers are (or even <i>were</i>, I suppose) available
      for computers accessible to the general public.&nbsp; In
      particular, the so-called "IBM PC" is not on the list.&nbsp; The
      IBM PC didn't even become available until 1981 anyway, and (as I
      can tell you from personal experience) the personal computers
      available prior to that were literally sneered at as toys by the
      mass of mainframe computer users who hadn't the vision to even
      consider the possibility that widely-available low-cost computers
      available to everybody might largely supplant the giant mainframes
      upon which their careers depended.&nbsp; But time ticks on,
      obviously, and if normal peons such as myself want to use HAL/S
      today, we need HAL/S development tools that run on the computers
      actually available to us.&nbsp; Which is to say, on Linux, Mac OS,
      or Windows computers.&nbsp; (Or on hand-held devices, though I
      confess that it's hard to envisage working with HAL/S software on
      a cellphone!)<br>
    </p>
    <p>My initial iteration of a solution to this problem was to develop
      a Linux/Mac/Windows based HAL/S compiler which could translate
      HAL/S source code into a language I called PALMAT, for which I
      also had an emulator.&nbsp; The compiler and emulator could
      optionally be combined into a HAL/S interpreter, into which the
      user could input HAL/S statements and immediately see the result
      of executing that statement.&nbsp; I called this software <b>yaHAL-S-FC</b>.&nbsp;


















      The software functions pretty well, though it never reached the
      point of implementing 100% of HAL/S's features, nor of being
      extremely polished for user friendliness.&nbsp; I halted work on
      it mainly because the effort of extending it to 100% functionality
      seemed to be expanding rather than contracting.&nbsp; But it could
      be useful as an interactive learning aid for those who (for
      example) are working their way through Ryer's book.&nbsp; <a
        moz-do-not-send="true"
href="https://github.com/virtualagc/virtualagc/tree/master/yaShuttle/yaHAL-S">The


















        software remains available in the Virtual AGC software
        repository</a>, and is the subject of two of our pages, one
      about <a moz-do-not-send="true" href="hal-s-compiler.html">the
        compiler</a> itself and one about <a moz-do-not-send="true"
        href="hal-s-interpreter.html">the interpreter</a> alone.&nbsp; I
      will not mention it again here.<br>
    </p>
    <p>The HAL/S development tools we focus on <i>here</i> are:<br>
    </p>
    <ol>
      <li>A HAL/S compiler, implementing 100% of HAL/S features,
        producing IBM AP-101S object code in either PFS or BFS file
        formats as appropriate.&nbsp; That's the topic of the present
        page, of course!<br>
      </li>
      <li>An <a moz-do-not-send="true" href="ASM101S.html">IBM AP-101S
          assembler</a>, largely complete (I think), but presently able
        to produce object code only in the PFS-specific file format (not
        BFS).</li>
      <li>An <a moz-do-not-send="true" href="HALLINK101S.html">IBM
          AP-101S linker for PFS object code</a>, which doesn't
        presently exist but whose page has significant documentation
        concerning the PFS object-file format.&nbsp; Several people
        outside the umbrella of Virtual AGC proper have some form of
        linker, but I have no information as of yet to report concerning
        them.<br>
      </li>
      <li>A PILOT (Program Integration and Loading Tool) linker for BFS
        object code, which doesn't presently exist, and for which no
        documentation whatever is known to have survived.<br>
      </li>
      <li>IBM AP-101S emulator (possibly with integrated debugger), on
        which several people outside the aegis of the Virtual AGC
        Project proper have worked on their own versions, at one or
        another stages of development, but concerning which I have no
        specific information to offer at present.<br>
      </li>
    </ol>
    <p>The list above can be regarded a roadmap for development of the
      development tools.<br>
    </p>
    <p>The HAL/S compiler, which I will refer to as <b>HALSFC</b>, is
      based on <a moz-do-not-send="true"
href="https://github.com/virtualagc/virtualagc/tree/master/yaShuttle/Source%20Code/PASS.REL32V0">the


















        source code for the original Intermetrics HAL/S compiler called
        HAL/S-FC</a>.&nbsp; Intermetrics actually had three separate
      HAL/S compilers that I know about:<br>
    </p>
    <ul>
      <li>HAL/S-360 was a compiler that converted HAL/S source code into
        IBM 360 object code. <br>
      </li>
      <li>HAL/S-FC was the compiler that compiled the primary flight
        software (PASS) and produced AP-101S object code.</li>
      <li>HAL/S-BFC was the compiler that compiled the backup flight
        software (BFS) and produced AP-101S object code.<br>
      </li>
    </ul>
    <blockquote>
      <p><font size="-1"><b>Aside:</b>&nbsp; The surviving documentation
          is almost silent on the subject of having separate compilers
          for PASS vs BFS, but here's my understanding of what happened:<br>
        </font></p>
    </blockquote>
    <ul>
      <ul>
        <font size="-1"> </font>
        <li><font size="-1">At first, say in 1975, there was a single
            HAL/S-FC compiler for producing AP-101S object code.</font></li>
        <font size="-1"> </font>
        <li><font size="-1">But at some unknown point, differences
            between PASS and BFS became too tricky to be handled by a
            single compiler.&nbsp; This problem may have been caused or
            exacerbated by the fact that Intermetrics was writing PASS,
            whereas Rockwell International was responsible for
            independently writing BFS, and they weren't always
            conforming to the same conventions.&nbsp; But whatever the
            reason, to handle these differences, the source code for
            HAL/S-FC branched into two separate source-code trees that
            proceeded to be developed independently from each
            other.&nbsp; And of course, divergent software trees only
            continue diverge over time, rather than magically converging
            back into a single tree.<br>
          </font> </li>
        <font size="-1"> </font>
        <li><font size="-1">Still later, at PASS release 23V2 and BFS
            release 6V0 in late 1991, management noticed that it was
            twice as expensive to develop two compilers as it was to
            develop just one compiler, said "aw, shucks!", kicked up
            some dirt with their boot tips, grumbled menacingly, and
            commanded that the source-code trees once again be merged
            into a single tree.&nbsp; [Editor's note:&nbsp; I made up
            some of that.]<br>
          </font> </li>
        <font size="-1"> </font>
        <li><font size="-1">But even though the <i>source code</i> for
            the two compilers has once again been unified into a single
            release that eventually evolved into the release 32V0/17V0
            that we have today, it turns out that there were still two
            separate methods for <i>building</i> that source code, thus
            producing two separate compiler programs anyway.&nbsp; The
            "HAL/S Compiler System Specification" expresses it
            thusly:&nbsp; "Although much of the source became common
            between the two compilers, there exist differences that can
            be attributed to required PASS/BFS interfaces and certain
            desired but not required compiler features".&nbsp; Besides
            the two different build methods for the HAL/S compilers,
            there's also the consideration of the runtime libraries
            needed to actually run the AP-101S object produced by the
            two compilers.&nbsp; And in fact, the runtime libraries
            needed for the flight software were not merged, and
            continued to be different in PASS versus BFS.&nbsp; I.e.,
            there are still two separate runtime libraries, similar
            perhaps, but <i>not</i> merged into a single source-code
            tree.<br>
          </font> </li>
        <font size="-1"> </font>
        <li><font size="-1">And as for how this dichotomy affected other
            development tools, there was a separate linker for BFS
            versus the linker for PASS, as well as a bunch of separate
            BFS utilities that seem not to have survived.&nbsp; <br>
          </font> </li>
        <font size="-1"> </font>
        <li><font size="-1">Finally, as far as I can tell,
            Intermetrics/USA developers simply refer to these two
            versions of the compiler as "the PASS compiler" and "the BFS
            compiler".&nbsp; I will sometimes refer to them as HAL/S-FC
            and HAL/S-BFC, respectively, although generally I'll just
            use HAL/S-FC as a generic term when it doesn't really matter
            which of the two compilers I'm referring to.</font><br>
        </li>
      </ul>
    </ul>
    <p>And if all of that weren't enough for you, the structure of
      HAL/S-FC, in either the PASS or BFS version, is actually more
      complex than I may have implied.&nbsp; In fact, HAL/S-FC was not
      just one program, but rather seven stand-alone "passes", some of
      them optional, that were run in succession to perform the full
      compilation:<br>
    </p>
    <table cellspacing="2" cellpadding="2" align="center" border="1">
      <tbody>
        <tr>
          <th valign="top">Description<br>
          </th>
          <th valign="top">HAL/S-FC<br>
          </th>
          <th valign="top">HAL/S-BFC<br>
          </th>
        </tr>
        <tr>
          <td valign="top">Cross-compile HAL/S source code to HALMAT
            intermediate language<br>
          </td>
          <td valign="middle" align="center">PASS1<br>
          </td>
          <td valign="middle" align="center">PASS1B<br>
          </td>
        </tr>
        <tr>
          <td valign="top">Produce some optional reports about the
            HALMAT.&nbsp; Sometimes called&nbsp; "FLOWGEN"<br>
          </td>
          <td rowspan="1" colspan="2" valign="middle" align="center">FLO<br>
          </td>
        </tr>
        <tr>
          <td valign="top">Optimize the HALMAT representation<br>
          </td>
          <td valign="middle" align="center">OPT<br>
          </td>
          <td valign="middle" align="center">OPTB<br>
          </td>
        </tr>
        <tr>
          <td valign="top">Optimize it some more!<br>
          </td>
          <td rowspan="1" colspan="2" valign="middle" align="center">AUX<br>
          </td>
        </tr>
        <tr>
          <td valign="top">Cross-compile the HALMAT intermediate
            language to AP-101S object code</td>
          <td valign="middle" align="center">PASS2<br>
          </td>
          <td valign="middle" align="center">PASS2B<br>
          </td>
        </tr>
        <tr>
          <td valign="top">Produce optional Simulation Data Files (SDF)<br>
          </td>
          <td valign="middle" align="center">PASS3<br>
          </td>
          <td valign="middle" align="center">PASS3B<br>
          </td>
        </tr>
        <tr>
          <td valign="top">Print optional reports about the SDF<br>
          </td>
          <td rowspan="1" colspan="2" valign="middle" align="center">PASS4<br>
          </td>
        </tr>
      </tbody>
    </table>
    <br>
    <blockquote><b><font size="-1">Aside:</font></b><font size="-1">&nbsp;


















        At present, modern implementations of PASS3/PASS3B/PASS4 have
        not yet been created, though as you can see from the table
        above, they're not needed merely for compilation of object code.<br>
        <br>
      </font><b><font size="-1">Aside:</font></b><font size="-1">&nbsp;
        Probably, you're beginning to see a truly explosive confusion of
        usages of the word "pass".&nbsp; For one thing, there are 7
        passes of the compiler, <i>some</i> of which are named PASS<i>x</i>
        and some of which are not.&nbsp; But meanwhile, "PASS" is also
        the name of the primary flight software!</font><font size="-1"><font
          size="-1">&nbsp; Worse, as explained below in the <a
            moz-do-not-send="true" href="#glossary">glossary</a>, the <i>correct</i>
          acronym for the primary flight software was actually "PFS"
          rather than "PASS", but the term "PASS" became deeply
          entrenched while the official acroynym "PFS" became mostly
          disused in the everyday language of the original
          developers.&nbsp;</font> For compiler passes, Intermetrics
        somewhat-interchangeably used the following alternate
        terminology, which is less confusing, and I may use it from time
        to time as well:<br>
      </font>
      <ul>
        <li><font size="-1">The term "Phase 1" corresponds to PASS1 of
            the compiler.&nbsp; It is where HAL/S source code is parsed.<br>
          </font></li>
        <li><font size="-1">The term "Phase 1.5" corresponds to FLO,
            OPT, and AUX of the compiler.&nbsp; It is where optimization
            occurs.<br>
          </font></li>
        <li><font size="-1">The term "Phase 2" corresponds to PASS2 of
            the compiler.&nbsp; It is where object-code generation
            occurs.</font></li>
        <li><font size="-1">The term "Phase 3" corresponds to PASS3 of
            the compiler.&nbsp; It is where diagnostic and simulation
            data (i.e., Simulation Data Files, AKA SDF) is produced.</font></li>
        <li><font size="-1"><font size="-1">The term "Phase 4"
              corresponds to PASS4 of the compiler.&nbsp; It dumps
              Simulation Data File (SDF) contents for debugging
              purposes.</font></font><br>
        </li>
      </ul>
    </blockquote>
    And to pile misery atop misery, Microsoft Windows reserves the name
    "AUX" in a way that makes it extremely difficult to use as the name
    of a file or a directory.&nbsp; That includes variations like
    AUX.exe as well.&nbsp; So to save ourselves a world of grief, even
    if not working on Windows, the AUX pass of the compiler is
    henceforth referred to as AUXP.<br>
    <p>The original Intermetrics compilers, HAL/S-FC and HAL/S-360, were
      written in a high-level computer language I call XPL/I, with some
      "inline" IBM 360 machine code.&nbsp; The original developers, and
      other online references you'll see, refer to it simply as
      "XPL".&nbsp; But I regard that as confusing and inaccurate, hence
      my insistence on the term XPL/I instead.&nbsp; In order to create
      our modern HAL/S compiler, <b>HALSFC</b>, I first had to write an
      XPL/I compiler that I call <b>XCOM-I</b>, and then use <b>XCOM-I</b>
      to compile Intermetrics's source code for HAL/S-FC.&nbsp; <a
        moz-do-not-send="true" href="XPL-I.html">There's a separate page
        dedicated to the XPL/I language and to <b>XCOM-I</b></a>.&nbsp;
      Neither topic will be mentioned further here, except in
      passing.&nbsp; <br>
    </p>
    <p><a name="testHal"></a>Also of note:&nbsp; Prior to the <i>very</i>-painful










      decision to create <b>XCOM-I</b>, I had made a similarly-painful
      decision to manually port the source code for PASS1/PASS1B of
      HAL/S-FC into the Python 3 language.&nbsp; The result was a
      working version of PASS1/PASS1B that I call <b>HAL_S_FC</b>.&nbsp;










      This Python port remains very useful for cross-checking <b>HALSFC</b>,
      though it's no longer intended to be run directly by
      developers.&nbsp; I've created no separate documentation for it
      beyond what's covered on the <b>XCOM-I</b> page, though I may
      have some occasion below&nbsp; to mention it further.<br>
    </p>
    <p>As compiled by <b>XCOM-I</b>, the various passes of HAL/S-FC
      actually have filenames like HALSFC-PASS1[.exe] or
      HALSFC-OPTB[.exe].<br>
    </p>
    <p>I know that all of this probably seems very complex, and perhaps
      overly so.&nbsp; I sympathize!&nbsp; Fortunately for actual use, <b>HALSFC</b>
      has been designed to hide almost all of the internal complexity
      from the developer.&nbsp; So I hope that in practice you'll find
      operation of <b>HALSFC</b> to be more simple to use than the
      explanation so far implies.<br>
    </p>
    <h1><a name="HALSFC"></a>HALSFC</h1>
    <p>As I've mentioned, the many pieces of the modern HAL/S compiler
      are referred to by the blanket name <b>HALSFC</b>, and <b>HALSFC</b>
      is the only program you need to invoke to compile a HAL/S program
      into IBM AP-101S object code.</p>
    <p>Let's just briefly examine how to use <b>HALSFC</b>.&nbsp; Since
      we haven't yet covered how to install the program — that's covered
      in the <i>next</i> section! — you can't actually try out the
      commands I show you yet, but you can come back after installation
      and try them.&nbsp; Installation, unfortunately, does have some
      complexity associated with it, and I'd prefer to encourage you
      with the simplicity first, before discouraging you with the
      complexity.&nbsp; Besides, having a clear idea of what <b>HALSFC</b>
      can do and what it cannot do at present may help you to decide
      whether you want to install it at all.<br>
    </p>
    Work with <b>HALSFC</b> is done from so-called "command line",
    because there's no graphical interface.&nbsp; So let's suppose
    you're at a command line with the current working directory being an
    empty one.&nbsp; Or rather, let's suppose that the directory is
    empty except for <a moz-do-not-send="true"
href="https://github.com/virtualagc/virtualagc/blob/master/yaShuttle/ported/PASS1.PROCS/HELLO.hal">a
      simple-minded HAL/S file called HELLO.hal</a> that looks like
    this:<br>
    <blockquote style="background-color: lightgray">
      <pre><font color="#663300">DEBUG ¢D¢E¢F<br> <br> HELLO: PROGRAM;<br>    DECLARE I INTEGER;<br>    DECLARE MY_NAME CHARACTER(20) INITIAL('RON BURKEY');<br>    DECLARE INTEGER, J;<br>    REPLACE PRINTER BY "6";<br>    WRITE(PRINTER) 'THE BEGINNING';<br>    DO FOR I = 1 TO 5;<br>       WRITE(PRINTER) I, 'HELLO, WORLD!';<br>       DO FOR J = 2 TO 8 BY 2;<br>          WRITE(PRINTER) J, MY_NAME, 'SAYS ISN''T THIS FUN?';<br>       END;<br>    END;<br>    WRITE(6) 'THE END';<br> CLOSE HELLO;</font><br></pre>
    </blockquote>
    <p>What this program does isn't important, though most of it is just
      silliness that's probably obvious at a glance.&nbsp; And other
      than the first line, the rest is easily understood by consulting
      Ryer's book.&nbsp; The first line is an example of a compiler
      directive, which in this case is specific to the Intermetrics
      implementation — so Ryer's book won't tell you anything about them
      — and just affects what items appear in the compiler's
      printouts.&nbsp; I've altered the background color of this snippet
      of code to call attention to the fact that compiler directives
      begin in column 1, whereas all code begins or beyond column 2.<br>
    </p>
    <p><b>HALSFC</b> itself is actually a shell script that compiles a
      single HAL/S source-code file.&nbsp; Or more accurately, it's two
      shell scripts:&nbsp; HALSFC for Linux or Mac OS, and HALSFC.bat
      for Windows.&nbsp; They are almost identical in operation, so
      there's not much reason to distinguish between them.<br>
    </p>
    The <b>HALSFC</b> has up to five command-line arguments.&nbsp; The
    latter four are optional, and default values are used if they're
    missing.&nbsp; You can simply omit any arguments from the trailing
    end of the list, but if you want to omit any in the middle, you
    should use the empty string "" (<i>with</i> the quotes) as a
    place-holder.&nbsp; The full syntax of an invocation is this:<br>
    <blockquote>
      <pre><font color="#663300">HALSFC <i>SOURCEFILE</i>.hal <i>TEST</i> <i>"PARAMETERS"</i> <i>TARGET</i> <i>EXTENSION</i></font><br></pre>
    </blockquote>
    <ul>
      <li><font color="#663300"><code><i>SOURCEFILE</i>.hal</code></font>,
        of course, is the name of the HAL/S source-code
        file.&nbsp;&nbsp; The file-extension ".hal" is customary, and
        you shouldn't use anything else.&nbsp; If you need to compile
        multiple HAL/S files, you need to invoke <b>HALSFC</b>
        separately for each one, and then use the linker tool (which at
        this writing does not yet exist) to link all of the object files
        together as a final step.</li>
      <li><font color="#663300"><code><i>TEST</i></code></font>
        determines whether or not validity checks are performed on the
        results of the compilation ... or more accurately, it
        comparison-tests the two available implementations of the PASS1
        of the HAL/S compiler.&nbsp; The default (namely the empty
        string, "") is to perform no test.&nbsp; If non-blank, then a
        test is performed.&nbsp; The test is to compile the source file
        twice, once with <b>HALSFC</b> and once with <b>HAL_S_FC</b> (<a
          moz-do-not-send="true" href="#testHal">as mentioned above</a>),










        and then to extensively compare the results.&nbsp; We have no
        means at present to test subsequent passes of the
        compiler.&nbsp; <b>Note:</b>&nbsp; The test requires the
        NOTABLES compiler option (see the next item).<br>
      </li>
      <li><i><font color="#663300"><code>"PARAMETERS"</code></font></i>
        is the "PARM field" covered in <a moz-do-not-send="true"
          href="#moron">the section on compiler options</a>.&nbsp; For
        example, it might look like <font color="#663300"><code>"SRN,LIST,LISTING2,X6,NOTABLES"</code></font>.&nbsp;



















        The list needs to be quoted if it contains any spaces (which
        should only be if the TITLE option is present), but for Windows
        it <i>always</i> needs to be quoted.&nbsp; Also, if the TEST
        option is used (see above), it can't contain any spaces even if
        quoted.<br>
      </li>
      <li><font color="#663300"><i><code>TARGET</code></i></font> would
        be either <font color="#663300"><code>PFS</code></font> or <font
          color="#663300"><code>BFS</code></font>, defaulting to <font
          color="#663300"><code>PFS</code></font>.&nbsp; I.e., primary
        flight software versus backup flight software. <br>
      </li>
      <li><font color="#663300"><code><i>EXTENSION</i></code></font>
        indicates the filename extension used for executable
        files.&nbsp; It defaults to <b>HALSFC</b>'s guess of what the
        extension should be, which is .exe in Windows and blank in Linux
        or Mac OS.&nbsp; This argument is ignored on Windows.<br>
      </li>
    </ul>
    <p>Let's just try compiling HELLO.hal:<font size="+1"><br>
      </font> </p>
    <font size="+1"> </font>
    <blockquote>
      <pre><font size="+1" color="#663300">HALSFC HELLO.hal "" "LIST</font><font size="+1">"<br></font></pre>
    </blockquote>
    <p>After a short period of time we're told:<br>
    </p>
    <blockquote>
      <pre>Compilation successful. Results in "HALSFC Wed 08-21-2024  7-14-36.00.results".<br></pre>
    </blockquote>
    <p>(Or whatever your actual date and time is!)&nbsp;&nbsp; <br>
    </p>
    <blockquote><font size="-1"><b>Note:</b>&nbsp; In the unlikely event
        you have been using <b>HALSFC</b> for some time, the date/time
        format you see above may not be the one you have become familiar
        with.&nbsp; The timestamp format is now normalized to make the
        timestamps from <b>HALSFC</b> (Linux, Mac OS) match those from
        <b>HALSFC.bat</b> (Windows).</font><br>
    </blockquote>
    <p>Our directory now contains both the HELLO.hal we started with,
      but also a subdirectory called something like "HALSFC Wed
      08-21-2024&nbsp; 7-14-36.00.results", which contains a <i>lot</i>
      of files.&nbsp;&nbsp; Every time you run <b>HALSFC</b>, a new
      such subdirectory is created.&nbsp; Since these subdirectories are
      all named *.results, though, they're easy to find later and
      delete.&nbsp; Stashing all of the created files in the
      subdirectory keeps our working directory from being cluttered up
      with innumerable files, of which only a small subset are likely to
      be of interest.&nbsp; I'll cover <a moz-do-not-send="true"
        href="#filesUsed">the files in the subdirectory</a> later, in
      probably-boring detail.<br>
    </p>
    <blockquote><font size="-1"><b>Note:</b>&nbsp; In sweeping all of
        the files generated by <b>HALSFC</b> into the results folder,
        excepts are made for certain files that are commonly inspected
        or else are needed for further compilations if a chain of
        related HAL/S files are to be compiled.&nbsp; These exceptional
        files are indeed copied into the results folder, but they are
        not removed from the working directory, so that they are
        more-conveniently accessed without having to specify some long,
        complicated folder name.&nbsp; These exceptional files — namely
        the report files pass1.rpt and pass2.rpt, the object file
        cards.bin, and <a moz-do-not-send="true" href="#templib">the
          template library</a> — are all covered below and in the next
        section.<br>
      </font></blockquote>
    <p> </p>
    <blockquote><b><font size="-1">Note:</font></b><font size="-1">&nbsp;


        Moreover, the results subdirectory just mentioned is created
        only at the <i>end</i> of the compilation process, so if you <i>manually</i>
        abort <b>HALSFC</b> prior to completion, you will find the
        multitude of files that would normally have been removed into
        the results folder are now instead cluttering up the working
        folder.&nbsp; Compilation is normally pretty fast, since
        individual HAL/S source-code files tend to be short, so there's
        not usually a lot of reason for premature aborts, but it's still
        something to be aware of.&nbsp; The continued existence of these
        files don't pose any problem <i>per se</i>, and won't influence
        future compilations.&nbsp; But if you do want to manually delete
        them, most of them have names of the form *.bin, *.rpt, *.out,
        *.txt, or *.parms.</font><br>
    </blockquote>
    <p> </p>
    Of the files which <i>are</i> likely to be interesting, the one we
    usually look at first is the report (pass1.rpt) created by the
    "phase 1" compiler pass, which is where our HAL/S source code is
    parsed, and in which most or all errors will have been
    detected.&nbsp; Here's what that report looks like:<br>
    <blockquote>
      <pre><font color="#663300">    HAL/S REL32V0                T I T A N  S Y S T E M S  C O R P .                 AUGUST 8, 2024    12:51:35.21     PAGE 1<br><br><br>   HAL/S COMPILER PHASE 1 -- VERSION OF AUGUST 8, 2024.  CLOCK TIME = 4:31:2.00.<br><br><br>TODAY IS AUGUST 8, 2024.  CLOCK TIME = 12:51:35.21.<br><br> PARM FIELD: LIST<br><br><br> COMPLETE LIST OF COMPILE-TIME OPTIONS IN EFFECT<br><br><br>       *** TYPE 1 OPTIONS ***<br><br>        NOADDRS<br>        NODECK<br>        NODUMP<br>        NOHALMAT<br>        NOHIGHOPT<br>          LFXI<br>          LIST<br>        NOLISTING2<br>          MICROCODE<br>        NOREGOPT<br>        NOSDL<br>        NOSREF<br>        NOSRN<br>        NOTABDMP<br>          TABLES<br>        NOTABLST<br>        NOTEMPLATE<br>        NOVARSYM<br>          ZCON<br><br><br>       *** TYPE 2 OPTIONS ***<br><br>       BLOCKSUM = 400<br>       CARDTYPE =<br>       COMPUNIT = 0<br>            DSR = 1<br>      LABELSIZE = 1200<br>         LINECT = 59<br>     LITSTRINGS = 2000<br>      MACROSIZE = 500<br>           MFID =<br>          PAGES = 2500<br>        SYMBOLS = 200<br>          TITLE =<br>       XREFSIZE = 2000<br><br><br> *** NO LANGUAGE SUBSET IN EFFECT ***<br><br>------------------------------------------------------------------------------------------------------------------------------------------------------<br>  HAL/S REL32V0                T I T A N  S Y S T E M S  C O R P .                 AUGUST 8, 2024    12:51:35.21     PAGE 2<br>STMT                                                                  SOURCE                                                                  REVISION<br><br><br><br>     D| EBUG `D`E`F                                                                                         |<br><br>------------------------------------------------------------------------------------------------------------------------------------------------------<br>  HAL/S REL32V0                T I T A N  S Y S T E M S  C O R P .                 AUGUST 8, 2024    12:51:35.21     PAGE 3<br>STMT                                                  SOURCE                                                  CURRENT SCOPE<br><br>   1 M| HELLO:                                                                                              |HELLO<br>   1 M| PROGRAM;                                                                                            |HELLO<br>   2 M|   DECLARE I INTEGER;                                                                                |HELLO<br>   3 M|   DECLARE MY_NAME CHARACTER(20) INITIAL('RON BURKEY');                                              |HELLO<br>   4 M|   DECLARE INTEGER, J;                                                                               |HELLO<br>   5 M|   REPLACE PRINTER BY "6";                                                                           |HELLO<br>   6 M|   WRITE(PRINTER) 'THE BEGINNING';                                                                   |HELLO<br>                ^^^^^^^<br>   7 M|   DO FOR I = 1 TO 5;                                                                                |HELLO<br>   8 M| 1   WRITE(PRINTER) I, 'HELLO, WORLD!';                                                              |HELLO<br>                  ^^^^^^^<br>   9 M| 1   DO FOR J = 2 TO 8 BY 2;                                                                         |HELLO<br><br>     E|                            ,                                                                        |<br>  10 M| 2     WRITE(PRINTER) J, MY_NAME, 'SAYS ISN''T THIS FUN?';                                           |HELLO<br>                    ^^^^^^^<br>  11 M| 1   END;                                                                                            |ST#9<br>  12 M|   END;                                                                                              |ST#7<br>  13 M|   WRITE(6) 'THE END';                                                                               |HELLO<br>  14 M| CLOSE HELLO;                                                                                        |HELLO<br><br>------------------------------------------------------------------------------------------------------------------------------------------------------<br>  HAL/S REL32V0                T I T A N  S Y S T E M S  C O R P .                 AUGUST 8, 2024    12:51:35.21     PAGE 4<br><br><br><br>**** C O M P I L A T I O N   L A Y O U T ****<br><br> HELLO: PROGRAM;<br><br>------------------------------------------------------------------------------------------------------------------------------------------------------<br>  HAL/S REL32V0                T I T A N  S Y S T E M S  C O R P .                 AUGUST 8, 2024    12:51:35.21     PAGE 5<br><br><br><br>S Y M B O L  &amp;  C R O S S   R E F E R E N C E   T A B L E   L I S T I N G :<br><br>         (CROSS REFERENCE FLAG KEY:  4 = ASSIGNMENT, 2 = REFERENCE, 1 = SUBSCRIPT USE, 0 = DEFINITION)<br><br> DCL  NAME            TYPE                          ATTRIBUTES &amp; CROSS REFERENCE<br><br>   1  HELLO     PROGRAM                            FLAGS=20040, NEST=0, SCOPE=1, PTR=2, LENGTH=0, LINK1=-1, LINK2=0, SYT_NO=1,<br>                                                   ARRAY=-8192, ADDR=0, CLASS=2, TYPE=73     XREF: 0 0001<br>   2  I         INTEGER                            SINGLE, ALIGNED, STATIC, FLAGS=808208, NEST=1, SCOPE=1, PTR=0, LENGTH=0,<br>                                                   LINK1=0, LINK2=0, SYT_NO=2, ARRAY=0, ADDR=0, CLASS=1, TYPE=6      XREF: 0 0002<br>                                                   4 0007  2 0008<br>   3  MY_NAME   CHARACTER(20)                      ALIGNED, STATIC, INITIAL, FLAGS=8A08, NEST=1, SCOPE=1, PTR=0, LENGTH=20,<br>                                                   LINK1=0, LINK2=0, SYT_NO=3, ARRAY=0, ADDR=0, CLASS=1, TYPE=2      XREF: 0 0003<br>                                                   2 0010<br>   4  J         INTEGER                            SINGLE, ALIGNED, STATIC, FLAGS=808208, NEST=1, SCOPE=1, PTR=0, LENGTH=0,<br>                                                   LINK1=0, LINK2=0, SYT_NO=4, ARRAY=0, ADDR=0, CLASS=1, TYPE=6      XREF: 0 0004<br>                                                   4 0009  2 0010<br>   5  PRINTER   REPLACE MACRO                      FLAGS=C000, NEST=1, SCOPE=1, PTR=0, LENGTH=0, LINK1=0, LINK2=0, SYT_NO=5,<br>                                                   ARRAY=0, ADDR=0, CLASS=6, TYPE=0, MACRO TEXT="6"  XREF: 0 0005  2 0006  2 0008<br>                                                   2 0010<br><br><br><br>L I T E R A L   T A B L E   D U M P:<br><br> LOC  TYPE          LITERAL<br><br>   1 ARITH  4214000000000000<br>   2  CHAR  RON BURKEY<br>   3 ARITH  4160000000000000<br>   4  CHAR  THE BEGINNING<br>   5 ARITH  4110000000000000<br>   6 ARITH  4150000000000000<br>   7 ARITH  4160000000000000<br>   8  CHAR  HELLO, WORLD!<br>   9 ARITH  4120000000000000<br>  10 ARITH  4180000000000000<br>  11 ARITH  4120000000000000<br>  12 ARITH  4160000000000000<br>  13  CHAR  SAYS ISN'T THIS FUN?<br>  14 ARITH  4160000000000000<br>  15  CHAR  THE END<br><br><br><br>------------------------------------------------------------------------------------------------------------------------------------------------------<br>  HAL/S REL32V0                T I T A N  S Y S T E M S  C O R P .                 AUGUST 8, 2024    12:51:35.21     PAGE 6<br><br><br>       OPTIONAL TABLE SIZES<br><br>NAME       REQUESTED    USED<br>^^^^       ^^^^^^^^^    ^^^^<br><br>LITSTRINGS      2000      68<br>SYMBOLS          200       5<br>MACROSIZE        500       2<br>XREFSIZE        2000      13<br>BLOCKSUM         400       0<br><br><br>CALLS TO SCAN        = 85<br>CALLS TO IDENTIFY    = 14<br>NUMBER OF REDUCTIONS = 202<br>MAX STACK SIZE       = 9<br>MAX IND. STACK SIZE  = 5<br>END IND. STACK SIZE  = 1<br>END ARRAY STACK SIZE = 0<br>MAX EXT_ARRAY INDEX  = 1<br>STATEMENT COUNT      = 14<br>MINOR COMPACTIFIES   = 0<br>MAJOR COMPACTIFIES   = 0<br>REALLOCATIONS        = 0<br>MAX NESTING DEPTH    = 1<br>FREE STRING AREA     = 16620316<br><br><br>END OF HAL/S PHASE 1, AUGUST 8, 2024.  CLOCK TIME = 12:51:35.22.<br><br>17 CARDS WERE PROCESSED.<br>NO ERRORS WERE DETECTED DURING PHASE 1 .<br><br><br>NUMBER OF FILE 6 LOCATES          = 1<br>NUMBER OF FILE 6 READS            = 0<br>NUMBER OF FILE 6 WRITES           = 0<br><br><br>TOTAL CPU TIME FOR PHASE 1      0:0:0.02.<br>CPU TIME FOR PHASE 1 SET UP     0:0:0.01.<br>CPU TIME FOR PHASE 1 PROCESSING 0:0:0.00.<br>CPU TIME FOR PHASE 1 CLEAN UP   0:0:0.01.</font><br></pre>
    </blockquote>
    <p>There's lots of information here, though the most-significant
      thing is probably the message "NO ERRORS WERE DETECTED DURING
      PHASE 1".&nbsp; What phase 1 (PASS1) has accomplished is mostly to
      output a processed form of our HAL/S program as expressed in an
      "intermediate language" called HALMAT.&nbsp; Unfortunately, most
      of the documentation about HALMAT has not survived, so this file
      is only partially comprehensible, but since the additional passes
      of the compiler <i>do</i> understand HALMAT, we don't necessarily
      need to understand it ourselves.&nbsp; The HALMAT form of the
      program is the file halmat.bin.&nbsp; <b>Note:</b>&nbsp; In an
      unaccustomed burst of energy, I did create a script called <a
        moz-do-not-send="true"
href="https://github.com/virtualagc/virtualagc/blob/master/yaShuttle/ported/unHALMAT.py">unHALMAT.py</a>
      that parse a HALMAT file, <i>à la</i> "<tt>unHALMAT.py halmat.bin</tt>",







      though the extent to which the result is informative is
      questionable.<br>
    </p>
    <p>After phase 1, the compiler then proceeded to further process
      halmat.bin, using the "phase 1.5" programs (FLO, OPT, and
      AUXP).&nbsp; Those programs don't produce useful reports, at least
      not by default, so we don't need to look at their reports.&nbsp;
      However, what they do is to "optimize" the HALMAT, producing new
      HALMAT-related files called optmat.bin and auxmat.bin.&nbsp; <b>Note:</b>&nbsp;







      optmat.bin appears to be a valid HALMAT file, and can be parsed
      with unHALMAT.py; auxmat.bin is not, and cannot.<br>
    </p>
    <p><a name="report2"></a>The "phase 2" program (PASS2) then pulls in
      all of those HALMAT and HALMAT-related files, and generates
      AP-101S object code from them.&nbsp; Let's look at PASS2's report,
      pass2.rpt:<br>
    </p>
    <blockquote>
      <pre><font color="#663300">PAGE 1<br><br><br>   HAL/S COMPILER PHASE 2  --  VERSION OF AUGUST 8, 2024.  CLOCK TIME = 4:32:17.00<br><br>HAL/S PHASE 2 ENTERED AUGUST 8, 2024.  CLOCK TIME = 12:51:35.64<br><br><br>------------------------------------------------------------------------------------------------------------------------------------------------------<br>PAGE 2<br>SYMBOL   TYPE  ID  ADDR  LEN(HEX)  LEN(DEC)         BLOCK NAME<br><br><br>$0HELLO   SD 0001 000000 000040          64         HELLO<br>#EHELLO   SD 0002 000000 000006           6<br>#DHELLO   SD 0003 000000 000033          51<br>@0HELLO   ER 0004<br>#QIOINIT  ER 0005<br>#QCOUT    ER 0006<br>#QHOUT    ER 0007<br><br>------------------------------------------------------------------------------------------------------------------------------------------------------<br>PAGE 3<br>  LOC    CODE        EFFAD           LABEL   INSN   OPERANDS            SYMBOLIC OPERAND<br><br><br>0000000                             ST#1     EQU    *<br>00000                               #EHELLO  CSECT        ESDID= 0002<br>00000 0000                                   DC     X'0000'<br>00001 0000                                   DC     X'0000'<br>00002 00000700                               DC     A'00000700'         #DHELLO<br>00004 0000                                   DC     X'0000'<br>00005 0000                                   DC     X'0000'<br>00000                               $0HELLO  CSECT        ESDID= 0001<br>0000000                             HELLO    EQU    *<br>00000 E8F3 0000                              LHI    R0,0()              @0HELLO<br>00002 E9F3 0000                              LHI    R1,0()              #DHELLO<br>00004 B914           0005                    STH    R1,5(R0)<br>00005 E0FB 0014                              IAL    R0,20()<br>00007 EB11           0004                    LA     R3,4(R1)<br>00008 BB24           0009                    STH    R3,9(R0)<br>0000009                             ST#2     EQU    *<br>0000009                             ST#3     EQU    *<br>00009                               #DHELLO  CSECT        ESDID= 0003<br>00009 000008                                 ORG    *-1<br>00008 140A524F                               DC     X'140A524F'<br>0000A 4E204255                               DC     X'4E204255'<br>0000C 524B4559                               DC     X'524B4559'<br>000000E                             ST#4     EQU    *<br>000000E                             ST#5     EQU    *<br>000000E                             ST#6     EQU    *<br>00009                               $0HELLO  CSECT        ESDID= 0001<br>00009 BEE8                                   LFXI   R6,6<br>0000A BDE5                                   LFXI   R5,3<br>0000B D0FF 3800                              SCAL@# R0,0(R1,R3)         #QIOINIT<br>0000D EAAD           002B                    LA     R2,43(R1)           C'THE BEGINNING'<br>0000E D0FF 3800                              SCAL@# R0,0(R1,R3)         #QCOUT<br>0000010                             ST#7     EQU    *<br>00010 BFE3                                   LFXI   R7,1<br>00011 DF84           0033                    BCF    7,*+34              B     LBL#3 (WITHIN ST#12)<br>0000012                             LBL#4    EQU    *<br>0000012                             ST#8     EQU    *<br>00012 BEE8                                   LFXI   R6,6<br>00013 BDE5                                   LFXI   R5,3<br>00014 D0FF 3800                              SCAL@# R0,0(R1,R3)         #QIOINIT<br>00016 1DE7                                   LR     R5,R7<br>00017 D0FF 3800                              SCAL@# R0,0(R1,R3)         #QHOUT<br>00019 EA8D           0023                    LA     R2,35(R1)           C'HELLO, WORLD!'<br>0001A D0FF 3800                              SCAL@# R0,0(R1,R3)         #QCOUT<br>000001C                             ST#9     EQU    *<br>0001C BCE4                                   LFXI   R4,2<br>0001D DF3C           002D                    BCF    7,*+16              B     LBL#5 (WITHIN ST#11)<br>000001E                             LBL#6    EQU    *<br>000001E                             ST#10    EQU    *<br>0001E BEE8                                   LFXI   R6,6<br>0001F BDE5                                   LFXI   R5,3<br>00020 D0FF 3800                              SCAL@# R0,0(R1,R3)         #QIOINIT<br>00022 1DE4                                   LR     R5,R4<br>00023 D0FF 3800                              SCAL@# R0,0(R1,R3)         #QHOUT<br>00025 EA21           0008                    LA     R2,8(R1)            MY_NAME<br>00026 D0FF 3800                              SCAL@# R0,0(R1,R3)         #QCOUT<br><br><br>------------------------------------------------------------------------------------------------------------------------------------------------------<br>PAGE 4<br>  LOC    CODE        EFFAD           LABEL   INSN   OPERANDS            SYMBOLIC OPERAND<br><br>00028 EA61           0018                    LA     R2,24(R1)           C'SAYS ISN'T THIS FUN?'<br>00029 D0FF 3800                              SCAL@# R0,0(R1,R3)         #QCOUT<br>000002B                             ST#11    EQU    *<br>0002B BCE4                                   LFXI   R4,2<br>0002C 840F           0007                    AH     R4,3(R3)            J<br>000002D                             LBL#5    EQU    *<br>0002D BC0F           0007                    STH    R4,3(R3)            J<br>0002E B5E4 0008                              CHI    R4,8<br>00030 DE4E           001E                    BCB    6,*-18              BLE   LBL#6 (WITHIN ST#9)<br>0000031                             LBL#7    EQU    *<br>0000031                             ST#12    EQU    *<br>00031 BFE3                                   LFXI   R7,1<br>00032 870B           0006                    AH     R7,2(R3)            I<br>0000033                             LBL#3    EQU    *<br>00033 BF0B           0006                    STH    R7,2(R3)            I<br>00034 B5E7 0005                              CHI    R7,5<br>00036 DE96           0012                    BCB    6,*-36              BLE   LBL#4 (WITHIN ST#7)<br>0000037                             LBL#8    EQU    *<br>0000037                             ST#13    EQU    *<br>00037 BEE8                                   LFXI   R6,6<br>00038 BDE5                                   LFXI   R5,3<br>00039 D0FF 3800                              SCAL@# R0,0(R1,R3)         #QIOINIT<br>0003B EA4D           0013                    LA     R2,19(R1)           C'THE END'<br>0003C D0FF 3800                              SCAL@# R0,0(R1,R3)         #QCOUT<br>000003E                             ST#14    EQU    *<br>000003E                             LBL#2    EQU    *<br>0003E C9F9 0000      0000                    SVC    0(R1)               H'21', X'0015'<br>0000E                               #DHELLO  CSECT        ESDID= 0003<br>0000E 000000                                 ORG    *-14<br>00000 0015                                   DC     X'0015'<br>00004 000013                                 ORG    *+15<br>00013 00075448                               DC     X'00075448'<br>00015 4520454E                               DC     X'4520454E'<br>00017 4400                                   DC     X'4400'<br>00018 00145341                               DC     X'00145341'<br>0001A 59532049                               DC     X'59532049'<br>0001C 534E2754                               DC     X'534E2754'<br>0001E 20544849                               DC     X'20544849'<br>00020 53204655                               DC     X'53204655'<br>00022 4E3F                                   DC     X'4E3F'<br>00023 000D4845                               DC     X'000D4845'<br>00025 4C4C4F2C                               DC     X'4C4C4F2C'<br>00027 20574F52                               DC     X'20574F52'<br>00029 4C442100                               DC     X'4C442100'<br>0002B 000D5448                               DC     X'000D5448'<br>0002D 45204245                               DC     X'45204245'<br>0002F 47494E4E                               DC     X'47494E4E'<br>00031 494E4700                               DC     X'494E4700'<br>                                             END<br><br>------------------------------------------------------------------------------------------------------------------------------------------------------<br>PAGE 5<br><br><br>RLD INFORMATION<br><br>POS.ID (P) IS THE ESDID OF SD FOR THE CONTROL SECTION THAT CONTAINS THE ADDRESS CONSTANT<br>REL.ID (R) IS THE ESDID OF ESD ENTRY FOR THE SYMBOL BEING REFERRED TO<br><br>         FLAG        TYPE                                ACTION PERFORMED<br><br>       V00000ST      YCON      RELOCATION FACTOR IS ADDED TO ADDRESS CONSTANT.  IF ADDRESS IS GREATER THAN 15 BITS, SET BIT "0" ON.<br>       000001ST      ACON      RELOCATION FACTOR IS ADDED TO ADDRESS CONSTANT.<br>       V00100ST      ZCON      ADD RELOCATION FACTOR TO FIRST HALFWORD.  IF GREATER THAN 15 BITS, UPDATE BSR FIELD.<br>                               (BRANCH RELOCATION FOR 32-BIT BRANCH)<br>       V10000ST      ZCON      UPDATE DSR FIELD WITH HIGH ORDER 4 BITS OF THE 19-BIT RELOCATION FACTOR.<br>                               (DATA RELOCATION FOR 32-BIT BRANCH)<br>       V01000ST      ZCON      UPDATE BSR FIELD WITH HIGH ORDER 4 BITS OF THE 19-BIT RELOCATION FACTOR.<br>                               (BRANCH RELOCATION FOR 32-BIT DATA)<br>       V10100ST      ZCON      ADD RELOCATION FACTOR TO FIRST HALFWORD.  IF GREATER THAN 15-BITS, UPDATE DSR FIELD.<br>                               (DATA RELOCATION FOR 32-BIT DATA)<br><br>       V = SIGN OF THE YCON IN THE TEXT RECORD<br>            0 = THE YCON IS POSITIVE<br>            1 = THE YCON IS THE ABSOLUTE VALUE OF A NEGATIVE NUMBER<br>       S = DIRECTION OF RELOCATION<br>            0 = POSITIVE<br>            1 = NEGATIVE<br>       T = TYPE OF NEXT RLD ITEM<br>            0 = NEXT RLD ITEM HAS DIFFERENT R OR P POINTERS; THEY ARE IN THE NEXT ITEM<br>            1 = NEXT RLD ITEM HAS SAME R AND P POINTERS; HENCE THEY ARE OMITTED<br><br> POS.ID    CSECT(P)    ADDRESS   FLAGS      REL.ID    CSECT(R)<br><br>  0001     $0HELLO     000001     00         0004     @0HELLO<br>  0001     $0HELLO     000003     00         0003     #DHELLO<br>  0001     $0HELLO     00000C     00         0005     #QIOINIT<br>  0001     $0HELLO     00000F     00         0006     #QCOUT<br>  0001     $0HELLO     000015     00         0005     #QIOINIT<br>  0001     $0HELLO     000018     00         0007     #QHOUT<br>  0001     $0HELLO     00001B     00         0006     #QCOUT<br>  0001     $0HELLO     000021     00         0005     #QIOINIT<br>  0001     $0HELLO     000024     00         0007     #QHOUT<br>  0001     $0HELLO     000027     00         0006     #QCOUT<br>  0001     $0HELLO     00002A     00         0006     #QCOUT<br>  0001     $0HELLO     00003A     00         0005     #QIOINIT<br>  0001     $0HELLO     00003D     00         0006     #QCOUT<br>  0002     #EHELLO     000002     10         0001     $0HELLO<br>  0002     #EHELLO     000002     40         0003     #DHELLO<br><br>------------------------------------------------------------------------------------------------------------------------------------------------------<br>PAGE 6<br><br><br><br> VARIABLE OFFSET TABLE<br>    LOC IS THE CSECT-RELATIVE ADDRESS IN HEX OF THE DECLARED VARIABLE.<br>    B IS THE BASE REGISTER USED FOR ADDRESSING THE DECLARED VARIABLE.  IF B IS NEGATIVE, THIS IS A VIRTUAL REGISTER AND CODE<br>          MUST BE GENERATED TO LOAD A REAL REGISTER.<br>    DISP IS THE DISPLACEMENT USED FOR GENERATING BASE-DISPLACEMENT ADDRESSES FOR ACCESSING THE DATA ITEMS.<br>    LENGTH IS THE SIZE IN DECIMAL HALFWORDS OF THE VARIABLE.<br>    BIAS IS THE AMOUNT OF THE ZEROTH ELEMENT OFFSET.<br>    NAME IS THE NAME OF THE VARIABLE.<br><br><br>  LOC    B DISP     LENGTH    BIAS   NAME<br><br>         UNDER HELLO     STACK=20<br>000006   1 006          1       0    I<br>000008   1 008         11       0    MY_NAME<br>000007   1 007          1       0    J<br><br><br>------------------------------------------------------------------------------------------------------------------------------------------------------<br>PAGE 7<br><br><br><br>MEMORY MAP FOR DATA CSECT #DHELLO<br><br>NAME                  LEN(DEC)  OFFSET(DEC)   B  DISP(HEX)  SCOPE<br><br>**LOCAL BLOCK DATA**        2         4                     HELLO<br>I                           1         6       1    0006     HELLO<br>J                           1         7       1    0007     HELLO<br>MY_NAME                    11         8       1    0008     HELLO<br><br>TOTAL SIZE OF ALIGNMENT GAPS FOR CSECT: 0 HW<br><br><br><br>INSTRUCTION FREQUENCIES<br><br>INSN  COUNT<br>LFXI    12<br>LR      2<br>STH     4<br>LA      6<br>AH      2<br>SCAL    11<br>IAL     1<br>BCB     2<br>BCF     2<br>SVC     1<br>LHI     2<br>CHI     2<br><br><br>       OPTIONAL TABLE SIZES<br><br>NAME       REQUESTED    USED<br>^^^^       ^^^^^^^^^    ^^^^<br><br>LITSTRINGS      2000      68<br>LABELSIZE       1200       8<br><br><br>42 HALMAT OPERATORS CONVERTED<br><br>47 INSTRUCTIONS GENERATED<br><br>70 HALFWORDS OF PROGRAM, 51 HALFWORDS OF DATA.<br><br>MAX. OPERAND STACK SIZE            =9<br>END  OPERAND STACK SIZE            =0<br>MAX. STORAGE DESCRIPTOR STACK SIZE =1<br>END  STORAGE DESCRIPTOR STACK SIZE =0<br>NUMBER OF MINOR COMPACTIFIES       =0<br>NUMBER OF MAJOR COMPACTIFIES       =0<br>NUMBER OF REALLOCATIONS            =5<br>FREE STRING AREA                   =16623408<br><br>END OF HAL/S PHASE 2 AUGUST 8, 2024.  CLOCK TIME = 12:51:35.65<br><br><br>------------------------------------------------------------------------------------------------------------------------------------------------------<br>PAGE 8<br><br><br>TOTAL CPU TIME FOR PHASE 2       0:0:0.01<br>CPU TIME FOR PHASE 2 SET UP      0:0:0.00<br>CPU TIME FOR PHASE 2 GENERATION  0:0:0.00<br>CPU TIME FOR PHASE 2 CLEAN UP    0:0:0.01</font><br></pre>
    </blockquote>
    <p>The most-significant thing about PASS2's report is probably that
      it gives us a glimpse — well, actually a full listing ... sort of!
      — of the assembly-language into which the compiler has transformed
      our HAL/S sample program.&nbsp; PASS2 doesn't actually default to
      putting such a listing in its report.&nbsp; It only did so in this
      case because we compiled it with the LIST option.&nbsp; After all,
      software that's merely printed in a report has very little use
      from the computer's point of view.&nbsp; But I've included it in
      the report as eye candy!&nbsp; You can read more about it in the
      document "<a moz-do-not-send="true"
        href="Shuttle/Shuttle%20GPC%20Software%20Model%20AP-101S.pdf">Space


















        Shuttle Model AP-101S Principles of Operation, with Shuttle
        Instruction Set</a>". </p>
    <p>But <i>useful</i> object code is emitted by the PASS/PFS version
      of the HAL/S compiler in the form of a file, called
      cards.bin.&nbsp; The cards.bin object file is what would be used
      by a linker or loader, apparently called just the "AP101
      linker".&nbsp; As for the object file, though containing IBM
      AP-101S PASS/PFS object code, it is in the OS/360 Object File
      Format — or at least, very close to it! —, <a
        moz-do-not-send="true"
        href="https://en.wikipedia.org/wiki/OS/360_Object_File_Format">which


















        you can read about in its wikipedia article</a>.&nbsp; There are
      some slight differences, such as that while you'd expect <code>CHARACTER</code>
      strings in the object file to be encoded in EBCDIC, they are in
      fact encoded using the Display Electronics Unit (DEU) character
      set.&nbsp; If you're curious what's in an object file, I have
      provided a program that can parse the object file for you:<br>
    </p>
    <blockquote>
      <pre>readObject101S.py cards.bin<br></pre>
    </blockquote>
    The BFS version of the HAL/S compiler is entirely different in this
    respect.&nbsp; It used an entirely different linker, PILOT, which
    stood for Program Integration and Loading Tool.&nbsp; Moreover, the
    BFS compiler outputs object code in the form of a PDS (Partitioned
    Data Set), cards/, which is in PILOT-compatible format.&nbsp; There
    is very little information available about PILOT, and thus I have no
    useful PILOT-compatible tools to offer you at this time.<br>
    <p>Rather than compiling HELLO.hal using the command given earlier,
      I'd be more likely to compile it using the command</p>
    <font size="+1"> </font>
    <blockquote>
      <pre><font size="+1" color="#663300">HALSFC HELLO.hal TEST "LIST</font><font size="+1"><font color="#663300">,NOTABLES,LISTING2"</font><br></font></pre>
    </blockquote>
    <p>The difference, you'll recall, is that TEST additionally performs
      some verification of the compiler results, and that TEST requires
      NOTABLES. (NOTABLES simply means not to run the compiler's PASS3
      and PASS4, which we weren't even looking at in this example
      anyway.&nbsp; LISTING2 means to produce a secondary, "unformatted"
      source-code listing.)&nbsp; In fact, here are the messages we get,<br>
    </p>
    <blockquote>
      <pre>======================================================<br>PASS1 cross-comparison test:<br>Files pass1A.rpt and pass1pA.rpt are identical<br>Files FILE1.bin and halmat.bin are identical<br>Files LISTING2.txt and listing2.txt are identical<br>======================================================<br>Compilation successful. Results in "HALSFC Wed 08-21-2024  7-39-24.00.results".<br></pre>
    </blockquote>
    <p>What we're told is that essentially the same compilation has been
      performed, but that additionally we gained some confidence that
      the various of the compiler outputs are correct in the sense that
      the two compilers available to us, <b>HALSFC</b> and <b>HAL_S_FC</b>,
      produce identical results, even down to the reports they
      generate.&nbsp; By the way, the secondary listing triggered by the
      LISTING2 compiler-option looks like this:<br>
    </p>
    <blockquote>
      <pre>1  H A L   C O M P I L A T I O N   --   P H A S E   1   --   U N F O R M A T T E D   S O U R C E   L I S T I N G             PAGE 1<br>-        D| EBUG `D`E`F                                                                    | 1    <br>0      1 M|                                                                                | 2    <br>0      1 M| HELLO: PROGRAM;                                                                | 3    HELLO<br>0      1 M|    DECLARE I INTEGER;                                                          | 4    HELLO<br>0      2 M|    DECLARE MY_NAME CHARACTER(20) INITIAL('RON BURKEY');                        | 5    HELLO<br>0      3 M|    DECLARE INTEGER, J;                                                         | 6    HELLO<br>0      4 M|    REPLACE PRINTER BY "6";                                                     | 7    HELLO<br>0      5 M|    WRITE(PRINTER) 'THE BEGINNING';                                             | 8    HELLO<br>0      6 M|    DO FOR I = 1 TO 5;                                                          | 9    HELLO<br>0      7 M|       WRITE(PRINTER) I, 'HELLO, WORLD!';                                       | 10   HELLO<br>0      8 M|       DO FOR J = 2 TO 8 BY 2;                                                  | 11   HELLO<br>0      9 M|          WRITE(PRINTER) J, MY_NAME, 'SAYS ISN''T THIS FUN?';                   | 12   HELLO<br>0     10 M|       END;                                                                     | 13   HELLO<br>0     11 M|    END;                                                                        | 14   HELLO<br>0     12 M|    WRITE(6) 'THE END';                                                         | 15   HELLO<br>0     13 M| CLOSE HELLO;                                                                   | 16   HELLO<br></pre>
    </blockquote>
    <p>The characters in column 1 of this report are so-called <a
        moz-do-not-send="true" href="#ANSI">ANSI control characters, as
        described later</a>, and they affect the format when the report
      is printed on an IBM line-printer, assuming anyone had such a
      thing on which to print the report.<br>
    </p>
    <h1><a name="templib"></a>Template Libraries</h1>
    <p>The so-called <i>template library</i>, not surprisingly, stores
      "templates".&nbsp; Stereotypical examples of templates are a&nbsp;
      description of a HAL/S <tt>PROCEDURE</tt> in term of it
      parameters, a <tt>FUNCTION</tt> in terms of its parameters and
      return value, or a <tt>BASED</tt> structure in terms of its field
      hierarchy. &nbsp; It often happens in HAL/S that an object like a
      <tt>PROCEDURE</tt> is defined in one compilation unit, but
      actually used in different compilation units.&nbsp; The template
      of the <tt>PROCEDURE</tt> tells these other compilation units
      using it what legal usages are supposed to look like.&nbsp; Often,
      HAL/S source code gathers together many of these kinds of
      definitions with a so-called <tt>COMMON</tt> block, which when
      compiled may then be associated with lots of templates.<br>
    </p>
    <p>Thus HAL/S templates are similar in concept to the "function
      prototypes" and <tt>struct</tt> object definitions often found in
      C-language "header files", with the difference being that in HAL/S
      these are all gathered together into a central library rather than
      being distributed across multiple header files.&nbsp;
      Additionally, the HAL/S compiler manages the template library and
      (optionally) adds all of the templates to it, as opposed to the
      C-language process of having programmers manually create the
      conceptually-similar header files.&nbsp; Another innovation in
      HAL/S is that each template has a version code (from 1 to 255), so
      that if the template for a given type of object changes over time
      (say, because a new parameter is introduced for a given <tt>PROCEDURE</tt>),


      both templates can reside in the library simultaneously.<br>
    </p>
    <p>When using <b>HALSFC</b>, the template library itself is in the
      form of a folder called TEMPLIB/ (or TEMPLIBB/ for BFS) and a file
      called TEMPLIB.json (or TEMPLIBB for BFS), both residing in the
      current working directory.&nbsp; By default, <b>HALSFC</b> will
      only <i>read</i> templates from the library, but if the TEMPLATE
      parameter is added to the list of compiler options, as in<br>
    </p>
    <blockquote>
      <pre><font size="+1" color="#663300">HALSFC HELLO.hal TEST "TEMPLATE,LIST</font><font size="+1"><font color="#663300">,NOTABLES,LISTING2"</font></font></pre>
    </blockquote>
    <p>then the library will also be updated with templates for the file
      being compiled.&nbsp; When compiling a standalone program like
      HELLO.hal in the example above, there's really no reason to deal
      with the template library at all.&nbsp; But when building a
      project consisting of multiple HAL/S files, the library will
      essentially be unavoidable.<br>
    </p>
    <p>Unfortunately, dealing with the template library comes with some
      headaches, necessitating some care in dealing with them.&nbsp;
      Here's a list of various handling issues you may need to be aware
      of at some point:<br>
    </p>
    <ul>
      <li>When beginning a sequence of compilations of related HAL/S
        source-code files, you'll often want to start with clean
        configuration that involves an empty template library.&nbsp;
        Cleaning a template library out of the current working directory
        involves the following two steps:</li>
      <ul>
        <li>Delete the folder TEMPLIB/ (or TEMPLIBB/ for BFS). <br>
        </li>
        <li>Create or replace the file TEMPLIB.json (or TEMPLIBB.json
          for BFS) with a file containing just the string '<tt>{}</tt>'
          (without the quotation marks).</li>
      </ul>
      <li>HAL/S files for which templates need to be created must be
        compiled <i>before</i> the HAL/S files that need those
        templates.<br>
      </li>
      <li>The folder TEMPLIB/ (or TEMPLIBB/) is maintained by the full
        version of the HAL/S compiler, whereas the file TEMPLIB.json (or
        TEMPLIBB.json) is maintained by the alternate version of the
        compiler (HAL_S_FC.py) that's invoked only by the <b>HALSFC</b>
        option TEST.&nbsp; In general, though, in spite of having very
        different implementations, TEMPLIB/ and TEMPLIB.json contain
        identical information. &nbsp; If these two versions of the
        template library are not synchronized, then <b>HALSFC</b> TEST
        operations may begin to fail because the two versions of the
        compiler are no longer maintaining their versions of the library
        in the same way, and the reports being generated will reflect
        those differences.&nbsp; It may be possible to regain
        synchronization simply by repeating a <b>HALSFC</b> TEST
        operation which has failed ... but that's distressing when it
        happens, if you're the suspicious type (like me); you can help
        but asking if that's <i>really</i> the reason the comparison
        failed!&nbsp; You can, of course, compare the compiler reports
        (pass1.rpt for the main compiler vs pass1p.rpt for the alternate
        compiler); look at the final line in the report, which is
        usually the culprit in this situation.&nbsp; But it is better, I
        think, simply to always use TEST whenever you use the compiler
        TEMPLATE option, so that the libraries never get the chance to
        become unsynchronized.</li>
    </ul>
    <p> </p>
    <h1><a name="Installation"></a>Installation of HALSFC</h1>
    <p>I daresay that the easiest approach is just to install <a
        moz-do-not-send="true" href="download.html" style="">a Virtual
        AGC virtual-machine image</a>, and run this VM under VirtualBox,
      VMware, QEMU, Hyper-V, Parallels, or whatever.&nbsp; This gives
      you the entire system of Virtual AGC software (including the
      Shuttle development tools), preinstalled and preconfigured on the
      VM.&nbsp; But if you don't have the admittedly large amount of
      space needed for the VM, or simply don't want to work inside of a
      Linux VM, you can instead follow the installation instructions
      below for Linux, Mac OS, or Windows.<br>
    </p>
    <ol>
      <li><a moz-do-not-send="true" href="XPL-I.html#Installation">Install


















          <b>XCOM-I</b>, per the instructions on the XPL/I page</a>.</li>
      <li>Perhaps you can download pre-built <b>HALSFC</b>
        executables.&nbsp; I give you no guarantee that they'll work,
        and you run the risk of not necessarily getting the most
        up-to-date version of the compiler.&nbsp; If those things bother
        you (they should!) then go on to step 3 instead.&nbsp; But if
        you do download them, and if the stuff described in the
        preceding section works for you after doing so, then you're all
        done with the installation.<br>
      </li>
    </ol>
    <blockquote>
      <ul>
        <li>Windows:&nbsp; <a moz-do-not-send="true"
            href="Downloads/HALSFC-EXE.zip">Download the compiler's exe
            files from here</a>, unzip the zipfile, and put the exe
          files somewhere in your PATH.</li>
        <li>Mac OS:&nbsp; <a moz-do-not-send="true"
            href="Downloads/HALSFC-MAC.zip">Download the compiler's
            executable files from here</a>, unzip the zipfile, and put
          the files somewhere in your PATH.</li>
        <li>Linux:&nbsp; I have faith that you don't need any
          shortcuts!&nbsp; Well, that and the fact that it's tough to
          insure that you have all of the libraries you need to run any
          executables I give you without putting a lot more work into it
          than I'm willing to countenance.&nbsp; Move on to step 3.<br>
        </li>
      </ul>
    </blockquote>
    <ol start="3">
      <li>(Optional but recommended.)&nbsp; Verify that <b>XCOM-I</b>
        works, by following the instructions appropriate to your
        computer type, as given in the following sections of the XPL/I
        page:</li>
    </ol>
    <blockquote>
      <ul>
        <li><a moz-do-not-send="true"
            href="XPL-I.html#testTheInstallation">Testing the
            Installation</a></li>
        <li><a moz-do-not-send="true" href="XPL-I.html#sim360">Emulating
            the IBM System/360 CPU</a></li>
        <li><a moz-do-not-send="true" href="XPL-I.html#compilingXCOM">Insane


















            Bootstrapping!</a></li>
      </ul>
    </blockquote>
    <ol start="4">
      <li>Build HALS/S-FC executable files, using <a
          moz-do-not-send="true" href="XPL-I.html#halsfc">the
          instructions on the XPL/I page</a>.</li>
    </ol>
    <p>For the true enthusiast using Microsoft Windows, I've found a
      peculiar <a moz-do-not-send="true"
href="https://marketplace.visualstudio.com/items?itemName=ZaneHambly.hals-lsp">extension





        for Microsoft Visual Studio, namely "HAL/S NASA Space Shuttle
        Language", by Zane Hambly</a>.&nbsp; Of course, the extension
      only helps with editing code, providing such stuff as syntax
      highlighting.&nbsp; There's no compiler, emulator, or anything of
      that nature.&nbsp; Not being a Windows user myself, I've naturally
      not tried out this extension personally, so I'm in no position to
      evaluate it beyond noting the fun fact of its existence.<br>
    </p>
    <ol start="4">
    </ol>
    <h1><a name="wildThings"></a>Where the Wild HAL/S Files Are</h1>
    <p>Naturally, the most-important HAL/S source-code files for us <i>would</i>
      be the PASS and BFS source-code files of the Space Shuttle.&nbsp;
      Or Galileo source code.&nbsp; But ... ITAR (maybe)!&nbsp;
      Government and its cowardly institutionalization of CYA, eh?&nbsp;
      What can you do?&nbsp; Well, I'm as timid as any government
      bureaucrat is, so who am I to criticize?&nbsp; I knuckle under and
      keep the code secret too.&nbsp; But I do look forward to the time
      when I'm allowed to freely post PASS and BFS source code for you,
      or when somebody else lifts the burden from my shoulders and does
      it for me. </p>
    <p>Whilst awaiting some unexpected outbreak of common sense,
      however, it would be nice to have some HAL/S source-code files
      other than files like HELLO.hal that we have to write for
      ourselves!&nbsp; Fortunately, several groups of source-code files
      are available in the Virtual AGC source tree:<br>
    </p>
    <ul>
      <li><a moz-do-not-send="true"
href="https://www.ibiblio.org/apollo/Shuttle/Programming%20in%20HAL_S%20Sept%201978.pdf">Ryer's





          book <i>Programming in HAL/S</i> 2nd edition</a> (or <a
          moz-do-not-send="true"
href="https://www.ibiblio.org/apollo/Shuttle/NASA-CR-151872%20-%20Programming%20in%20HAL-S.pdf">first





          edition</a>) is a rich source of source code and documentation
        for it.&nbsp; <a moz-do-not-send="true"
href="https://github.com/virtualagc/virtualagc/tree/master/yaShuttle/Source%20Code/Programming%20in%20HAL-S">A
          hundred or so short source-code files have been extracted from
          Ryer</a>.</li>
      <li>One of the Intermetrics crew sent in a dozen or so unofficial
        but contemporary (though alas undocumented) <a
          moz-do-not-send="true"
href="https://github.com/virtualagc/virtualagc/tree/master/yaShuttle/Source%20Code/BENCH">source-code





          files intended to demonstrate capabilities of HAL/S</a>.<br>
      </li>
      <li><a moz-do-not-send="true"
          href="https://www.ibiblio.org/apollo/Shuttle/19740017615.pdf#page=35">The


















          HAL-S-360 Users Manual</a> provides <a moz-do-not-send="true"
href="https://github.com/virtualagc/virtualagc/tree/master/yaShuttle/Source%20Code/HAL-S-360%20Users%20Manual">a
          source-code file called DEMO.hal</a>.&nbsp; <br>
      </li>
    </ul>
    <blockquote><font size="-1"><b>Aside:</b>&nbsp; The Users Manual's
        description of DEMO.hal is also interesting because it also
        shows us what the original compiler listing was supposed to look
        like.&nbsp; That listing is not <i>quite</i> the same as ours
        today.&nbsp; But given that it was a version of the HAL/S
        compiler 30 years younger than ours, and that the compiler used
        was HAL/S-360 rather than HAL/S-FC, it's hardly surprising that
        there are some differences.</font><br>
    </blockquote>
    There may be other HAL/S source among our collected documentation
    (or elsewhere!) that I've overlooked.&nbsp; If you are aware of any
    — or for that matter, <i>have</i> any! — let me know.<br>
    <ol start="4">
    </ol>
    <p> </p>
    <ul>
    </ul>
    <h1><a name="differences"></a>Some Differences Between the Old and
      the New</h1>
    <h2><a name="ebcdic"></a>EBCDIC vs ASCII<br>
    </h2>
    <img moz-do-not-send="true" src="encodingDEU.png" alt="" width="638"
      height="468" align="right">The original HAL/S compiler, running on
    an IBM System/360 computer as it did, expected that the underlying
    encoding of textual characters such as letters and numbers was <a
      moz-do-not-send="true" href="https://en.wikipedia.org/wiki/EBCDIC">EBCDIC</a>.&nbsp;

















    EBCDIC, to put it mildly, is no longer a common encoding for
    character sets.&nbsp; The current common practice, which I'll stick
    my neck out and assume will continue into the future, is for
    character sets to be encoded in what's known as UTF-8, a scheme in
    which a variable number of bytes (from 1 to 6) is used for each
    unique glyph, but that the vast majority of all software source code
    is encoded in the 7-bit subset of UTF-8 known as <a
      moz-do-not-send="true" href="https://en.wikipedia.org/wiki/ASCII">ASCII</a>.<br>
    <br>
    In the case of HAL/S source code, as originally specified in the
    early 1970's, it so happens that the legal character set contained
    basically:<br>
    <ul>
      <li>All printable characters <i>common</i> to both EBCDIC and
        ASCII.</li>
      <li>Except that the ASCII characters carat (^), tilde (~),
        backtick (`), and backslash (\) were not legal.</li>
      <li>Whereas the non-ASCII characters logical-NOT (¬), U.S. cent
        (¢), and the punchcard-but-non-EBCDIC "end-of-file" character
        were legal.</li>
    </ul>
    <p>I say "basically", because technically there are some quibbles
      about some of the characters (^, \, and end-of-file) with which I
      will not bore you.&nbsp; But I will mention that in spite of the
      technical illegality of it, legacy HAL/S and XPL source code often
      already uses either '~' or '^' in place of '¬'.<br>
    </p>
    <p> </p>
    <p>Given these facts and the obvious technical advantages (for
      portability now and into the future) of using a 7-bit character
      set for everything, the modern tool-set:<br>
    </p>
    <ul>
      <li>Expects HAL/S source code to be provided in 7-bit ASCII, with
        the caveats mentioned below.&nbsp; Specifically, EBCDIC source
        code is not accepted.<br>
      </li>
      <li>Uses '~' in place of both '¬' and '^'.&nbsp; If either of the
        latter is encountered in HAL/S source code, it is translated to
        the former.</li>
      <li>Uses '`' in place of '¢', again with automatic translation to
        the former.</li>
      <li>Uses '\' in place of end-of-file character, though this is
        very, very rare indeed.</li>
    </ul>
    <p>These restrictions apply only to HAL/S source code.&nbsp; Any
      human-readable reports generated by the compiler are pure 7-bit
      ASCII with the substitutions mentioned, and may contain tab
      characters.&nbsp; This should <i>not</i> be taken to imply that
      character data is maintained internally by the compiler in ASCII
      encoding, nor that all files output by the compiler have text
      encoded in ASCII.&nbsp; In fact, that's not true:&nbsp;
      Internally, the compiler uses mostly EBCDIC, and other than files
      which are human-readable, characters are encoded in the same
      manner as the original compiler encoded them.&nbsp; For example,
      textual data in AP-101S object-code files uses Display Electronics
      Unit (DEU) encoding (seen in the figure to the right), which is
      neither EBCDIC nor ASCII, though in some ways being ASCII-like.<br>
    </p>
    <h2><a name="common2"></a>COMMON Memory</h2>
    <p>Much of the data transferred from one compiler pass to the next
      resided in so-called <font color="#663300"><code>COMMON</code></font>
      memory.&nbsp; I refer here not to the HAL/S compilation unit known
      as a <font color="#663300"><code>COMPOOL</code></font>, but
      rather to sections of IBM 360 memory which were expected to be
      left intact when one pass of the compiler (say, PASS2) terminated
      and the next pass of the compiler (say, PASS3) was loaded and
      began executing.&nbsp; Given that the modern HAL/S compiler
      implements each pass of the compiler as a stand-alone program, no
      such continuity of physical memory is possible.&nbsp; So some
      other means must be used to preserve this data.<br>
    </p>
    <p>The modern compiler handles this by storing <font
        color="#663300"><code>COMMON</code></font> data in files.&nbsp;
      Upon termination, a compiler pass writes an output-file describing
      the state of <font color="#663300"><code>COMMON</code></font>
      memory.&nbsp; And similarly, upon startup, a compiler pass reads
      and input-file describing the state of <font color="#663300"><code>COMMON</code></font>
      memory.&nbsp; The compiler maintains a model of the IBM 360 24-bit
      memory space, and the addresses of all <font color="#663300"><code>COMMON</code></font>
      data remain the same in this 24-bit model throughout any
      compilation run.<br>
    </p>
    <h2><a name="overstrike"></a>Overstruck Lines in Reports</h2>
    <p>Since the original compiler physically printed reports and could
      control whether or not the printer advanced the paper, it was
      capable of overstriking those printed lines with decorations such
      as underlines.&nbsp; The corresponding reports output by the
      modern compiler are plain ASCII text, and overstriking is not
      possible.&nbsp; For example, in a source-code listing, expansion
      of a macro was originally indicated by underlining the <u>macro</u>.<br>
    </p>
    <p>The modern compiler mimics the original underlining with a line
      of text, such as<br>
    </p>
    <blockquote>
      <pre>THIS IS MY <u>UNDERLINED</u> TEXT<br></pre>
    </blockquote>
    <p>with <i>two</i> lines of text, thusly:<br>
    </p>
    <blockquote>
      <pre>THIS IS MY UNDERLINED TEXT<br>           ^^^^^^^^^^<br></pre>
    </blockquote>
    <p>While this nicely conveys the underlining effect, I think, the
      fact that some single printed lines are replaced by dual printed
      lines does affect the vertical alignment and the pagination.<br>
    </p>
    <h1><a name="dangers"></a>Dangers Lurking in <i>New</i> HAL/S
      Source Code</h1>
    Legacy HAL/S source code is, of course, syntactically perfect and
    error-free.&nbsp; By which I mean that if it <i>used</i> to compile
    and work properly in the old days using the old development tools,
    then pragmatically speaking, it behooves us to make sure that the
    new development tools can work with the identical HAL/S source code
    on the same basis, expecting equally-good results.&nbsp; A corollary
    is that if there are any traps to be avoided in the special
    developers' dance we have to perform when writing HAL/S source code,
    the old developers already did that dance when they wrote the legacy
    code, but they seldom left any warnings behind for us when they did
    so and thus those traps are still lurking for <i>us</i> if we
    choose to write <i>new</i> HAL/S code.<br>
    <br>
    Oh, and this section is pretty technical, by the way, but the good
    news is that you can probably <a moz-do-not-send="true"
      href="#options1">just nod wisely and proceed to the next section</a>
    rather than reading it!<br>
    <br>
    Of course, we already heard about some of these traps, such as the
    character set and character encoding, in the preceding
    section.&nbsp; And many others are covered in HAL/S documentation,
    even if not flagged there as being traps.&nbsp; Others are just pure
    traps that you have way to prepare yourself for.&nbsp; Still, it's
    instructive to observe some of the traps we see naive developers
    innocently falling into easily when trying to write HAL/S source
    code without feedback from working development tools:<br>
    <ul>
      <li><b>TAB characters.</b>&nbsp; There was no such thing as a tab
        character on a punch card, and the HAL/S compiler recognizes no
        such character.&nbsp; Of course, no legacy HAL/S code contains
        tab characters, thus preventing any problem, but your text
        editor might sneak some tabs into source code when you edit
        it.&nbsp; The compiler works around this potential problem by
        replacing each of the tab characters it finds on in input card
        with a single space character.&nbsp; This is probably not what
        you intended, particularly if any of these tabs are within
        quoted strings, and could conceivably make the code uncompilable
        if there are punch-card sequence numbers in columns 73-80 that
        would in effect be moved into earlier columns of the card.&nbsp;
        However, without understanding the settings of whatever
        text-editing program you are using, there's no way for the
        compiler to replace tabs in a reliable manner.&nbsp; That being
        the case, it's highly recommended simply that you <i>not</i>
        put any tabs into your HAL/S source code!</li>
      <li><b>Compilation Units.</b>&nbsp; Any given file of HAL/s source
        code contains a <i>single</i> compilation unit:&nbsp; <tt>PROGRAM</tt>,
        <tt>PROCEDURE</tt>, <tt>FUNCTION</tt>, <tt>COMMON</tt>,
        etc.&nbsp; Separate compilation units are in separate
        files.&nbsp; Of course, definitions of blocks like <tt>PROCEDURE</tt>,
        <tt>FUNCTION</tt>, etc., can be local to another block, so in
        that sense there can be multiple such blocks included within the
        same file.</li>
      <li><b>Don't use the fancy multi-line "mathematical" format when
          writing code.</b>&nbsp; It's great as an automatically-created
        format for generated program listings, but not for source-code
        input to the compiler. <br>
      </li>
      <li><b>Column 1 is special.</b>&nbsp; Use it only for C (full-line
        comment), D (compiler directive), or a blank space (normal line
        of code).<br>
      </li>
      <li><b>The symbol </b><b><tt>*</tt></b><b> is </b><b><i>not</i></b><b>
          a multiplication sign.</b>&nbsp; There is no multiplication
        sign!</li>
      <li><b>HAL/S documentation is sometimes wrong!</b>&nbsp; Or put
        differently, the HAL/S language as implemented by the
        Intermetrics/USA HAL/S-FC compiler sometimes doesn't match the
        documentation.&nbsp; I'll discuss whatever examples I discover
        below.</li>
    </ul>
    <blockquote>
      <p>I've actually found only one case so far where the PFS version
        of HAL/S-FC flat-out does something that contradicts the HAL/S
        documentation.&nbsp; That's something we might call "the illegal
        event-expression problem" (<a moz-do-not-send="true"
href="https://github.com/virtualagc/virtualagc/issues/1270#issuecomment-3835567355">see


          GitHub issue #1270 for more info</a>), error code E102.&nbsp;
        (The BFS version of the compiler has this problem too.&nbsp; But
        as you'll see in the next bullet point, the BFS version does a <i>lot</i>
        of stuff that contradicts the HAL/S documentation, so it hardly
        surprises us the way PFS-version problems do!)&nbsp; This is a
        tricky problem to describe, because explaining here what an <i>event


          expression</i> is would probably take us too far afield, on a
        top of which you're likely not too interested in them at this
        moment.&nbsp; Suffice it to say that an event expression is
        basically any <i>boolean expression</i> — such as <tt>A AND
          NOT (B OR C)</tt> — in which rather than being boolean
        variables, the entities <tt>A</tt>, <tt>B</tt>, and <tt>C</tt>
        are <i>event variables</i> or <i>process variables</i>.&nbsp;
        Again, don't worry about what those are.&nbsp; Suffice it to
        know that these things all relate to scheduling <i>tasks</i> to
        be spontaneously executed when <i>events</i> occur, or to be
        paused while waiting for events to occur.&nbsp; All available
        HAL/S documentation agrees that the syntactical forms of <i>event


          expressions</i> and <i>boolean expressions</i> are the
        same.&nbsp; Indeed, PASS1 of HAL/S-FC, which is responsible for
        all parsing of HAL/S source code, <i>processes</i> event
        expressions in the form of arbitrary boolean expressions with
        flying colors.&nbsp; Not so PASS2, which is HAL/S-FC's
        object-code generator!&nbsp; Certain event expressions move
        through PASS2 with ease, while others fail PASS2 with an error
        message that looks like the following (though likely with a
        different "HAL/S STATEMENT" number):</p>
      <blockquote>
        <pre>***** E102     ERROR #1 OF SEVERITY 2 OCCURRED ***** <br>*****  DURING CONVERSION OF HAL/S STATEMENT 6.***** <br>***** INVALID EVENT EXPRESSION                                                        <br>***** CONVERSION ABANDONED<br></pre>
      </blockquote>
      <p>For instance, the example of <tt>A AND NOT (B OR C)</tt> that
        we saw above would trigger an E102 error if used as an event
        expression, even though it's perfectly fine as a boolean
        expression, HAL/S documentation be damned!&nbsp; Here's a
        summary of the event-expression formats that will be okay as far
        as PASS2 is concerned:<br>
      </p>
      <ul>
        <li>Expressions containing no logical operators at all.</li>
        <li>Expressions containing <i>only</i> <tt>NOT</tt> operators
          (or the aliases&nbsp; <tt>~</tt> or <tt>¬</tt>)</li>
        <li>Expressions containing <i>only</i> <tt>AND</tt> operators
          (or the alias <tt>&amp;</tt>)</li>
        <li>Expressions containing <i>only</i> <tt>OR</tt> operators
          (or the alias <tt>|</tt>)</li>
      </ul>
      <p>In other words, it's illegal to mix different types of logical
        operators within a single event expression.&nbsp; That sounds
        mighty fishy, so it would be fair of you to be suspicious that
        this is not a real failure in Intermetrics/USA's PASS2, but
        instead is my failure somehow in my compilation of it into our
        "modern" HAL/S compiler <b>HALSFC</b>.&nbsp; Indeed, I was
        suspicious myself.&nbsp; But I'm innocent!&nbsp; Tracking down
        where error E102 is generated in the original PASS2 source code
        (PASS2.PROCS/GENERATE.xpl), we discover the following program
        comments:</p>
      <pre>               /* OR OPERATOR IS BEING PROCESSED. IF THE      /*CR13220*/<br>               /* AND OPERATOR HAS NOT PREVIOUSLY BEEN USED   /*CR13220*/<br>               /* THEN CONTINUE, ELSE EMIT E102 ERROR.        /*CR13220*/<br><br>               /* NOT OPERATOR IS BEING PROCESSED. THE NOT    /*CR13220*/<br>               /* OPERATOR MAY NOT BE USED IN AN EXPRESSION   /*CR13220*/<br>               /* WITH MORE THAN 1 EVENT VARIABLE OR WITH     /*CR13220*/<br>               /* MULTIPLE NOT OPERATOR. IF THE NOT           /*CR13220*/<br>               /* OPERATOR IS USED ILLEGALLY EMIT E102 ERROR. /*CR13220*/<br><br>               /* AND OPERATOR IS BEING PROCESSED. IF THE     /*CR13220*/<br>               /* OR OPERATOR HAS NOT PREVIOUSLY BEEN USED    /*CR13220*/<br>               /* THEN CONTINUE. ELSE EMIT E102 ERROR.        /*CR13220*/<br></pre>
      So these E102 errors really are due to a deficiency in the
      original Intermetrics/USA PASS2, insofar as consistency with HAL/S
      documentation is concerned.&nbsp; In fact, the notation
      /*CR13220*/, when compared to comments elsewhere in GENERATE.xpl,
      tells us that generation of E102 was added to HAL/S-FC on
      2001-01-15 in release 31V0/16V0.&nbsp; Before that, I can only
      assume that PASS2 would presumably fail in some mysterious way
      without even a relevant error message as soon as it encountered an
      event expression it didn't like.&nbsp; Whee!<br>
    </blockquote>
    <ul>
      <li><b>The BFS version of the HAL/S language, and of the HAL/S
          compiler, are second-class citizens!</b>&nbsp; By that I mean
        that they lack features that the PFS version of the language
        has::</li>
    </ul>
    <blockquote>
      <blockquote><b><font size="-1">Aside:</font></b><font size="-1">&nbsp;&nbsp;

          Some of the issues described below turn out to be documented
          in the "<a
            href="Shuttle/hal-s_compiler_system_specification.pdf#page=485"
            moz-do-not-send="true">HAL/S Compiler System Specification</a>",

          section 8.0, "PASS/BFS Differences".</font><br>
      </blockquote>
    </blockquote>
    <ul>
      <ul>
        <li>In almost every compilation unit (or at least in most <code>PROGRAM</code>,
          <code>PROCEDURE</code>, or <code>FUNCTION</code> units) using
          the BFS version of the HAL/S compiler, an instance of a <code>%SVCI(<i>N</i>)</code>
          macro should be the last statement preceding the <code>CLOSE</code>
          of the compilation unit.&nbsp; PASS1 of the compiler, which
          parses your source code, won't care about this, and hence
          you'll get no warning until PASS2, the object-code generator,
          that anything's wrong.&nbsp; What is <code>%SVCI(<i>N</i>)</code>,
          you ask?&nbsp; I believe that <code>%SVCI</code> is a variant
          of the <code>%SVC</code> macro, which inserts an <a
            moz-do-not-send="true"
            href="Shuttle/Shuttle%20GPC%20Software%20Model%20AP-101S.pdf">AP-101S

            assembly language instruction</a> <code>SVC</code>
          (Supervisor Call) wherever it appears. &nbsp; What are the
          legal values of <i><code>N</code></i>?&nbsp; Table 8-1 in the
          "HAL/S Compiler System Specification" lists legal values for <code>%SVC</code>,
          albeit not for <code>%SVCI</code>.&nbsp; -1 and 0 are
          definitely legal values for <code>%SVCI</code> and seem to
          have the same interpretations as for <code>%SVC</code>.&nbsp;
          Until&nbsp; more-definitive advice comes along, I'd suggest
          just having <code>%SVCI(0)</code> as the last statement
          before the <code>CLOSE</code> of each compilation unit.&nbsp;
          PASS2 will do essentially that anyway if you leave out <code>%SVCI</code>
          entirely, but it will complain about doing so, and nobody
          likes a whiny compiler.</li>
        <li>BFS apparently does not have any of the "real-time"
          functionality designed into HAL/S.&nbsp; In other words, most
          or all of what you find in <a moz-do-not-send="true"
href="https://www.ibiblio.org/apollo/Shuttle/Programming%20in%20HAL_S%20Sept%201978.pdf#page=229">Ryer's


            Chapter 12, "Real-Time Statements"</a> isn't supported by
          the BFS version of the HAL/S compiler.&nbsp; This includes the
          keywords <code>SCHEDULE</code>, <code>TERMINATE</code>, <code>CANCEL</code>,
          <code>WAIT</code>, <code>UPDATE</code>, <code>PRIORITY</code>,
          <code>SIGNAL</code>, <code>SET</code>, <code>RESET</code>, <code>SEND</code>,
          <strike><code>ERROR</code></strike> (see next bullet point), <code>RUNTIME</code>,
          <code>CLOCKTIME</code>, <code>DATE</code>, <code>PRIO</code>,
          <code>ERRGRP</code>, and <code>ERRNUM</code>, and <code>EXCLUSIVE</code>.<br>
        </li>
        <li>The BFS form of the compiler doesn't allow a number of
          features for the error trap ("<code>ON ERROR</code> ...") that
          standard HAL/S and the PFS form of the compiler do:</li>
        <ul>
          <li>In BFS, the <code>ON ERROR</code> feature supports <i>only</i>
            the form "<code>ON ERROR <i>statement</i>;</code>", and
            does not support the forms "<code>ON ERROR$(<i>group</i>:) <i>statement</i>;</code>"
            or "<code>ON ERROR$(<i>group</i>:<i>number</i>) <i>statement</i>;</code>"
            or "<code>ON ERROR SYSTEM;</code>" or "<code>ON ERROR
              IGNORE;</code>".</li>
          <li>In BFS, <code>ON ERROR</code> can only be in a <code>PROGRAM</code>
            or <code>TASK</code> block (and not within <code>PROCEDURE</code>
            or <code>FUNCTION</code>).<br>
          </li>
          <li>In BFS, only one <code>ON ERROR</code> is allowed per <code>PROGRAM</code>
            or <code>TASK</code>.</li>
        </ul>
      </ul>
    </ul>
    <blockquote> </blockquote>
    <p> </p>
    <p> </p>
    <h1><a name="options1"></a>Compiler Options, Part One</h1>
    <p>There are a number of options that are specific to the modern
      HAL/S compiler versus the original HAL/S compiler (which naturally
      didn't have these "modern" options).&nbsp; I'll resist the
      temptation of going through those in detail.&nbsp; If you're
      interested, I'd suggest using the command<br>
    </p>
    <blockquote>
      <pre>HALSFC-PASS1 --help<br></pre>
    </blockquote>
    <p>to get descriptions of them.&nbsp; Most of them relate to
      debugging the HAL/S compiler itself, and hence are of little value
      to anybody wishing merely to use the compiler.&nbsp; All of the
      other compiler passes (HALSFC-FLO, HALSFC-OPT, and so on) will
      list all of the same options, so you needn't look past
      HALSFC-PASS1.<br>
    </p>
    However, there are quite a few options, too, that are command-line
    replacements for what were specified to the original HAL/S compiler
    by its Job Control Language (JCL), and specifically for attaching
    various input files or output files to the various compiler
    passes.&nbsp; I'll cover those options here, briefly.&nbsp; <a
      moz-do-not-send="true" href="#filesUsed">There's a later section</a>
    that describes the uses of these file-attachment options in detail,
    <i>ad nauseum</i>.<br>
    <ul>
      <li><font color="#663300"><code>--ddi=<i>N</i>,<i>F</i>[,U][,E]</code></font>
        — This attaches an <i>input</i> file for <i>sequential</i>
        reading.&nbsp; <i><font color="#663300"><code>F</code></font></i>
        is the path to the file.&nbsp; You can think of these as being
        text files that are read in a line at a time.&nbsp; The lines
        are padded or truncated to 80 columns, as necessary.&nbsp; The <font
          color="#663300"><code>U</code></font> clause, in the unlikely
        event that it's present, means that the text should be
        automatically translated to upper case as it is read in.&nbsp;
        The optional <font color="#663300"><code>E</code></font> clause
        would be used if the input file contains EBCDIC, or more
        precisely, if the text does not need to be recoded as it is read
        in.&nbsp; But by default, the input text is assumed to be 7-bit
        ASCII and will be recoded into EBCDIC as it is read in.&nbsp;
        The compiler thinks of the file as being a numbered <i>device</i>.&nbsp;


















        The value of <font color="#663300"><code><i>N</i></code></font>
        (0 through 9) is the number of the device to which the file is
        assigned.<br>
      </li>
      <li><font color="#663300"><code>--ddo=<i>N</i>,<i>F</i>[,E]</code></font>
        — Same as <font color="#663300"><code>--ddi</code></font>, but
        for output files rather than input files.&nbsp; The <font
          color="#663300"><code>U</code></font> clause is not
        available.&nbsp; Note that the same sequential file shouldn't be
        simultaneously attached for both input and output.<br>
      </li>
      <li><font color="#663300"><code>--pdsi=<i>N</i>,<i>F</i>[,E]</code></font>
        — Same as <font color="#663300"><code>--ddi</code></font>, but
        for Partitioned Data Sets (PDS) rather than sequential
        files.&nbsp; A PDS is more similar a directory than to a file,
        thus it is implemented as a directory and <font color="#663300"><code><i>F</i></code></font>
        in this case is the name of a directory.&nbsp; A PDS has named
        members which the software can select at runtime, and it's the
        named members that act like files.</li>
      <li><font color="#663300"><code>--pdso=<i>N</i>,<i>F</i>[,E]</code></font>
        — Same as <font color="#663300"><code>--pdsi</code></font>, but
        for output rather than for input.&nbsp; The same directory can
        be attached simultaneously for both input and output.</li>
      <li><font color="#663300"><code>--raf=<i>I</i>,<i>R</i>,<i>N</i>,<i>F</i></code></font>
        — Attaches "random-access file" <font color="#663300"><code><i>F</i></code></font>
        to device number <font color="#663300"><code><i>N</i></code></font>.&nbsp;


















        Think of these as being <i>binary</i> files of fixed record
        sizes, which are read or written only in integral numbers of
        records.&nbsp; The value of <font color="#663300"><code><i>I</i></code></font>
        (<font color="#663300"><code>I</code></font>, <font
          color="#663300"><code>O</code></font>, or <font
          color="#663300"><code>B</code></font>) determines in principle
        whether the file is used for input, output, or both, but in
        practice it is always <font color="#663300"><code>B</code></font>
        for both.&nbsp; The record size is determined by <font
          color="#663300"><code><i>R</i></code></font>.&nbsp; By the
        way, note that while the <font color="#663300"><code>--ddi</code></font>,
        <font color="#663300"><code>--ddo</code></font>, <font
          color="#663300"><code>--pdsi</code></font>, and <font
          color="#663300"><code>--pdso</code></font>, options share the
        same pool of device numbers among themselves, the pool of device
        numbers for <font color="#663300"><code>--raf</code></font> is
        separate from them.&nbsp; For example, device <font
          color="#663300"><code><i>N</i>=5</code></font> for <font
          color="#663300"><code>--raf</code></font> could be reused for
        <font color="#663300"><code>--ddi</code></font> without any
        unpleasant side effects.&nbsp; Data from a random-access file
        never undergoes any recoding or translation (such as
        EBCDIC-to-ASCII or vice-versa) upon reading or writing.</li>
      <li><font color="#663300"><code>--commoni=</code><code><i>F</i></code></font>
        — Path to the file containing <a moz-do-not-send="true"
          href="#common2">the state of <font color="#663300"><code>COMMON</code></font>
          memory</a> upon program start.</li>
      <li><font color="#663300"><code>--commono=</code><code><i>F</i></code></font>
        — Same as --commoni, except that it's the state of <font
          color="#663300"><code>COMMON</code></font> at program
        termination.&nbsp; <b>Warning:</b>&nbsp; Do not use the same
        file simultaneously for both <font color="#663300"><code>--commoni</code></font>
        and <font color="#663300"><code>--commono</code></font> on the
        same compiler pass.<br>
      </li>
    </ul>
    <h1><a name="moron"></a>More on the Compiler Options</h1>
    In the preceding section, we talked about options specific to the
    modern compiler, principally as they involved attaching input- or
    output-files to the compiler.&nbsp; Now let's talk about the
    compiler options inherited from the original HAL/S compiler.&nbsp;
    There are many such options that can be presented to the HAL/S
    compiler to affect its behavior.<br>
    <br>
    These options were presented to the original compiler via a
    so-called "PARM field" in its Job Control Language (JCL).&nbsp; In
    the modern implementation, there's no such thing as JCL, so such
    options are instead provided to the compiler via the command
    line.&nbsp; For example,<br>
    <blockquote>
      <pre>HALSFC-PASS1 --parm="..." <i>etc.</i><br></pre>
    </blockquote>
    where the "..." represents a list of options, delimited by commas,
    without additional blank spaces.&nbsp; For example, <font
      color="#663300"><code>--parm="LIST,SRN,TITLE=MY COMPILER</code><code>"</code></font>.&nbsp;



















    (Yes, I said "without spaces", but I meant without spaces between
    the options.&nbsp; The space in this example is within the <font
      color="#663300"><code>TITLE</code></font> option, which has a
    value that's a string.)<br>
    <br>
    As it happens, many of the passes of the HAL/S compiler don't
    directly accept such options, but instead expect them to have been
    provided to an earlier compiler pass (such as PASS1 or PASS1B), and
    to persist throughout the remaining compiler passes via <font
      color="#663300"><code>COMMON</code></font> memory.&nbsp; If you'll
    recall the compiler report from PASS1 for the program HELLO.hal that
    I used as an example earlier, you may also recall that it began with
    a list of the options in effect for that particular program run:<br>
    <blockquote>
      <pre><font color="#663300"> PARM FIELD: LIST<br><br><br> COMPLETE LIST OF COMPILE-TIME OPTIONS IN EFFECT<br><br><br>       *** TYPE 1 OPTIONS ***<br><br>        NOADDRS<br>        NODECK<br>        NODUMP<br>        NOHALMAT<br>        NOHIGHOPT<br>          LFXI<br>          LIST<br>        NOLISTING2<br>          MICROCODE<br>        NOREGOPT<br>        NOSDL<br>        NOSREF<br>        NOSRN<br>        NOTABDMP<br>          TABLES<br>        NOTABLST<br>        NOTEMPLATE<br>        NOVARSYM<br>          ZCON<br><br><br>       *** TYPE 2 OPTIONS ***<br><br>       BLOCKSUM = 400<br>       CARDTYPE =<br>       COMPUNIT = 0<br>            DSR = 1<br>      LABELSIZE = 1200<br>         LINECT = 59<br>     LITSTRINGS = 2000<br>      MACROSIZE = 500<br>           MFID =<br>          PAGES = 2500<br>        SYMBOLS = 200<br>          TITLE =<br>       XREFSIZE = 2000</font></pre>
    </blockquote>
    In contrast, the sample compiler report from PASS2 lists no such
    parameters, and yet it partakes of some of them (such as LIST)
    selected by invoking PASS1.<br>
    <br>
    Many but not all of the allowed behavioral options are described in
    <a moz-do-not-send="true"
      href="Shuttle/HAL_S-FC%20User's%20Manual%20Nov%202005.pdf#page=65">the


















      HAL/S-FC User's Manual (section 5)</a>, but I'll give you my own
    take on them here.&nbsp; Overall, the options can be categorized in
    several ways.&nbsp; For one thing, they can be of "type 1" (meaning
    that they are mere on/off) or else of "type 2" (meaning that they
    have numerical or textual values).&nbsp; For another, they can be
    "printable" or "unprintable".&nbsp; All of the options you see in
    the compiler report above are printable; there are other options in
    effect, namely the <i>un</i>printable ones, but the unprintable
    ones weren't printed in the report.&nbsp; Moreover, each of the
    options has a default value it assumes if it's not specified
    directly.&nbsp; Each of the type-1 options (i.e., the toggles) can
    be provided either in the positive form (meaning that the option is
    enabled) or the negative form (meaning that it is disabled).&nbsp;
    For example, the LIST option is enabled by putting LIST in the parm
    field, and is disabled by putting NOLIST in the parm field, though
    it is actually disabled by default anyway.&nbsp; Most options have
    both a long and a short form by which they can be specified.&nbsp;
    LIST is a long form.&nbsp; Its corresponding short form is simply L,
    whereas the short form of NOLIST is NL.&nbsp; Or at least, that's
    the case for PASS1 and PASS1B; for PASS4, LIST has instead become a
    type-2 option, and takes a numerical value, thus having no
    corresponding NOLIST or NL.&nbsp; But LIST appears to be the only
    parameter which changes its form in this chameleon-like way.<br>
    <br>
    The table below shows the various compiler options accepted by
    different compiler passes.&nbsp; Remember that the pass at which the
    option is accepted is not necessarily the pass at which it has any
    effect, and is not even any indication that the option is used for
    anything at all.&nbsp; Some of the descriptions given in the table
    below are pasted or adapted from the HAL/S-FC User's Manual.<br>
    <br>
    <table cellspacing="2" cellpadding="2" align="center" border="1">
      <caption><font size="+1"><b>PARM-Field Options and Defaults, by
            Compiler Pass</b></font></caption> <tbody>
        <tr>
          <td valign="top" align="center"><b>Accepted in PASS1</b><br>
          </td>
          <th valign="top" align="center">Accepted in PASS1B<br>
          </th>
          <td nowrap="nowrap" valign="bottom" align="center"><b>Accepted
              in PASS4</b></td>
          <th valign="top">Description<br>
          </th>
        </tr>
        <tr>
          <td rowspan="1" colspan="4" valign="top" align="center"><i>Type


















              1, Printable</i><br>
          </td>
        </tr>
        <tr>
          <td nowrap="nowrap" valign="middle" align="center">DUMP (off,
            DP)<br>
          </td>
          <td nowrap="nowrap" valign="middle" align="center">DUMP (off,
            DP)</td>
          <td nowrap="nowrap" valign="middle" align="center"><br>
          </td>
          <td valign="top">Requests the compiler to produce a memory
            dump if internal compiler failures occur; useful only for
            compiler generation and debugging.<br>
          </td>
        </tr>
        <tr>
          <td nowrap="nowrap" valign="middle" align="center">LISTING2
            (off, L2)<br>
          </td>
          <td nowrap="nowrap" valign="middle" align="center">LISTING2
            (off, L2)<br>
          </td>
          <td nowrap="nowrap" valign="middle" align="center"><br>
          </td>
          <td valign="top">Causes PASS1 to generate an "unformatted"
            source listing, which is an output-file (listing2.txt by
            default) separate from the normal compiler report generated
            by PASS1.&nbsp; The nature of such a secondary listing is
            perhaps best illustrated by simply showing you one from our
            sample HELLO.hal program:<br>
            <pre><font color="#663300">1  H A L   C O M P I L A T I O N   --   P H A S E   1   --   U N F O R M A T T E D   S O U R C E   L I S T I N G             PAGE 1<br>-        D| EBUG `D`E`F                                                                    | 1    <br>0      1 M|                                                                                | 2    <br>0      1 M| HELLO: PROGRAM;                                                                | 3    HELLO<br>0      1 M|    DECLARE I INTEGER;                                                          | 4    HELLO<br>0      2 M|    DECLARE MY_NAME CHARACTER(20) INITIAL('RON BURKEY');                        | 5    HELLO<br>0      3 M|    DECLARE INTEGER, J;                                                         | 6    HELLO<br>0      4 M|    REPLACE PRINTER BY "6";                                                     | 7    HELLO<br>0      5 M|    WRITE(PRINTER) 'THE BEGINNING';                                             | 8    HELLO<br>0      6 M|    DO FOR I = 1 TO 5;                                                          | 9    HELLO<br>0      7 M|       WRITE(PRINTER) I, 'HELLO, WORLD!';                                       | 10   HELLO<br>0      8 M|       DO FOR J = 2 TO 8 BY 2;                                                  | 11   HELLO<br>0      9 M|          WRITE(PRINTER) J, MY_NAME, 'SAYS ISN''T THIS FUN?';                   | 12   HELLO<br>0     10 M|       END;                                                                     | 13   HELLO<br>0     11 M|    END;                                                                        | 14   HELLO<br>0     12 M|    WRITE(6) 'THE END';                                                         | 15   HELLO<br>0     13 M| CLOSE HELLO;                                                                   | 16   HELLO<br>0     14 M|                                                                                | 17   HELLO</font><br></pre>
            <a name="ANSI"></a>Perhaps the only thing not immediately
            clear to you would be the markings in the first column ('1',
            '-', '0').&nbsp; These are so-called <i>ANSI control
              characters</i> (plus some IBM extensions to them) that
            would have informed a line printer as to disposition of the
            line.&nbsp; These are useful to know, because HAL/S code can
            use them in <code>OUTPUT(1)</code> statements as
            well.&nbsp; Here's what I think are all their possible
            values, although not all of them are ultimately used in
            secondary listings:<br>
            <ul>
              <li>'<tt> </tt>':&nbsp; Single-space and print.</li>
              <li>'<tt>0</tt>':&nbsp; Double-space and print.</li>
              <li>'<tt>-</tt>':&nbsp; Triple-space and print.</li>
              <li>'<tt>+</tt>:&nbsp; Overstrike the preceding line.</li>
              <li>'<tt>1</tt>':&nbsp; Advance to the next page and
                print.</li>
              <li>'<tt>H</tt>':&nbsp; Don't print, but use the line as
                the heading for subsequent pages.</li>
              <li>'<tt>2</tt>':&nbsp; Don't print, but use the line as
                the subheading for subsequent pages.</li>
              <li>'E':&nbsp; (Used only by HAL_S_FC.py, unrecognized by
                HALSFC-PASS1.)&nbsp; Eject the page immediately,
                printing a new page header.&nbsp; <br>
              </li>
            </ul>
          </td>
        </tr>
        <tr>
          <td nowrap="nowrap" valign="middle" align="center">LIST (off,
            L)<br>
          </td>
          <td nowrap="nowrap" valign="middle" align="center">LIST (off,
            L)<br>
          </td>
          <td nowrap="nowrap" valign="middle" align="center"><br>
          </td>
          <td valign="top">Causes PASS2 to include AP-101S
            assembly-language for the compiled HAL/S program in the
            report it prints.&nbsp; (As you've seen above in <a
              moz-do-not-send="true" href="#report2">the PASS2 report
              generated from our sample HELLO.hal program</a>.)<br>
          </td>
        </tr>
        <tr>
          <td nowrap="nowrap" valign="middle" align="center">TRACE (on,
            TR)<br>
          </td>
          <td nowrap="nowrap" valign="middle" align="center">TRACE (on,
            TR)<br>
          </td>
          <td nowrap="nowrap" valign="middle" align="center"><br>
          </td>
          <td valign="top">(I'm not sure what TRACE does, but the
            comments in HAL/S-FC source code indicate that it is for the
            IBM 360 target only, and thus is irrelevant to AP-101S.)<br>
          </td>
        </tr>
        <tr>
          <td nowrap="nowrap" valign="middle" align="center">VARSYM
            (off, VS)<br>
          </td>
          <td nowrap="nowrap" valign="middle" align="center">VARSYM
            (off, VS)<br>
          </td>
          <td nowrap="nowrap" valign="middle" align="center"><br>
          </td>
          <td valign="top">If specified, symbol-table information about
            the variables declared in the HAL/S program will be included
            in the AP-101S object-code file(s) generated by
            PASS2.&nbsp;&nbsp; Our sample HELLO.hal program, for
            example, has declarations for the integer variables <font
              color="#663300"><code>I</code></font> and <font
              color="#663300"><code>J</code></font>, and the string
            variable <font color="#663300"><code>MY_NAME</code></font>.&nbsp;


















            Without VARSYM, while the object code would could correctly
            manipulate the data for these <font color="#663300"><code>I</code></font>,
            <font color="#663300"><code>J</code></font>, and <font
              color="#663300"><code>MY_NAME</code></font> by referencing
            their memory addresses, it would not include the symbolic
            names of <font color="#663300"><code>I</code></font>, <font
              color="#663300"><code>J</code></font>, and <font
              color="#663300"><code>MY_NAME</code></font>, nor their
            types (integer vs string), nor other interesting info about
            them.&nbsp; Such additional information would be useful, for
            example, in performing symbolic debugging of the AP-101S
            code.&nbsp; See the section on SYM records in <a
              moz-do-not-send="true"
              href="https://en.wikipedia.org/wiki/OS/360_Object_File_Format">the


















              Wikipedia article about the IBM 360 Object File Format</a>.<br>
          </td>
        </tr>
        <tr>
          <td nowrap="nowrap" valign="middle" align="center">DECK (off,
            D)<br>
          </td>
          <td nowrap="nowrap" valign="middle" align="center">DECK (off,
            D)<br>
          </td>
          <td nowrap="nowrap" valign="middle" align="center"><br>
          </td>
          <td valign="top">If specified, an additional copy (by default,
            deck.bin) of the object file produced by Phase 2 (by
            default, cards.bin or cards/) is produced.&nbsp; For the
            PASS version of the compiler, deck.bin is identical to
            cards.bin.&nbsp; For the BFS version of the compiler, the
            deck.bin differs from cards/.&nbsp; See <a
              moz-do-not-send="true" href="#filesUsed">the section about
              the files produced by the compiler</a>.<br>
          </td>
        </tr>
        <tr>
          <td nowrap="nowrap" valign="middle" align="center">TABLES (on,
            TBL)<br>
          </td>
          <td nowrap="nowrap" valign="middle" align="center">TABLES (on,
            TBL)<br>
          </td>
          <td nowrap="nowrap" valign="middle" align="center"><br>
          </td>
          <td valign="top">This option was originally intended to
            inhibit execution of PASS3 and PASS4 by specifying NOTABLES,
            when simulation and/or debugging of the object code wasn't
            needed.&nbsp; For the modern compiler, this option doesn't
            have that effect, since the various compiler passes do not
            directly chain themselves together, but are rather chained
            together by the HALSFC.sh/.bat script.&nbsp; In other words,
            today you'd control whether or not PASS3 and/or PASS4 were
            run by means of command-line parameters when invoking
            HALSFC.sh/.bat.&nbsp; See <a moz-do-not-send="true"
              href="#TestDrive">the "test drive" section</a>.<br>
          </td>
        </tr>
        <tr>
          <td nowrap="nowrap" valign="middle" align="center">TABLST
            (off, TL)<br>
          </td>
          <td nowrap="nowrap" valign="middle" align="center">TABLST
            (off, TL)<br>
          </td>
          <td nowrap="nowrap" valign="middle" align="center">TABLST
            (off, TL) </td>
          <td valign="top">Causes PASS4 of the compiler to produce a
            formatted dump of the Simulation Data File.<br>
          </td>
        </tr>
        <tr>
          <td nowrap="nowrap" valign="middle" align="center">ADDRS (off,
            A)<br>
          </td>
          <td nowrap="nowrap" valign="middle" align="center">ADDRS (off,
            A)<br>
          </td>
          <td nowrap="nowrap" valign="middle" align="center"><br>
          </td>
          <td valign="top">Causes the Simulation Data Files (SDF)
            produced to include statement address information.<br>
          </td>
        </tr>
        <tr>
          <td nowrap="nowrap" valign="middle" align="center">SRN (off)<br>
          </td>
          <td nowrap="nowrap" valign="middle" align="center">SRN (off)<br>
          </td>
          <td nowrap="nowrap" valign="middle" align="center"><br>
          </td>
          <td valign="top">This should be specified if the source
            program is line numbered.&nbsp; It causes the compiler to
            scan columns 1-72 only, allowing columns 73-78 to be used
            for line<br>
            numbers.&nbsp; <b>Note:</b>&nbsp; The Shuttle's PASS and
            BFS source code <i>does</i> have line numbers in columns
            73-78, confing source code to columns 1-72, so the SRN
            option should always be used when compiling PASS/BFS source
            code.<br>
          </td>
        </tr>
        <tr>
          <td nowrap="nowrap" valign="middle" align="center">SDL (off)<br>
          </td>
          <td nowrap="nowrap" valign="middle" align="center">SDL (off)<br>
          </td>
          <td nowrap="nowrap" valign="middle" align="center"><br>
          </td>
          <td valign="top">Used to indicate to the compiler that this
            compilation is for SDL (Software Development Lab) use.&nbsp;
            The HAL/S-FC User's Manual goes on to describe a lot of <a
              moz-do-not-send="true"
              href="Shuttle/HAL_S-FC%20User's%20Manual%20Nov%202005.pdf#page=68">additional


















              implications</a> of this that I won't bother to describe
            here.<br>
            <br>
            In brief, the Software Development Lab and its successor the
            Software Production Facility (SPF) were where the flight
            software was tested by running it in a simulated
            environment.&nbsp; Thus, option NOSDL meant the software
            would be built for Shuttle onboard usage, whereas option SDL
            meant the software would be built for ground-testing
            purposes.&nbsp; Additional reading:&nbsp; "<a
              moz-do-not-send="true" href="Shuttle/20120013307.pdf">Spacecraft


















              Avionics Software Development Then and Now: Different But
              the Same</a>" and "<a moz-do-not-send="true"
              href="Shuttle/HAL-S-FC-SDL-INTERFACE-CONTROL-DOCUMENT.pdf">HAL/S-FC


















              SDL Interface Control Document</a>".<br>
          </td>
        </tr>
        <tr>
          <td nowrap="nowrap" valign="middle" align="center">TABDMP
            (off, TBD)<br>
          </td>
          <td nowrap="nowrap" valign="middle" align="center">TABDMP
            (off, TBD)<br>
          </td>
          <td nowrap="nowrap" valign="middle" align="center">TABDMP
            (off, TBD) </td>
          <td valign="top">Causes PASS4 to produce a hexadecimal dump of
            the Simulation Data File.<br>
          </td>
        </tr>
        <tr>
          <td nowrap="nowrap" valign="middle" align="center">ZCON (on,
            Z)<br>
          </td>
          <td nowrap="nowrap" valign="middle" align="center">ZCON (on,
            Z)<br>
          </td>
          <td nowrap="nowrap" valign="middle" align="center"><br>
          </td>
          <td valign="top">Causes calls to out-of-line routines
            (external references) to be performed via long indirect
            address constants.&nbsp; <br>
            <br>
            This is connected to the concept of <font color="#663300"><code>DECLARE</code></font>'ing
















            data with the <font color="#663300"><code>REMOTE</code></font>
            attribute, which has caused me quite a lot of confusion
            personally, so I'll say a few words about it here.&nbsp;
            Given that the General Purpose Computers (GPC's) in a
            Shuttle intercommunicate among themselves, you might suppose
            that <font color="#663300"><code>REMOTE</code></font> data
            is data residing on a different GPC than the one running the
            HAL/S program.&nbsp; That's <i>not</i> what it is.&nbsp;
            Rather, <font color="#663300"><code>REMOTE</code></font>
            pertains to data which while residing on the local GPC is
            nevertheless not near enough in the address space of the GPC
            to the instruction using that data to be addressable in an
            efficient fashion.&nbsp; In particular, data which is
            farther away in the address space than 16 bits (in terms of
            16-bit "halfwords") is not directly accessible in any simple
            fashion by AP-101S instructions.&nbsp; Data accessible via
            short address displacements (YCONs) can therefore be
            accessed more efficiently, whereas data accessible only via
            long addresses (ZCONs) is accessed much less efficiently and
            is <font color="#663300"><code>DECLARE</code></font>'d
            using the <font color="#663300"><code>REMOTE</code></font>
            attribute.<br>
            <br>
            What the ZCON compiler option does, I think, is the
            equivalent of implicitly causing all external symbols to be
            considered <font color="#663300"><code>REMOTE</code></font>.<br>
          </td>
        </tr>
        <tr>
          <td nowrap="nowrap" valign="middle" align="center">HALMAT
            (off, HM)<br>
          </td>
          <td nowrap="nowrap" valign="middle" align="center">HALMAT
            (off, HM)<br>
          </td>
          <td nowrap="nowrap" valign="middle" align="center"><br>
          </td>
          <td valign="top">If specified, HALMAT and literal tables are
            included in the SDF generated by PASS3.&nbsp; NOHALMAT will
            reduce the size of the SDF considerably.<br>
          </td>
        </tr>
        <tr>
          <td nowrap="nowrap" valign="middle" align="center">REGOPT
            (off, R)<br>
          </td>
          <td nowrap="nowrap" valign="middle" align="center">REGOPT
            (off, R) </td>
          <td nowrap="nowrap" valign="middle" align="center"><br>
          </td>
          <td valign="top">Used to indicate to the compiler that
            register optimization is desired. Allows borrowing of
            register 3 for addressing <font color="#663300"><code>COMPOOL</code></font>
            data.&nbsp; The <a moz-do-not-send="true"
              href="Shuttle/HAL_S-FC%20User's%20Manual%20Nov%202005.pdf#page=67">HAL/S


















              User's Manual</a> describes additional subtleties <i>vis-à-vis</i>
            the SDL option (see above).<br>
          </td>
        </tr>
        <tr>
          <td nowrap="nowrap" valign="middle"><br>
          </td>
          <td nowrap="nowrap" valign="middle" align="center">SCAL (on,
            SC)</td>
          <td nowrap="nowrap" valign="middle"><br>
          </td>
          <td valign="top">NOSCAL inhibits the use of the AP-101S
            instructions <font color="#663300"><code>SCAL</code></font>
            and <font color="#663300"><code>SRET</code></font> for
            subroutine linkage, even if the MICROCODE option (see below)
            was also chosen.&nbsp; MICROCODE and NOSCAL together thus
            cause HAL/S linkage to be used instead of the <font
              color="#663300"><code>SCAL</code></font>/<font
              color="#663300"><code>SRET</code></font> instructions. If
            NOMICROCODE was specified, neither SCAL or NOSCAL has any
            effect.<br>
          </td>
        </tr>
        <tr>
          <td nowrap="nowrap" valign="middle" align="center">MICROCODE
            (on, MC)<br>
          </td>
          <td nowrap="nowrap" valign="middle" align="center">MICROCODE
            (on, MC)<br>
          </td>
          <td nowrap="nowrap" valign="middle" align="center"><br>
          </td>
          <td valign="top">Allows use of AP-101 instructions which only
            exist on late versions of the Space Shuttle GPC. This
            includes&nbsp;<font color="#663300"><code>SCAL</code></font>,
            <font color="#663300"><code>SRET</code></font>, <font
              color="#663300"><code>MVS</code></font>, <font
              color="#663300"><code>MVH</code></font>, and <font
              color="#663300"><code>BIX</code></font>.<br>
            <br>
            I've found no definitive explanation of how or when these
            late-model GPC instructions appeared.&nbsp;&nbsp; However,
            it may be worth remembering that <i>originally</i> the
            Shuttle's GPCs were IBM AP-101B computers.&nbsp; The
            upgraded AP-101S computers only began to be flown (with
            modifications to the flight software from OI-8F onward) in
            1991.&nbsp; So far, the only descriptions I've found of the
            changes in the AP-101S vs the AP-101B have made no mention
            at all of new instruction types, and in particular, alas, we
            do not have a list of the AP-101B instruction set.&nbsp; My
            <i> guess</i> is that the newer instructions were present in
            the AP-101S but absent in the AP-101B.<br>
          </td>
        </tr>
        <tr>
          <td nowrap="nowrap" valign="middle" align="center">SREF (off,
            SR)<br>
          </td>
          <td nowrap="nowrap" valign="middle" align="center">SREF (off,
            SR)<br>
          </td>
          <td nowrap="nowrap" valign="middle" align="center"><br>
          </td>
          <td valign="top">Causes only those variables from an included
            <font color="#663300"><code>EXTERNAL COMPOOL</code></font>
            which are actually referenced by the unit being compiled to
            be printed in the cross reference listing.&nbsp; <br>
          </td>
        </tr>
        <tr>
          <td nowrap="nowrap" valign="middle" align="center">QUASI (off,
            Q)<br>
          </td>
          <td nowrap="nowrap" valign="middle" align="center">QUASI (off,
            Q)<br>
          </td>
          <td nowrap="nowrap" valign="middle" align="center"><br>
          </td>
          <td valign="top">(I'm not sure what QUASI does, but the
            comments in HAL/S-FC source code indicate that it is for the
            IBM 360 target only, and thus is irrelvant for AP-101S.)</td>
        </tr>
        <tr>
          <td nowrap="nowrap" valign="middle" align="center">TEMPLATE
            (off, TP)<br>
          </td>
          <td nowrap="nowrap" valign="middle" align="center">TEMPLATE
            (off, TP) </td>
          <td nowrap="nowrap" valign="middle" align="center"><br>
          </td>
          <td valign="top">Causes the generation of a template for the
            compilation unit.&nbsp; For example, if a HAL/S source-code
            file contains (say) a <font color="#663300"><code>FUNCTION</code></font>,
            then the TEMPLATE option causes a prototype for that
            function to be placed in the shared template library.&nbsp;
            By using a compiler directive (<font color="#663300"><code>D
                INCLUDE TEMPLATE ...</code></font>),
            independently-compiled HAL/S units can reuse that
            previously-defined function without having to know how to
            explicitly declare it themselves.&nbsp; <br>
            <br>
            (Or using an analogy, if C compilers had a TEMPLATE option,
            they could automatically generate a C header file from a C
            source-code file.)<br>
          </td>
        </tr>
        <tr>
          <td nowrap="nowrap" valign="middle" align="center">HIGHOPT
            (off, HO)<br>
          </td>
          <td nowrap="nowrap" valign="middle" align="center">HIGHOPT
            (off, HO) </td>
          <td nowrap="nowrap" valign="middle" align="center"><br>
          </td>
          <td valign="top">The high optimization option (HIGHOPT) allows
            the compiler to perform optimizations that may not be valid
            under certain circumstances which <a moz-do-not-send="true"
href="Shuttle/HAL_S-FC%20User's%20Manual%20Nov%202005.pdf#page=66">the
              HAL/S-FC User's Manual lists</a>.&nbsp; In other words,
            optimization is better when the HIGHOPT option is used, but
            certain programming practices have to be avoided.&nbsp;
            Basically, HIGHOPT turns off certain kinds of
            datatype-checking, so that certain kinds of macros or
            manipulations of <font color="#663300"><code>NAME</code></font>
            variables which bypass the type-checking system should not
            be used.&nbsp; Thus HIGHOPT is probably safe to use except
            with code written by Very Clever People™ or by people who
            aspiring to be Very Clever.<br>
          </td>
        </tr>
        <tr>
          <td nowrap="nowrap" valign="middle"><br>
          </td>
          <td nowrap="nowrap" valign="middle"><br>
          </td>
          <td nowrap="nowrap" valign="middle" align="center">ALL (off)</td>
          <td valign="top">The comments in PASS4 source code indicate
            that "ALL" means "process all SDFs", though it's not quite
            clear to me what the implications of that are.<br>
          </td>
        </tr>
        <tr>
          <td nowrap="nowrap" valign="middle"><br>
          </td>
          <td nowrap="nowrap" valign="middle"><br>
          </td>
          <td nowrap="nowrap" valign="middle" align="center">BRIEF (off)</td>
          <td valign="top">If BRIEF is in effect, PASS4 does not print a
            formatted dump of the SDF in its output report.&nbsp; BRIEF
            automatically applies the TABLST and NOTABDMP compiler
            options.<br>
          </td>
        </tr>
        <tr>
          <td rowspan="1" colspan="4" valign="top" align="center"><i>Type


















              1, Unprintable</i><br>
          </td>
        </tr>
        <tr>
          <td nowrap="nowrap" valign="middle" align="center">PARSE (off,
            P)<br>
          </td>
          <td nowrap="nowrap" valign="middle" align="center">PARSE (off,
            P)<br>
          </td>
          <td nowrap="nowrap" valign="middle" align="center"><br>
          </td>
          <td valign="top">Debug. Gives parsing location information if
            an error is encountered.<br>
          </td>
        </tr>
        <tr>
          <td nowrap="nowrap" valign="middle" align="center">LSTALL
            (off, LA)<br>
          </td>
          <td nowrap="nowrap" valign="middle" align="center">LSTALL
            (off, LA)<br>
          </td>
          <td nowrap="nowrap" valign="middle" align="center"><br>
          </td>
          <td valign="top">Debug.&nbsp; Causes <i>both</i> assembly
            language (like LIST) <i>and</i> HALMAT to appear in PASS2's
            output report.</td>
        </tr>
        <tr>
          <td nowrap="nowrap" valign="middle" align="center">LFXI (on)<br>
          </td>
          <td nowrap="nowrap" valign="middle" align="center">LFXI (on)<br>
          </td>
          <td nowrap="nowrap" valign="middle" align="center"><br>
          </td>
          <td valign="top">Causes the AP-101S instruction <font
              color="#663300"><code>LFXI</code></font> to be used in
            preference to <font color="#663300"><code>LHI</code></font>,
            <font color="#663300"><code>LE</code></font>, or <font
              color="#663300"><code>SER</code></font> instructions under
            certain circumstances.&nbsp; <br>
          </td>
        </tr>
        <tr>
          <td nowrap="nowrap" valign="middle" align="center">X1 (off)<br>
          </td>
          <td nowrap="nowrap" valign="middle" align="center">X1 (off)</td>
          <td nowrap="nowrap" valign="middle" align="center"><br>
          </td>
          <td valign="top"><a moz-do-not-send="true"
              href="Shuttle/19760020796.pdf#page=625">Documentation</a>
            (and <a moz-do-not-send="true"
              href="Shuttle/19760020796.pdf#page=661">here</a>) claims
            that option X1 disables optimization.&nbsp; However, it has
            no actual effect on the output from the OPT pass, so perhaps
            it is something that had effect in HAL/S-360 but no longer
            has an effect in HAL/S-FC.<br>
          </td>
        </tr>
        <tr>
          <td nowrap="nowrap" valign="middle"><br>
          </td>
          <td nowrap="nowrap" valign="middle"><br>
          </td>
          <td nowrap="nowrap" valign="middle" align="center">X3 (off)</td>
          <td valign="top"><a moz-do-not-send="true"
              href="Shuttle/19760020796.pdf#page=626">Documentation</a>
            (and <a moz-do-not-send="true"
              href="Shuttle/19760020796.pdf#page=661">here</a>) claims
            that option X3 causes the phase 1.5 (optimization) to list
            HALMAT changes.&nbsp; This must be false for HAL/S-FC, which
            does not even accept the X3 option in its PARM field.&nbsp;
            It's likely the documentation is referring to HAL/S-360 —
            alas, unavailable to us — instead, since HAL/S-360 does
            accept the X3 option.<br>
          </td>
        </tr>
        <tr>
          <td nowrap="nowrap" valign="middle" align="center">X4 (off)</td>
          <td nowrap="nowrap" valign="middle" align="center">X4 (off)</td>
          <td nowrap="nowrap" valign="middle" align="center">X4 (off)</td>
          <td valign="top">(Apparently unused.) </td>
        </tr>
        <tr>
          <td nowrap="nowrap" valign="middle" align="center">X5 (off)</td>
          <td nowrap="nowrap" valign="middle" align="center">X5 (off)</td>
          <td nowrap="nowrap" valign="middle" align="center">X5 (off)</td>
          <td valign="top">The X5 option enables a TRACE functionality
            (not to be confused with the IBM 360 TRACE option described
            above) during the OPT pass.&nbsp; <a moz-do-not-send="true"
              href="Shuttle/19760020796.pdf#page=661">Documentation</a>
            describes it as printing program flow and data bases.&nbsp;
            Here's an excerpt from OPT's output report from HELLO.hal
            that shows the effect:<br>
            <blockquote>
              <pre>⋮<br>PAGE 1<br><br><br><font color="#009900">SYMBOL_SHRINKER(2):   2  I<br>SYMBOL_SHRINKER(3):   3  MY_NAME<br>SYMBOL_SHRINKER(4):   4  J<br>SYMBOL_SHRINKER(5):   5  PRINTER<br></font><br>------------------------------------------------------------------------------------------------------------------------------------------------------<br>PAGE 2<br><br><br>   HAL/S OPTIMIZER  --  VERSION OF AUGUST 9, 2024.  CLOCK TIME = 12:38:48.00<br><br>HAL/S OPTIMIZER ENTERED AUGUST 11, 2024.  CLOCK TIME = 8:28:19.16<br><br><font color="#009900">FINAL_PASS:  0<br>ASSIGNMENT: 27<br>ASSIGNMENT: 45<br><br> NO REL<br>  2   2  I<br>  3   3  MY_NAME<br>  4   4  J<br>  5   5  PRINTER<br>STACK_DUMP:  LEVEL=1, BLOCK#=2, INL#=0, OLD_LEVEL=0, OLD_BLOCK#=0, VAL_SIZE=1<br><br>   LEVEL STACKED_BLOCK# STACK_TAGS PULL_LOOP_HEAD<br>       0              1   00000000        -1<br>       1              2   00000000        -1<br><br>RECORD_TOP(CATALOG_ARRAY)= 1<br>RECORD_TOP(VALIDITY_ARRAY)= 1<br>RECORD_TOP(ZAPS)= 1<br>   ZAP_BASE=1, PULL_LOOP_HEAD(LEVEL)=-1<br>   SYT_SIZE=5, SYT_WORDS=0, SYT_USED=0<br><br>   VALIDITY     ZAPS LOOP_ZAPS<br>   00000000 00000014  00000014<br>ASSIGNMENT: 45</font><br>⋮</pre>
            </blockquote>
          </td>
        </tr>
        <tr>
          <td nowrap="nowrap" valign="middle" align="center">X6 (off)</td>
          <td nowrap="nowrap" valign="middle" align="center">X6 (off)</td>
          <td nowrap="nowrap" valign="middle" align="center">X6 (off)</td>
          <td valign="top">The X6 option causes timing and other
            statistics to be collected and printed about the
            optimization process during execution of the OPT and AUXP
            passes.&nbsp; In the sample below, generated from the
            HELLO.hal program, the green parts represent the
            contribution of X6 to OPT's report.&nbsp; As for what it
            means, I couldn't tell you, other than that very little
            optimization seems to be have been needed for HELLO.hal.<br>
            <blockquote>
              <pre><font color="#663300">PAGE 1<br><br><br>   HAL/S OPTIMIZER  --  VERSION OF AUGUST 9, 2024.  CLOCK TIME = 12:38:48.00<br><br>HAL/S OPTIMIZER ENTERED AUGUST 10, 2024.  CLOCK TIME = 18:36:29.10<br><br><br><font color="#009900">CSE'S FOUND                   = 0<br><br><br>COMPARE CALLS                 = 0<br>SCANS                         = 0<br>MAX_NODE_LIST                 = 0<br>MAX_CSE_TAB                   = 1<br>MINOR COMPACTIFIES            = 0<br>MAJOR COMPACTIFIES            = 0<br>FREE STRING AREA              = 16637938<br><br><br>END OF HAL/S OPTIMIZER AUGUST 10, 2024.  CLOCK TIME = 18:36:29.10<br><br><br>TOTAL CPU TIME FOR OPTIMIZER     0:0:0.00<br>CPU TIME FOR OPTIMIZER SETUP     0:0:0.00<br>CPU TIME FOR OPTIMIZER CRUNCHING 0:0:0.00<br>CPU TIME FOR OPTIMIZER CLEAN UP  0:0:0.00</font><br><br>END OF HAL/S OPTIMIZER AUGUST 10, 2024.  CLOCK TIME = 18:36:29.10<br></font></pre>
            </blockquote>
            In the case of AUXP, the report would normally be completely
            empty, so the entire report is contributed by X6:<br>
            <blockquote>
              <pre><font color="#009900">PAGE 1<br><br><br> HAL/S AUXILIARY HALMAT GENERATOR -- VERSION OF AUGUST 9, 2024.  CLOCK TIME = 12:39:10.00<br><br> HAL/S AUXILIARY HALMAT GENERATOR ENTERED AUGUST 10, 2024.  CLOCK TIME = 18:55:22.04<br><br><br><br>END OF HAL/S AUXILIARY HALMAT GENERATOR AUGUST 10, 2024.  CLOCK TIME = 18:55:22.04<br><br>TOTAL CPU TIME FOR AUXILIARY HALMAT GENERATOR     : 0:0:0.01<br>CPU TIME FOR AUXILIARY HALMAT GENERATOR SETUP     : 0:0:0.01<br>CPU TIME FOR AUXILIARY HALMAT GENERATOR CRUNCHING : 0:0:0.00<br><br>TOTAL NUMBER OF GARBAGE COLLECTIONS    = 2<br>MAXIMUM NUMBER OF USED CELLS           = 499<br>TOTAL TIME SPENT IN GARBAGE COLLECTION = 0:0:0.00<br><br>TOTAL TIME SPENT IN PRETTY PRINTING AUXMAT = 0:0:0.00<br><br>MAXIMUM STACK LEVEL = 1<br><br>NUMBER OF MINOR COMPACTIFIES  = 0<br>NUMBER OF MAJOR COMPACTIFIES  = 0<br>FREE STRING AREA              = 16582621</font><br><br></pre>
            </blockquote>
            <blockquote> </blockquote>
          </td>
        </tr>
        <tr>
          <td nowrap="nowrap" valign="middle"><br>
          </td>
          <td nowrap="nowrap" valign="middle"><br>
          </td>
          <td nowrap="nowrap" valign="middle" align="center">X7 (off)</td>
          <td valign="top">(Apparently unused.) </td>
        </tr>
        <tr>
          <td nowrap="nowrap" valign="middle"><br>
          </td>
          <td nowrap="nowrap" valign="middle"><br>
          </td>
          <td nowrap="nowrap" valign="middle" align="center">X8 (off)</td>
          <td valign="top">(Apparently unused.&nbsp; Comments in PASS2
            erroneously indicate that it is used there, but are in
            actuality referring to the MICROCODE option.)<br>
          </td>
        </tr>
        <tr>
          <td nowrap="nowrap" valign="middle"><br>
          </td>
          <td nowrap="nowrap" valign="middle"><br>
          </td>
          <td nowrap="nowrap" valign="middle" align="center">X9 (off)</td>
          <td valign="top">(Apparently unused.)<br>
          </td>
        </tr>
        <tr>
          <td nowrap="nowrap" valign="middle" align="center">XA (off)</td>
          <td nowrap="nowrap" valign="middle" align="center">XA (off)</td>
          <td nowrap="nowrap" valign="middle" align="center">XA (off)</td>
          <td valign="top">(Apparently unused.)<br>
          </td>
        </tr>
        <tr>
          <td nowrap="nowrap" valign="middle" align="center">XB (off)</td>
          <td nowrap="nowrap" valign="middle" align="center">XB (off)</td>
          <td nowrap="nowrap" valign="middle" align="center"><br>
          </td>
          <td valign="top">The XB option adds information to PASS3's
            output report about deleted symbols.<br>
          </td>
        </tr>
        <tr>
          <td nowrap="nowrap" valign="middle" align="center">XC (off)</td>
          <td nowrap="nowrap" valign="middle" align="center">XC (off)</td>
          <td nowrap="nowrap" valign="middle" align="center"><br>
          </td>
          <td valign="top">The XC option adds a symbol-table dump to
            PASS3's output report.<br>
          </td>
        </tr>
        <tr>
          <td nowrap="nowrap" valign="middle"><br>
          </td>
          <td nowrap="nowrap" valign="middle"><br>
          </td>
          <td nowrap="nowrap" valign="middle" align="center">XD (off)</td>
          <td rowspan="13" colspan="1" valign="middle">(Apparently
            unused.)<br>
          </td>
        </tr>
        <tr>
          <td nowrap="nowrap" valign="middle" align="center">XE (off)</td>
          <td nowrap="nowrap" valign="middle" align="center"><br>
          </td>
          <td nowrap="nowrap" valign="middle" align="center">XE (off)</td>
        </tr>
        <tr>
          <td nowrap="nowrap" valign="middle" align="center">XF (off)</td>
          <td nowrap="nowrap" valign="middle" align="center">XF (off)<br>
          </td>
          <td nowrap="nowrap" valign="middle" align="center">XF (off)</td>
        </tr>
        <tr>
          <td nowrap="nowrap" valign="middle"><br>
          </td>
          <td nowrap="nowrap" valign="middle"><br>
          </td>
          <td nowrap="nowrap" valign="middle" align="center">XG (off)</td>
        </tr>
        <tr>
          <td nowrap="nowrap" valign="middle" align="center"><br>
          </td>
          <td nowrap="nowrap" valign="middle" align="center"><br>
          </td>
          <td nowrap="nowrap" valign="middle" align="center">XH (off)</td>
        </tr>
        <tr>
          <td nowrap="nowrap" valign="middle" align="center"><br>
          </td>
          <td nowrap="nowrap" valign="middle" align="center"><br>
          </td>
          <td nowrap="nowrap" valign="middle" align="center">XI (off)</td>
        </tr>
        <tr>
          <td nowrap="nowrap" valign="middle" align="center"><br>
          </td>
          <td nowrap="nowrap" valign="middle" align="center"><br>
          </td>
          <td nowrap="nowrap" valign="middle" align="center">XJ (off)</td>
        </tr>
        <tr>
          <td nowrap="nowrap" valign="middle" align="center"><br>
          </td>
          <td nowrap="nowrap" valign="middle" align="center"><br>
          </td>
          <td nowrap="nowrap" valign="middle" align="center">XK (off)</td>
        </tr>
        <tr>
          <td nowrap="nowrap" valign="middle" align="center"><br>
          </td>
          <td nowrap="nowrap" valign="middle" align="center"><br>
          </td>
          <td nowrap="nowrap" valign="middle" align="center">XL (off)</td>
        </tr>
        <tr>
          <td nowrap="nowrap" valign="middle" align="center"><br>
          </td>
          <td nowrap="nowrap" valign="middle" align="center"><br>
          </td>
          <td nowrap="nowrap" valign="middle" align="center">XM (off)</td>
        </tr>
        <tr>
          <td nowrap="nowrap" valign="middle" align="center"><br>
          </td>
          <td nowrap="nowrap" valign="middle" align="center"><br>
          </td>
          <td nowrap="nowrap" valign="middle" align="center">XN (off)</td>
        </tr>
        <tr>
          <td nowrap="nowrap" valign="middle" align="center"><br>
          </td>
          <td nowrap="nowrap" valign="middle" align="center"><br>
          </td>
          <td nowrap="nowrap" valign="middle" align="center">XO (off)</td>
        </tr>
        <tr>
          <td nowrap="nowrap" valign="middle" align="center"><br>
          </td>
          <td nowrap="nowrap" valign="middle" align="center"><br>
          </td>
          <td nowrap="nowrap" valign="middle" align="center">XP (off)</td>
        </tr>
        <tr>
          <td rowspan="1" colspan="4" valign="top" align="center"><i>Type


















              2, Printable</i><br>
          </td>
        </tr>
        <tr>
          <td nowrap="nowrap" valign="middle" align="center">TITLE ("",
            T)<br>
          </td>
          <td nowrap="nowrap" valign="middle" align="center">TITLE ("",
            T)</td>
          <td nowrap="nowrap" valign="middle" align="center">TITLE ("",
            T)<br>
          </td>
          <td valign="top">Specifies a (1 to 60 character) title to be
            printed by PASS1 as a header at the top of each page of its
            output report. The header should be specified precisely as
            it is to appear.&nbsp; It may contain spaces, but should <i>not</i>
            contain any commas, since commas are delimiters between
            options appearing in the PARM field.<br>
            <br>
            The default is "T I T A N&nbsp; S Y S T E M S&nbsp; C O R P
            .", presumably because Intermetrics merged with the Titan
            Corporation in March of 2000.&nbsp; The default title had
            previously been "I N T E R M E T R I C S", but was changed a
            couple of years after the merger.&nbsp; Titan was later
            acquired by L-3 Communications, but I have no information as
            to whether the default was changed again.<br>
          </td>
        </tr>
        <tr>
          <td nowrap="nowrap" valign="middle" align="center">LINECT (59,
            LC)<br>
          </td>
          <td nowrap="nowrap" valign="middle" align="center">LINECT (59,
            LC)</td>
          <td nowrap="nowrap" valign="middle" align="center">LINECT (59,
            LC)<br>
          </td>
          <td valign="top">Sets the maximum number of lines to be
            printed on any one page of the primary or unformatted
            secondary (see the LISTING2 option above) source listing.<br>
            <br>
            This concept is trickier than it sounds, and if you actually
            count the number of lines on a page you may be confused into
            thinking the option doesn't work.&nbsp; I think it probably
            does work, if keep in mind the various complications:<br>
            <ul>
              <li>Double- or triple-spacing of lines via ANSI control
                characters (see LISTING2).</li>
              <li><a moz-do-not-send="true" href="#overstrike">Overstruck


















                  lines</a>.<br>
              </li>
              <li>Page headings and subheadings.</li>
              <li>Expansions of macros or templates.</li>
              <li>PASS1's desire to advance to a new page for each <font
                  color="#663300"><code>PROGRAM</code></font>, <font
                  color="#663300"><code>PROCEDURE</code></font>, <font
                  color="#663300"><code>FUNCTION</code></font>, or <font
                  color="#663300"><code>COMPOOL</code></font>.<br>
              </li>
            </ul>
          </td>
        </tr>
        <tr>
          <td nowrap="nowrap" valign="middle" align="center">PAGES
            (2500, P)<br>
          </td>
          <td nowrap="nowrap" valign="middle" align="center">PAGES
            (2500, P)</td>
          <td nowrap="nowrap" valign="middle" align="center">PAGES
            (10000, P)<br>
          </td>
          <td valign="top">Sets the maximum number of pages to be used
            for the primary compilation listing output by PASS1.<br>
          </td>
        </tr>
        <tr>
          <td nowrap="nowrap" valign="middle" align="center">SYMBOLS
            (200, SYM)<br>
          </td>
          <td nowrap="nowrap" valign="middle" align="center">SYMBOLS
            (200, SYM)</td>
          <td nowrap="nowrap" valign="middle" align="center"><br>
          </td>
          <td valign="top">Specifies the initial size of the symbol
            table to be used by the compiler. As the value is exceeded,
            the system will automatically allocate more space for it
            within the available memory. Each symbol requires 53 bytes
            of storage plus 1 byte of storage for each character in the
            symbol name.<br>
            <br>
            The default value is exceedingly optimistic, insofar as
            Space Shuttle flight software is concerned.<br>
          </td>
        </tr>
        <tr>
          <td nowrap="nowrap" valign="middle" align="center">MACROSIZE
            (500, MS)<br>
          </td>
          <td nowrap="nowrap" valign="middle" align="center">MACROSIZE
            (500, MS)</td>
          <td nowrap="nowrap" valign="middle" align="center"><br>
          </td>
          <td valign="top">Specifies the initial number of characters
            allowed in the combined text of all <font color="#663300"><code>REPLACE</code></font>
            macro definitions. As the value is exceeded, the system will
            automatically allocate more space for it within the
            available memory.<br>
          </td>
        </tr>
        <tr>
          <td nowrap="nowrap" valign="middle" align="center">LITSTRINGS
            (2000, LITS)<br>
          </td>
          <td nowrap="nowrap" valign="middle" align="center">LITSTRINGS
            (2000, LITS)</td>
          <td nowrap="nowrap" valign="middle" align="center"><br>
          </td>
          <td valign="top">Specifies the maximum total number of
            characters permitted in all character literals in the
            program to be compiled. (Note that the amount used for each
            character string in the program is 1 more than the number of
            characters in the string).<br>
          </td>
        </tr>
        <tr>
          <td nowrap="nowrap" valign="middle" align="center">COMPUNIT
            (0, CU)<br>
          </td>
          <td nowrap="nowrap" valign="middle" align="center">COMPUNIT
            (0, CU)</td>
          <td nowrap="nowrap" valign="middle" align="center"><br>
          </td>
          <td valign="top">Specifies a compilation unit number, which is
            made available in the SDF and in the Block Data Areas, and
            which allows an analysis of active blocks in a core dump.<br>
          </td>
        </tr>
        <tr>
          <td nowrap="nowrap" valign="middle" align="center">XREFSIZE
            (2000, XS)<br>
          </td>
          <td nowrap="nowrap" valign="middle" align="center">XREFSIZE
            (2000, XS)</td>
          <td nowrap="nowrap" valign="middle" align="center"><br>
          </td>
          <td valign="top">Specifies the initial number of cross
            reference table entries available to the compiler. As the
            value is exceeded, the system will automatically allocate
            more space for it within the available memory. Each entry
            requires four bytes of storage.<br>
          </td>
        </tr>
        <tr>
          <td nowrap="nowrap" valign="middle" align="center">CARDTYPE
            ("", CT)<br>
          </td>
          <td nowrap="nowrap" valign="middle" align="center">CARDTYPE
            ("", CT)</td>
          <td nowrap="nowrap" valign="middle" align="center"><br>
          </td>
          <td valign="top">Allows statements with non-standard
            characters in the first column to be treated in the standard
            HAL/S fashion. A mapping of non-standard characters into
            standard types (E, M, S, C, D and blank) is specified by
            coding pairs of characters. E.g., if “CT=XCYM” were coded,
            any lines with X in the first column would be read as
            comments (C), while lines with Y in the first column would
            be read as regular main source code lines (M).<br>
            <blockquote> <font size="-1"><b>Aside:</b>&nbsp; If you
                experience difficulty using a literal blank as a
                replacement character, it may be worth trying to use M
                instead.<br>
              </font></blockquote>
            You may be puzzled why such a thing would be needed, or how
            it might be used.&nbsp; Generally speaking, it is used only
            exceedingly rarely.&nbsp; The best way to think of it may be
            as a way of implementing conditional compilation.&nbsp; For
            code which you may or may not want to include in your
            program, and want a convenient way of enabling it or
            disabling it at compile time, you might put a special
            character in column 1, say "N".&nbsp; At compile time, you
            could specify the option CT=NM if you wanted to include the
            code, or CT=NC if you wanted to comment it out.&nbsp; This
            could be used for debugging, for compiling different
            configurations, as hints for software other than the
            compiler itself, etc.<br>
            <br>
            Regarding the use of this option in compiling actual
            surviving Space Shuttle flight software, the answer as to
            how to do so (to the extent that it's known) is quite
            tricky.&nbsp; The short answer is that we don't know for
            sure, but can provide a little bit of guidance on a
            version-by-version basis.<br>
            <ul>
              <li>PASS OI-30.17:&nbsp; We have no original HAL/S source
                code for this release, but merely reprinted compiler
                reports.&nbsp; Consequently, we don't know what
                characters originally appeared in column 1 of the
                source-code punch-cards, and instead only know how the
                compiler replaced those characters according to whatever
                <code>CARDTYPE</code> options were in effect at
                compile-time.&nbsp; In other words, as far as we can
                determine at this remove, only standard HAL/S characters
                (blank, '<code>C</code>', and '<code>D</code>') appeared
                in column 1.<br>
              </li>
              <li> PASS OI-34.06:&nbsp; In addition to standard HAL/S
                characters (blank, '<code>C</code>', '<code>D</code>',
                and '<code>M</code>'), the following characters are
                found in column 1:</li>
              <ul>
                <li>'<code>F</code>' — These appear in many source-code
                  files.&nbsp; It appears to me that the only sensible
                  interpretation, upon analysis of possible replacement
                  chracters as well as comparison to the corresponding
                  files in PASS OI-30.17, is that '<code>F</code>' is
                  always replaced by '<code>C</code>'.&nbsp; I.e., the
                  compiler option <code>CARDTYPE=FC</code> is always
                  appropriate.&nbsp; It has been suggested to me that '<code>F</code>'
                  is likely present as a marker for the purposes of some
                  independent analysis by yet some other software not
                  known to us.<br>
                </li>
                <li>'<code>R</code>' — These appear in the module
                  STRPDT, where comparison to the corresponding PASS
                  OI-30.17 code tentatively suggests that '<code>R</code>'
                  should be replaced by a blank.&nbsp; But see below.</li>
              </ul>
              <li>BFS OI-34:&nbsp; See the comments for PASS OI-30.17.<br>
              </li>
            </ul>
            <p>In addition to the relatively comprehensible column-1
              characters mentioned above, there's the
              much-more-elaborate use of column 1 in module GKPMNV in
              flight software PASS OI-34.06, for which simple
              replacement of the character in column 1 <font
                color="#ff0000">does not suffice</font>.&nbsp; Here's a
              short excerpt from the source code of that module:<br>
            </p>
            <blockquote>
              <pre>	.<br>	.<br>	.<br>&nbsp;DECLARE GKP_ERR_MSG_REQ BOOLEAN AUTOMATIC INITIAL(OFF);                009900AA<br> DECLARE GKP_ITEM                BIT(16) AUTOMATIC INITIAL (HEX'0000'); 010000AI<br> DECLARE GKP_ITEM_NO             BIT(16) AUTOMATIC INITIAL (HEX'0000'); 010100AI<br> DECLARE GKP_CASE_ARRAY_NO       INTEGER AUTOMATIC INITIAL (0);         010200AI<br> DECLARE GKP_ITEM_DATA_SC        SCALAR DOUBLE AUTOMATIC INITIAL (0.0); 010300AI<br> DECLARE GKP_ITEM_DATA_INT       INTEGER DOUBLE AUTOMATIC INITIAL (0.0);010400AI<br><font color="#ff0000">RG13</font> DECLARE GKP_TGT_CASE ARRAY(19) INTEGER                             010500AA<br><font color="#ff0000">RG13</font>      CONSTANT(3,1,1,1,1,6,6,6,4,4,7,8,9,10,11,5,2,2,2);            010600AA<br><font color="#ff0000">OG2</font>  DECLARE GKP_TGT_CASE ARRAY(20) INTEGER                             010700AA<br><font color="#ff0000">OG2</font>       CONSTANT(3,1,1,1,1,6,6,6,4,4,7,0,0,0,0,5,2,2,2,8);            010800AA<br><font color="#ff0000">AG1</font>  DECLARE GKP_NON_TGT_CASE                                           010900AA<br><font color="#ff0000">AG1</font> ARRAY(14) INTEGER CONSTANT(0,0,0,2,3,1,5,0,4,4,4,4,4,4);            011000AA<br><font color="#ff0000">OG2</font>  DECLARE GKP_NON_TGT_CASE                                           011100AA<br><font color="#ff0000">OG2</font>  ARRAY(14) INTEGER CONSTANT(0,0,0,2,3,1,0,0,4,4,4,4,4,4);           011200AA<br><font color="#ff0000">NG3</font>  DECLARE GKP_NON_TGT_CASE                                           011300AA<br><font color="#ff0000">NG3</font>  ARRAY(19)                                                          011400AA<br><font color="#ff0000">NG3</font>   INTEGER CONSTANT(5,5,5,2,3,1,0,8,4,4,4,4,4,4,9,10,6,11,7);        011500AA<br> DECLARE GKP_GMBL_L_R_Y_COORD ARRAY(3) INTEGER CONSTANT(-67,-94,-121);  011600AA<br>	.<br>	.<br>	.<br></pre>
            </blockquote>
            <p>But we're fortunate in this case, because the comments at
              the top of the source-code file do explain what's going
              on.&nbsp; I quote the entire explanation:<br>
            </p>
            <blockquote>
              <pre>C*******************************************************************    000100AA<br>C*       THE SAME SOURCE MODULE, GKPMNV, IS USED FOR MANEUVER KIPS      000200AA<br>C*       IN OPS 1,2 AND 3.                                              000300AA<br>C*                                                                      000400AA<br>C*       IN GKPMNV:                                                     000500AA<br>C*                EXECUTABLE CODE UNIQUE TO OPS 1 HAS AN 'A' IN COL 1.  000600AA<br>C*                INCLUDE CARDS  UNIQUE TO OPS 1 HAVE AN 'F' IN COL 1.  000700AA<br>C*                EXECUTABLE CODE UNIQUE TO OPS 2 HAS AN 'O' IN COL 1.  000800AA<br>C*                INCLUDE CARDS  UNIQUE TO OPS 2 HAVE A  'G' IN COL 1.  000900AA<br>C*                EXECUTABLE CODE UNIQUE TO OPS 3 HAS AN 'N' IN COL 1.  001000AA<br>C*                INCLUDE CARDS  UNIQUE TO OPS 3 HAVE AN 'H' IN COL 1.  001100AA<br>C*                EXECUTABLE CODE COMMON TO OPS 1&amp;3 HAS AN 'R' IN COL 1.001200AA<br>C*                INCLUDE CARDS COMMON TO ALL OPS HAVE A 'D' IN COL 1.  001250AG<br>C*                                                                      001300AA<br>C*       FOR OPS 1, GKPMNV IS COMPILED WITH PARAMETER                   001400AA<br>C*       'CARDTYPE=AMOCNCRMFDGCHC' IN THE HAL COMPILE CARD.             001500AA<br>C*       THIS CREATES PROCEDURE GKD_ASC_MNVR_KIP BY TREATING            001600AA<br>C*       AS COMMENTS SOURCE STATEMENTS HAVING  'R' OR 'O' IN COL 1.     001700AA<br>C*                                                                      001800AA<br>C*       FOR OPS 2, 'CARDTYPE=ACOMNCRCFCGDHC' TO CREATE GKR_ORB_MNVR_KIP001900AA<br>C*                                                                      002000AA<br>C*       FOR OPS 3, 'CARDTYPE=ACOCNMRMFCGCHD' TO CREATE GKG_MNVR_KIP.   002100AA<br>C*                                                                      002200AA<br>C*       IN ADDITION, LINES UNIQUE TO A GIVEN OPS HAVE THE              002300AA<br>C*       FOLLOWING SPECIFIC CODES AS THE FIRST 2 OR 3 CHARACTERS:       002400AA<br>C*         'G1' FOR OPS 1 UNIQUE LINES                                  002500AA<br>C*         'G2' FOR OPS 2 UNIQUE LINES                                  002600AA<br>C*         'G3' FOR OPS 3 UNIQUE LINES                                  002700AA<br>C*         'G13' FOR OPS 1&amp;3 COMMON LINES                               002800AA<br>C*         '   ' FOR OPS 1,2&amp;3 COMMON LINES (I.E. CODE COMMON TO ALL OPS002900AA<br>C*               HAS NO SPECIAL CHARACTERS).                            003000AA<br>C*                                                                      003100AA<br>C*       THE VARIOUS CODES ARE REPLACE NAMES FOR BLANKS AND AT          003200AA<br>C*       COMPILE TIME THEY HAVE NO EFFECT IN THE COMPILATION OTHER THAN 003300AA<br>C*       IDENTIFYING  THE OPS TO WHICH A STATEMENT BELONGS.             003400AA<br>C*                                                                      003500AA<br>C********************************************************************   003600AA<br>      REPLACE G1 BY "  ";                                               003700AA<br>      REPLACE G2 BY "  ";                                               003800AA<br>      REPLACE G3 BY "  ";                                               003900AA<br>      REPLACE G13 BY "   ";                                             004000AA<br>C********************************************************************** 004100AA<br></pre>
            </blockquote>
            <blockquote><font size="-1"><b>Aside:</b> Notice the
                implication that column 1 replacements via <code>CARDTYPE</code>
                are performed by the compiler prior to any macro
                expansions via <code>REPLACE</code>.<br>
              </font></blockquote>
            <b>Important Note</b>: One perhaps-unobvious lesson to take
            away from the above is that we <i>cannot</i> assume that
            it's okay to use the identical <code>CARDTYPE</code> option
            for all modules comprising any given release of the flight
            software.&nbsp; Consider the '<code>F</code>' character in
            column 1.&nbsp; I mentioned earlier the inference that where
            '<code>F</code>' appears in column in modules <i>other than</i>
            GKPMNV, it must always be replaced by '<code>C</code>'.&nbsp;














            And yet from the explanation specific to module GKPMNV, we
            see that depending on the overall runtime configuration, in
            GKPMNV it must sometimes be replaced '<code>C</code>' and
            sometimes instead by '<code>D</code>'.&nbsp; Similarly, in
            module STRPDT we found that 'R' should be replaced by a
            blank (or '<code>M</code>'), whereas in GKPMNV we find that
            it is instead replaced by '<code>C</code>' in some
            configurations; although admittedly, in the case of STRPDT
            it's difficult to have as much confidence in my inferences,
            so possibly the replacement could vary by configuration
            there as well, even though undocumented.<br>
            <br>
            Regarding these extra column-1 characters like '<code>F</code>',














            '<code>A</code>', and '<code>B</code>', it's perhaps worth
            noting also that several flight-software modules have
            comments similar to this one we find in the module CPUSLS,<br>
            <blockquote>
              <pre>C********************************************************************** 000005AG<br>C************************                           ******************* 000010AG<br>C          THIS MODULE IS SET UP FOR THE SM PREPROCEESOR TO             000015AG<br>C          GENERATE THIS COMPOOL FOR S2 ONLY OR S4 ONLY OR              000020AG<br>C          BOTH OPS.                                                    000025AG<br>C          THIS MODULE MAY CONTAIN F,A AND B CARDS TO BE                000030AG<br>C          USED BY THE PREPROCESSOR TO GENERATE THIS TABLE.             000035AG<br>C          THE PROCEDURE ON HOW TO UPDATE THIS MODULE WILL BE           000040AI<br>C          CONTAINED IN THE SAMS.                                       000045AG<br>C************************                           ******************* 000050AG<br>C********************************************************************** 000055AG<br></pre>
            </blockquote>
            which tells us that HAL/S source code was at least sometimes
            coded with the expectation of being preprocessed in some
            manner no longer possible for us now.<br>
            <blockquote><font size="-1"><b>Aside:</b>&nbsp; Regarding
                the "SM PREPROCEESOR" mentioned in the program comments
                quoted above, there are several documents in our library
                pertaining to HAL/SM, which is described as being a
                dialect of the HAL/S language appropriate for something
                called the Concept Verification Test (CVT) environment
                rather than the Space Shuttle itself.&nbsp; The SM
                preprocessor is said to "convert HAL/SM source language
                modules into HAL/S source language modules, perform
                minimal syntax verification, and provide various support
                features which cannot be conveniently or adequately
                performed by the HAL/S-360 Compiler."&nbsp; See also:<br>
              </font>
              <ul>
                <li><font size="-1">"<a moz-do-not-send="true"
href="Shuttle/NASA-CR-144100%20-%20HAL,%20SM%20Language%20Specification.pdf">HAL/SM














                      Language Specification</a>"</font></li>
                <li><font size="-1">"<a moz-do-not-send="true"
                      href="Shuttle/19760007755.pdf">HAL/SM System
                      Functional Design Specification</a>"</font></li>
                <li><font size="-1">"<a moz-do-not-send="true"
href="Shuttle/NASA-CR-144099%20-%20HAL,%20SM%20System%20Sofware%20Requirements%20Specification.pdf">HAL/SM














                      System Software Requirements Specification</a>"<br>
                  </font></li>
              </ul>
            </blockquote>
          </td>
        </tr>
        <tr>
          <td nowrap="nowrap" valign="middle" align="center">LABELSIZE
            (1200, LBLS)<br>
          </td>
          <td nowrap="nowrap" valign="middle" align="center">LABELSIZE
            (1200, LBLS)</td>
          <td nowrap="nowrap" valign="middle" align="center"><br>
          </td>
          <td valign="top">Specifies the initial number of labels which
            can be recognized by the compiler. As the value is exceeded,
            the system will automatically allocate more space for it
            within the available memory.&nbsp; "Labels" in HAL/S,
            recall, are things like <br>
            <blockquote>
              <pre><font color="#663300">MY_LABEL: ...</font><br></pre>
            </blockquote>
            that can be used as the targets of <font color="#663300"><code>GOTO</code></font>
            statements.&nbsp; A name of a <font color="#663300"><code>PROGRAM</code></font>,
            <font color="#663300"><code>PROCEDURE</code></font>, <font
              color="#663300"><code>FUNCTION</code></font>, or <font
              color="#663300"><code>COMPOOL</code></font> may also
            technically be a "label", but it's TBD as to whether they're
            included in this count or not.<br>
          </td>
        </tr>
        <tr>
          <td nowrap="nowrap" valign="middle" align="center">DSR (1)<br>
          </td>
          <td nowrap="nowrap" valign="middle" align="center">DSR (1)</td>
          <td nowrap="nowrap" valign="middle" align="center"><br>
          </td>
          <td valign="top">
            <blockquote>"Specifies the value to be used for the data
              sector register in the right hand halfword of the <font
                color="#663300"><code>R2</code></font> operand of the <font
                color="#663300"><code>MVH</code></font> instruction. The
              compiler will use this value explicitly when it is not
              possible to use a standard z-type address constant in
              which the DSR field is filled in by the link editor."<br>
            </blockquote>
            That's a direct quote from the HAL/S-FC User's Manual, but I
            personally haven't much of a clue as to what it may mean,
            other than that it relates to AP-101S assembly language, and
            I guess, to the linking process for it.<br>
          </td>
        </tr>
        <tr>
          <td nowrap="nowrap" valign="middle" align="center">BLOCKSUM
            (400, BS)<br>
          </td>
          <td nowrap="nowrap" valign="middle" align="center">BLOCKSUM
            (400, BS)</td>
          <td nowrap="nowrap" valign="middle" align="center"><br>
          </td>
          <td valign="top">Specifies the initial size of the PASS1
            internal compiler table used for collecting information for
            printing block summaries. As this value is exceeded, the
            system will automatically allocate more space for it within
            the available memory.<br>
          </td>
        </tr>
        <tr>
          <td nowrap="nowrap" valign="middle" align="center">MFID ("")<br>
          </td>
          <td nowrap="nowrap" valign="middle" align="center"><br>
          </td>
          <td nowrap="nowrap" valign="middle" align="center"><br>
          </td>
          <td valign="top">Allows specification of the Major Function
            ID.&nbsp; Implemented in the PASS version of the compiler
            only (versus the BFS version).<br>
          </td>
        </tr>
        <tr>
          <td nowrap="nowrap" valign="middle"><br>
          </td>
          <td nowrap="nowrap" valign="middle" align="center">OLDTPL ("",
            0)</td>
          <td nowrap="nowrap" valign="middle"><br>
          </td>
          <td valign="top">(No longer a valid option, even though
            accepted by the compiler.&nbsp; It involves the record
            length used in template files, which is now fixed at 80.)<br>
          </td>
        </tr>
        <tr>
          <td nowrap="nowrap" valign="middle"><br>
          </td>
          <td nowrap="nowrap" valign="middle"><br>
          </td>
          <td nowrap="nowrap" valign="middle" align="center">LIST (1, L)</td>
          <td valign="top">(Do not confuse with the LIST option for
            PASS1.&nbsp; Although PASS4 does accept the type-2 LIST
            option, it does not appear to me that it uses the value of
            the option in any way.)<br>
          </td>
        </tr>
      </tbody>
    </table>
    <br>
    <h1><a name="debuggingAids"></a>Debugging-Aid Options</h1>
    <p>In addition to compiler options originally supplied by JCL, but
      now supplied by command-line switches as described in the
      preceding section, there are also compiler options which can be
      supplied within the HAL/S source code itself.&nbsp; These
      typically (but not always) differ from the command-line options in
      that they tend to take effect at the position in the HAL/S source
      code at which the compiler encounters them.&nbsp; As the title of
      this section implies, such options are often (but not always) for
      the purpose of debugging the compiler itself.&nbsp; <br>
    </p>
    <p>Such options are inserted into the code via <font
        color="#663300"><code>DEBUG</code></font> compiler directives
      aligned with column 1 of the source code, and you can see examples
      of them (highlighted in green) in our little sample HELLO.hal
      program:<br>
    </p>
    <blockquote style="background-color:lightgray">
      <pre><font color="#663300"><font color="#009900">DEBUG ¢D¢E¢F</font><br> <br> HELLO: PROGRAM;<br>    DECLARE I INTEGER;<br>    DECLARE MY_NAME CHARACTER(20) INITIAL('RON BURKEY');<br>    DECLARE INTEGER, J;<br>    REPLACE PRINTER BY "6";<br>    WRITE(PRINTER) 'THE BEGINNING';<br>    DO FOR I = 1 TO 5;<br>       WRITE(PRINTER) I, 'HELLO, WORLD!';<br>       DO FOR J = 2 TO 8 BY 2;<br>          WRITE(PRINTER) J, MY_NAME, 'SAYS ISN''T THIS FUN?';<br>       END;<br>    END;<br>    WRITE(6) 'THE END';<br> CLOSE HELLO;</font></pre>
    </blockquote>
    <p>This example turns on debugging-aid options D, E, and F.<br>
    </p>
    <p><a moz-do-not-send="true" href="Shuttle/19760020796.pdf#page=40">Section


















        2.2.7 ("Debugging Aids") of the HAL/S-FC &amp; HAL/S-360
        Compiler System Program Description</a> describes many such
      options, although as you've probably come to expect, by no means
      all of them.<br>
    </p>
    <p>Debugging-aid options are of two general types:<br>
    </p>
    <ol>
      <li>Options of the form ¢<i>T</i>, where <i>T</i> is a
        hexadecimal digit (0-9 or A-F) or the letter G, are used mainly
        (but not entirely) for PASS1.&nbsp; They can:</li>
      <ul>
        <li>Enable the option if specified as ¢<i>T</i>+</li>
        <li>Disable the option if specified as ¢<i>T</i>-</li>
        <li>Toggle the if specified merely as ¢<i>T</i> with no
          suffix.&nbsp; The options are all disabled by default, and so
          in our HELLO.hal example above, the three toggles for D, E,
          and F enable all of them.</li>
      </ul>
      <li>Options of the form H(<i>N</i>), where <i>N</i> is a decimal
        number (0-255), are used in compiler passes subsequent to
        PASS1.&nbsp; I haven't put any of them in our HELLO.hal example
        above, but they too are specified within <font color="#663300"><code>DEBUG</code></font>
        compiler-directives.&nbsp; Only one H(<i>N</i>) option is in
        effect at any given time.&nbsp; Number <i>N</i>=0 has no effect
        at all, whereas numbers <i>N</i>=1-127 affect the FLO, OPT,
        and/or AUX compiler passes, while <i>N</i>=128-255 affects the
        PASS2 compiler pass.&nbsp; PASS1 simply inserts <i>N</i> into a
        tag field in the next HALMAT intermediate-language <code>SMRK</code>
        instruction generated — which is at the beginning of the next
        HAL/S statement —, and then resets the <i>N</i>=0
        internally.&nbsp; Yes, I know it's not obvious what that means,
        but the point is that if multiple H(<i>N</i>) switches were
        encountered, then only the final one could take effect (at the
        beginning of the next statement).<br>
      </li>
    </ol>
    <p>Here's a table of the debugging-aid options that I'm <i>aware</i>
      of, usually with samples of how the options affect the reports
      output by the various compiler passes.&nbsp; You won't have to
      look too long to realize that any of these options, if they remain
      enabled, can increase the size of output reports
      dramatically.&nbsp; And if options are combined, the increase can
      be astounding.&nbsp; So rather than just enabling options at the
      beginning of the HAL/S program and leaving them enabled as I do in
      many of these examples for illustrative purposes, a more-normal
      usage would be to enable an option just prior to some place in the
      source code just prior to where a problem has been observed, and
      to disable them after the problematic section of code.<br>
    </p>
    <table width="100%" cellspacing="2" cellpadding="2" border="1">
      <tbody>
        <tr>
          <th valign="top">Aid<br>
          </th>
          <th valign="top">PASS1<br>
          </th>
          <th valign="top">OPT<br>
          </th>
          <th valign="top">AUX<br>
          </th>
          <th valign="top">PASS2<br>
          </th>
          <th valign="top">Description<br>
          </th>
        </tr>
        <tr>
          <td valign="top">¢0</td>
          <td valign="top"><font color="#009900">Yes<br>
            </font></td>
          <td valign="top">No<br>
          </td>
          <td valign="top">No</td>
          <td valign="top">No</td>
          <td valign="top">Interlists HALMAT intermediate language with
            HAL/S source code in PASS1's output report.&nbsp; Here's an
            excerpt for HELLO.hal, with changes highlighted in green,
            showing the effect of this option:<br>
            <blockquote>
              <pre>⋮<br>&nbsp;  1 M| HELLO:                                                                                              |HELLO<br>   1 M| PROGRAM;                                                                                            |HELLO<br><font color="#009900"> HALMAT LINE     4:     4(  1),N, 0<br>                                     :      1(  0) 0,1<br></font>   2 M|   DECLARE I INTEGER;                                                                                |HELLO<br><font color="#009900"> HALMAT LINE     6:     4(  1),N, 0<br>                                     :      2(  0) 0,0<br> HALMAT LINE     8:   841(  2),0, 2<br>                                     :      3(SYT) 0,0<br>                                                         :      2(LIT) 0,0<br></font>   3 M|   DECLARE MY_NAME CHARACTER(20) INITIAL('RON BURKEY');                                              |HELLO<br><font color="#009900"> HALMAT LINE    11:     4(  1),N, 0<br>                                     :      3(  0) 0,0<br></font>   4 M|   DECLARE INTEGER, J;                                                                               |HELLO<br><font color="#009900"> HALMAT LINE    13:     4(  1),N, 0<br>                                     :      4(  0) 0,0<br></font>   5 M|   REPLACE PRINTER BY "6";                                                                           |HELLO<br><font color="#009900"> HALMAT LINE    15:     4(  1),N, 0<br>                                     :      5(  0) 0,0<br> HALMAT LINE    17:    31(  0),N, 1<br> HALMAT LINE    18:    25(  1),N, 0<br>                                     :      2(IMD) 0,0<br> HALMAT LINE    20:    27(  1),N, 0<br>                                     :      4(LIT) 0,0<br> HALMAT LINE    22:    21(  1),0, 0<br>                                     :      6(IMD) 0,0<br> HALMAT LINE    24:    26(  0),0, 0<br></font>   6 M|   WRITE(PRINTER) 'THE BEGINNING';                                                                   |HELLO<br>                ^^^^^^^                                                                                     <br>⋮<br></pre>
            </blockquote>
          </td>
        </tr>
        <tr>
          <td valign="top">¢1</td>
          <td valign="top"><font color="#009900">Yes</font></td>
          <td valign="top">No</td>
          <td valign="top">No</td>
          <td valign="top">No</td>
          <td valign="top">Stop processing at the end of Phase 1.&nbsp;
            Originally this meant that processing would stop after PASS1
            had completed, but for the modern compiler the passes don't
            directly chain together, so this option no longer really
            halts processing.&nbsp; However, it does affect the messages
            printed when PASS1 terminates.<br>
          </td>
        </tr>
        <tr>
          <td valign="top">¢2</td>
          <td valign="top">No</td>
          <td valign="top">No</td>
          <td valign="top">No</td>
          <td valign="top"><font color="#009900">Yes</font></td>
          <td valign="top">Stop processing at the end of Phase 2.&nbsp;
            Like ¢1 (see above), except for PASS2 rather than PASS1.<br>
          </td>
        </tr>
        <tr>
          <td valign="top">¢3</td>
          <td valign="top"><font color="#009900">Yes</font></td>
          <td valign="top">No</td>
          <td valign="top">No</td>
          <td valign="top">No</td>
          <td valign="top">Turns on the Phase 1 identifier trace.&nbsp;
            This trace info shows up in PASS1's output report.&nbsp;
            Here's a short excerpt of changes (highlighted in green) to
            the output listing, if I add ¢3 to the <font
              color="#663300"><code>DEBUG</code></font> compiler
            directive at the top of HELLO.hal:<br>
            <blockquote>
              <pre>⋮<br>&nbsp;HAL/S REL32V0                T I T A N  S Y S T E M S  C O R P .                 AUGUST 10, 2024    20:5:9.54     PAGE 3<br>STMT                                                  SOURCE                                                  CURRENT SCOPE<br><br>   1 M| HELLO:                                                                                              |HELLO<br>   1 M| PROGRAM;                                                                                            |HELLO<br><font color="#009900">I :  TOKEN = &lt;IDENTIFIER&gt;, IMPLIED_TYPE = 0, SYT_INDEX = 2, CONTEXT = 5</font><br>   2 M|   DECLARE I INTEGER;                                                                                |HELLO<br><font color="#009900">MY_NAME :  TOKEN = &lt;IDENTIFIER&gt;, IMPLIED_TYPE = 0, SYT_INDEX = 3, CONTEXT = 5</font><br>   3 M|   DECLARE MY_NAME CHARACTER(20) INITIAL('RON BURKEY');                                              |HELLO<br><font color="#009900">J :  TOKEN = &lt;IDENTIFIER&gt;, IMPLIED_TYPE = 0, SYT_INDEX = 4, CONTEXT = 5</font><br>   4 M|   DECLARE INTEGER, J;                                                                               |HELLO<br><font color="#009900">PRINTER :  TOKEN = &lt;IDENTIFIER&gt;, IMPLIED_TYPE = 0, SYT_INDEX = 5, CONTEXT = 10</font><br>   5 M|   REPLACE PRINTER BY "6";                                                                           |HELLO<br><font color="#009900">PRINTER :  TOKEN = -1, IMPLIED_TYPE = 0, SYT_INDEX = 5, CONTEXT = 0<br>AT 3  NEXT_CHAR=246  MACRO_EXPAN_LEVEL=1  MACRO_TEXT(1)=239  PARM_REPLACE_PTR(0)=0<br>AT 4  NEXT_CHAR=64  MACRO_EXPAN_LEVEL=1  MACRO_TEXT(1)=239  PARM_REPLACE_PTR(0)=0<br>AT 5  NEXT_CHAR=93  MACRO_EXPAN_LEVEL=0  MACRO_TEXT(-1)=0  PARM_REPLACE_PTR(0)=0<br></font>   6 M|   WRITE(PRINTER) 'THE BEGINNING';                                                                   |HELLO<br>                ^^^^^^^                                                                                     <br><font color="#009900">I :  TOKEN = &lt;ARITH ID&gt;, IMPLIED_TYPE = 0, SYT_INDEX = 2, CONTEXT = 0<br><font color="#000000">⋮<br></font></font></pre>
            </blockquote>
          </td>
        </tr>
        <tr>
          <td valign="top">¢4</td>
          <td valign="top"><font color="#009900">Yes</font></td>
          <td valign="top">No</td>
          <td valign="top">No</td>
          <td valign="top">No</td>
          <td valign="top">Turns on the Phase 1 token trace.&nbsp; This
            is a bit tricky to explain in a meaningful way, so I'll just
            say that the first operation of most compilers or
            interpreters tends to be to "scan" the input source code and
            convert it into a series of "tokens"; subsequent action by
            the compiler merely analyzes the sequence of tokens rather
            than the raw source code itself.&nbsp; The token trace gives
            a running account of the tokens the scanner
            identifies.&nbsp; Here's an excerpt from PASS1's output
            report showing the effect of the option.&nbsp; It's helpful
            to know that <code>BCD</code> is the token just identified
            (shown as a string) and that <code>NEXT_CHAR</code> is the
            EBCDIC code (in decimal) of the not-yet-analyzed, non-blank
            character following the current token.<br>
            <blockquote>
              <pre>⋮<br>  &nbsp;1 M| HELLO:                                                                                              |HELLO<br>   1 M| PROGRAM;                                                                                            |HELLO<br><font color="#009900">SCANNER: 103, NUMBER_VALUE: 00, VALUE: 0, CURRENT BCD: DECLARE, NEXT_CHAR: 201<br>SCANNER: 131, NUMBER_VALUE: 00, VALUE: 0, CURRENT BCD: I, NEXT_CHAR: 201<br>SCANNER: 105, NUMBER_VALUE: 00, VALUE: 0, CURRENT BCD: INTEGER, NEXT_CHAR: 94<br>SCANNER: 10, NUMBER_VALUE: 00, VALUE: 0, NEXT_CHAR: 196<br></font>   2 M|   DECLARE I INTEGER;                                                                                |HELLO<br><font color="#009900">SCANNER: 103, NUMBER_VALUE: 00, VALUE: 0, CURRENT BCD: DECLARE, NEXT_CHAR: 212<br>SCANNER: 131, NUMBER_VALUE: 00, VALUE: 0, CURRENT BCD: MY_NAME, NEXT_CHAR: 195<br>SCANNER: 118, NUMBER_VALUE: 00, VALUE: 0, CURRENT BCD: CHARACTER, NEXT_CHAR: 77<br>SCANNER: 3, NUMBER_VALUE: 00, VALUE: 0, NEXT_CHAR: 242<br>SCANNER: 136, NUMBER_VALUE: 421400000, VALUE: 20, CURRENT BCD: 20, NEXT_CHAR: 93<br>SCANNER: 9, NUMBER_VALUE: 00, VALUE: 0, NEXT_CHAR: 201<br>SCANNER: 104, NUMBER_VALUE: 00, VALUE: 0, CURRENT BCD: INITIAL, NEXT_CHAR: 77<br>SCANNER: 3, NUMBER_VALUE: 00, VALUE: 0, NEXT_CHAR: 125<br>SCANNER: 132, NUMBER_VALUE: 00, VALUE: 10, CURRENT BCD: RON BURKEY, NEXT_CHAR: 93<br>SCANNER: 9, NUMBER_VALUE: 00, VALUE: 0, NEXT_CHAR: 94<br>SCANNER: 10, NUMBER_VALUE: 00, VALUE: 0, NEXT_CHAR: 196<br></font>   3 M|   DECLARE MY_NAME CHARACTER(20) INITIAL('RON BURKEY');                                              |HELLO<br><font color="#009900">SCANNER: 103, NUMBER_VALUE: 00, VALUE: 0, CURRENT BCD: DECLARE, NEXT_CHAR: 201<br>SCANNER: 105, NUMBER_VALUE: 00, VALUE: 0, CURRENT BCD: INTEGER, NEXT_CHAR: 107<br>SCANNER: 14, NUMBER_VALUE: 00, VALUE: 0, NEXT_CHAR: 209<br>SCANNER: 131, NUMBER_VALUE: 00, VALUE: 0, CURRENT BCD: J, NEXT_CHAR: 94<br>SCANNER: 10, NUMBER_VALUE: 00, VALUE: 0, NEXT_CHAR: 217<br></font>   4 M|   DECLARE INTEGER, J;                                                                               |HELLO<br>⋮<br></pre>
            </blockquote>
          </td>
        </tr>
        <tr>
          <td valign="top">¢5</td>
          <td valign="top">No</td>
          <td valign="top">No</td>
          <td valign="top">No</td>
          <td valign="top"><font color="#009900">Yes</font></td>
          <td valign="top">This option adds HALMAT intermediate-language
            to PASS2's output report.&nbsp; Recall that optimization
            (FLO, OPT, and AUX) may have altered the HALMAT so that it's
            no longer quite the same as what was output by PASS1 (see ¢0
            above).<br>
            <blockquote>
              <pre>PAGE 1<br><br><br>   HAL/S COMPILER PHASE 2  --  VERSION OF AUGUST 9, 2024.  CLOCK TIME = 12:39:23.00<br><br>HAL/S PHASE 2 ENTERED AUGUST 11, 2024.  CLOCK TIME = 5:39:17.69<br><br><font color="#009900">         HALMAT: 005(  1),  0,0:0.0<br>         HALMAT: 02B(  1),  0,0:0.2<br>                   1( 1),  0,0 :0.3<br>         HALMAT: 004(  1),  0,0:0.4<br>                   1( 0),  0,1 :0.5<br>         HALMAT: 004(  1),  0,0:0.6<br>                   2( 0),  0,0 :0.7<br>         HALMAT: 841(  2),  2,0:0.8<br>                   3( 1),  0,0 :0.9<br>                   2( 5),  0,0 :0.10<br>         HALMAT: 004(  1),  0,0:0.11<br>                   3( 0),  0,0 :0.12<br>         HALMAT: 004(  1),  0,0:0.13<br>                   4( 0),  0,0 :0.14<br>         HALMAT: 004(  1),  0,0:0.15<br>                   5( 0),  0,0 :0.16<br>         HALMAT: 031(  0),  1,0:0.17<br>         HALMAT: 025(  1),  0,0:0.18<br>                   2( 6),  0,0 :0.19<br>                   6( 6),  0,0 :0.23<br>         HALMAT: 027(  1),  0,0:0.20<br>                   4( 5),  2,0 :0.21<br>         HALMAT: 021(  1),  0,0:0.22<br>         HALMAT: 026(  0),  0,0:0.24<br>         HALMAT: 004(  1),  0,0:0.25<br>                   6( 0),  0,1 :0.26<br>         HALMAT: 010(  4),  1,0:0.27<br>                   2( 1),  0,0 :0.29<br>                                        AUX:  29  1     2(1)    0,0<br>                   1( 2),  0,1 :0.28<br>                   6( 5),  0,0 :0.31<br>                   5( 5),  0,0 :0.30<br></font>⋮<br></pre>
            </blockquote>
          </td>
        </tr>
        <tr>
          <td valign="top">¢6</td>
          <td valign="top">No</td>
          <td valign="top">No</td>
          <td valign="top">No</td>
          <td valign="top"><font color="#009900">Yes</font></td>
          <td valign="top">Adds assembly language to PASS2's output
            report:<br>
            <blockquote>
              <pre>PAGE 1<br><br><br>   HAL/S COMPILER PHASE 2  --  VERSION OF AUGUST 9, 2024.  CLOCK TIME = 12:39:23.00<br><br>HAL/S PHASE 2 ENTERED AUGUST 11, 2024.  CLOCK TIME = 5:47:27.31<br><br><font color="#009900">I  (1)  000002  002(1)  0<br>J  (1)  000003  003(1)  0<br>MY_NAME  (11)  000004  004(1)  0<br>*** HAL/S STATEMENT 1<br>000000:HELLO EQU *<br>000000:   LHI      0,@0HELLO<br>000002:   LHI      1,<br>000004:   STH      1,5(0,0)<br>000005:   IAL      0,0+DELTA.HELLO<br>000007:   LA       3,0(0,9)<br>000009:   STH      3,9(0,0)<br>*** HAL/S STATEMENT 2<br>*** HAL/S STATEMENT 3<br>*** HAL/S STATEMENT 4<br>*** HAL/S STATEMENT 5<br>*** HAL/S STATEMENT 6<br>00000A:   LFXI     6,8<br>00000B:   LFXI     5,5<br>00000C:   SCAL     0,#QIOINIT<br>00000E:   LA       2,=C'THE BEGINNING'<br>000010:   SCAL     0,#QCOUT</font><br>⋮
</pre>
            </blockquote>
          </td>
        </tr>
        <tr>
          <td valign="top">¢7</td>
          <td valign="top"><font color="#009900">Yes</font></td>
          <td valign="top">No</td>
          <td valign="top">No</td>
          <td valign="top">No</td>
          <td valign="top">Immediately prints a symbol table and then
            disables the option.&nbsp; In the following excerpt from
            PASS1's output report, I've inserted this option just prior
            to HAL/S statement 7.&nbsp; (Recall that the characters '`'
            and '¢' are equivalent to the compiler, but that the
            compiler internally always uses '`'.)<br>
            <blockquote>
              <pre>⋮
   5 M|   REPLACE PRINTER BY "6";                                                                           |HELLO<br>   6 M|   WRITE(PRINTER) 'THE BEGINNING';                                                                   |HELLO<br>                ^^^^^^^                                                                                     <br><br>     D| EBUG `7                                                                                             |HELLO<br><br><font color="#009900">S Y M B O L  &amp;  C R O S S   R E F E R E N C E   T A B L E   L I S T I N G :<br><br>         (CROSS REFERENCE FLAG KEY:  4 = ASSIGNMENT, 2 = REFERENCE, 1 = SUBSCRIPT USE, 0 = DEFINITION)<br><br> DCL  NAME            TYPE                          ATTRIBUTES &amp; CROSS REFERENCE<br> <br>   1  HELLO     PROGRAM                            FLAGS=20040, NEST=0, SCOPE=1, PTR=2, LENGTH=0, LINK1=-1, LINK2=0, SYT_NO=1, <br>                                                   ARRAY=-300, ADDR=0, CLASS=2, TYPE=73<br>   2  I         INTEGER                            SINGLE, ALIGNED, STATIC, FLAGS=800208, NEST=1, SCOPE=1, PTR=0, LENGTH=0, <br>                                                   LINK1=0, LINK2=0, SYT_NO=2, ARRAY=0, ADDR=0, CLASS=1, TYPE=6<br>   3  MY_NAME   CHARACTER(20)                      ALIGNED, STATIC, INITIAL, FLAGS=A08, NEST=1, SCOPE=1, PTR=0, LENGTH=20, LINK1=0, <br>                                                   LINK2=0, SYT_NO=3, ARRAY=0, ADDR=0, CLASS=1, TYPE=2<br>   4  J         INTEGER                            SINGLE, ALIGNED, STATIC, FLAGS=800208, NEST=1, SCOPE=1, PTR=0, LENGTH=0, <br>                                                   LINK1=0, LINK2=0, SYT_NO=4, ARRAY=0, ADDR=0, CLASS=1, TYPE=6<br>   5  PRINTER   REPLACE MACRO                      FLAGS=0, NEST=1, SCOPE=1, PTR=0, LENGTH=0, LINK1=0, LINK2=0, SYT_NO=5, ARRAY=0, <br>                                                   ADDR=0, CLASS=6, TYPE=0, MACRO TEXT="6"<br></font><br><br>   7 M|   DO FOR I = 1 TO 5;                                                                                |HELLO<br>   8 M| 1   WRITE(PRINTER) I, 'HELLO, WORLD!';                                                              |HELLO<br>                  ^^^^^^^                                                                                  <br>⋮
</pre>
            </blockquote>
          </td>
        </tr>
        <tr>
          <td valign="top">¢8</td>
          <td valign="top"><font color="#009900">Yes</font></td>
          <td valign="top">No</td>
          <td valign="top">No</td>
          <td valign="top">No</td>
          <td valign="top">Print a Phase 1 production trace.&nbsp; Here,
            a "production" is a rule in the Backus-Naur Form (BNF) of
            the grammar of the HAL/S language.&nbsp; For identification
            purposes, each such rule is given a unique number, and all
            of <a moz-do-not-send="true"
href="https://github.com/virtualagc/virtualagc/blob/master/yaShuttle/Source%20Code/PASS.REL32V0/PASS1.PROCS/%23%23DRIVER.xpl">the


















              production numbers are related to the BNF rules in
              comments in the compiler's source code</a>.&nbsp; For
            example, production number 1 is the <code>&lt;COMPILATION&gt;</code>
            rule, number 2 is the <code>&lt;COMPILE LIST&gt;</code>
            rule, and so on:<br>
            <blockquote>
              <pre>⋮
 /*      1   &lt;COMPILATION&gt; ::= &lt;COMPILE LIST&gt; _|_                     */        00000750<br>                                                                                00000800<br> /*      2   &lt;COMPILE LIST&gt; ::= &lt;BLOCK DEFINITION&gt;                    */        00000850<br> /*      3                    | &lt;COMPILE LIST&gt; &lt;BLOCK DEFINITION&gt;     */        00000900<br>                                                                                00000950<br> /*      4   &lt;ARITH EXP&gt; ::= &lt;TERM&gt;                                   */        00001000<br> /*      5                 | + &lt;TERM&gt;                                 */        00001050<br> /*      6                 | - &lt;TERM&gt;                                 */        00001100<br> /*      7                 | &lt;ARITH EXP&gt; + &lt;TERM&gt;                     */        00001150<br> /*      8                 | &lt;ARITH EXP&gt; - &lt;TERM&gt;                     */        00001200<br>⋮
</pre>
            </blockquote>
            What the ¢8 option does is to provide an inline trace to the
            PASS1 output file of each BNF rule processed:<br>
            <blockquote>
              <pre>⋮<br>     D| EBUG `8`D`E`F                                                                                       |<br><font color="#009900">-&gt;-&gt;-&gt;-&gt;-&gt;-&gt;PRODUCTION NUMBER 308<br>-&gt;-&gt;-&gt;-&gt;-&gt;-&gt;PRODUCTION NUMBER 309<br>-&gt;-&gt;-&gt;-&gt;-&gt;-&gt;PRODUCTION NUMBER 311<br>-&gt;-&gt;-&gt;-&gt;-&gt;-&gt;PRODUCTION NUMBER 305<br>-&gt;-&gt;-&gt;-&gt;-&gt;-&gt;PRODUCTION NUMBER 302<br></font><br>------------------------------------------------------------------------------------------------------------------------------------------------------<br>  HAL/S REL32V0                T I T A N  S Y S T E M S  C O R P .                 AUGUST 11, 2024    6:17:20.50     PAGE 3<br>STMT                                                  SOURCE                                                  CURRENT SCOPE<br><br>   1 M| HELLO:                                                                                              |HELLO<br>   1 M| PROGRAM;                                                                                            |HELLO<br><font color="#009900">-&gt;-&gt;-&gt;-&gt;-&gt;-&gt;PRODUCTION NUMBER 362<br>-&gt;-&gt;-&gt;-&gt;-&gt;-&gt;PRODUCTION NUMBER 389<br>-&gt;-&gt;-&gt;-&gt;-&gt;-&gt;PRODUCTION NUMBER 386<br>-&gt;-&gt;-&gt;-&gt;-&gt;-&gt;PRODUCTION NUMBER 380<br>-&gt;-&gt;-&gt;-&gt;-&gt;-&gt;PRODUCTION NUMBER 374<br>-&gt;-&gt;-&gt;-&gt;-&gt;-&gt;PRODUCTION NUMBER 366<br>-&gt;-&gt;-&gt;-&gt;-&gt;-&gt;PRODUCTION NUMBER 361<br>-&gt;-&gt;-&gt;-&gt;-&gt;-&gt;PRODUCTION NUMBER 346<br>-&gt;-&gt;-&gt;-&gt;-&gt;-&gt;PRODUCTION NUMBER 344<br>-&gt;-&gt;-&gt;-&gt;-&gt;-&gt;PRODUCTION NUMBER 343<br></font>   2 M|   DECLARE I INTEGER;                                                                                |HELLO<br><font color="#009900">-&gt;-&gt;-&gt;-&gt;-&gt;-&gt;PRODUCTION NUMBER 333<br>-&gt;-&gt;-&gt;-&gt;-&gt;-&gt;PRODUCTION NUMBER 349<br>-&gt;-&gt;-&gt;-&gt;-&gt;-&gt;PRODUCTION NUMBER 362<br></font>⋮<br></pre>
            </blockquote>
          </td>
        </tr>
        <tr>
          <td valign="top">¢9</td>
          <td valign="top">No</td>
          <td valign="top">No</td>
          <td valign="top">No</td>
          <td valign="top"><font color="#009900">Yes</font><br>
          </td>
          <td valign="top">Includes a stack trace in PASS2's output
            report.&nbsp; And misspells "stack" in some places, which
            seems like a real accomplishment.<br>
            <blockquote>
              <pre>PAGE 1<br><br><br>   HAL/S COMPILER PHASE 2  --  VERSION OF AUGUST 9, 2024.  CLOCK TIME = 12:39:23.00<br><br>HAL/S PHASE 2 ENTERED AUGUST 11, 2024.  CLOCK TIME = 6:21:39.17<br><br><font color="#009900">GOT STAK 1<br>RET STACK 1<br>GOT STAK 1<br>GOT STAK 2<br>RET STACK 2<br>⋮
<br>RET STACK 2<br>RET STACK 1<br>GOT STAK 1<br>GOT STAK 2<br>RET STACK 2<br>RET STACK 1<br></font><br><br> STACK   NAME<br><br><br>------------------------------------------------------------------------------------------------------------------------------------------------------<br>PAGE 3<br><br>    20  HELLO<br><br><br>       OPTIONAL TABLE SIZES<br><br>NAME       REQUESTED    USED<br>^^^^       ^^^^^^^^^    ^^^^<br> <br>LITSTRINGS      2000      68<br>LABELSIZE       1200       8<br>⋮
</pre>
            </blockquote>
          </td>
        </tr>
        <tr>
          <td valign="top">¢A</td>
          <td valign="top"><font color="#009900">Yes</font></td>
          <td valign="top">No</td>
          <td valign="top">No</td>
          <td valign="top">No</td>
          <td valign="top">Immediately terminates PASS1.<br>
          </td>
        </tr>
        <tr>
          <td valign="top">¢B</td>
          <td valign="top"><font color="#009900">Yes</font></td>
          <td valign="top">No</td>
          <td valign="top">No</td>
          <td valign="top">No</td>
          <td valign="top">In the PASS1 output report, print HALMAT
            intermediate language after each "block".&nbsp; I'm not sure
            what a "block" is, but I'm sure that a HAL/S <code>PROGRAM</code>,
            <code>PROCEDURE</code>, or <code>FUNCTION</code> must
            certainly be one.&nbsp; Note that the HALMAT statements may
            be reordered versus those inlined with the HAL/S source code
            by the ¢0 option (see above).<br>
            <blockquote>
              <pre>⋮<br>   1 M| HELLO:                                                                                              |HELLO<br>   1 M| PROGRAM;                                                                                            |HELLO<br>   2 M|   DECLARE I INTEGER;                                                                                |HELLO<br>   3 M|   DECLARE MY_NAME CHARACTER(20) INITIAL('RON BURKEY');                                              |HELLO<br>   4 M|   DECLARE INTEGER, J;                                                                               |HELLO<br>   5 M|   REPLACE PRINTER BY "6";                                                                           |HELLO<br>   6 M|   WRITE(PRINTER) 'THE BEGINNING';                                                                   |HELLO<br>                ^^^^^^^                                                                                     <br>   7 M|   DO FOR I = 1 TO 5;                                                                                |HELLO<br>   8 M| 1   WRITE(PRINTER) I, 'HELLO, WORLD!';                                                              |HELLO<br>                  ^^^^^^^                                                                                   <br>   9 M| 1   DO FOR J = 2 TO 8 BY 2;                                                                         |HELLO<br><br>     E|                            ,                                                                        | <br>  10 M| 2     WRITE(PRINTER) J, MY_NAME, 'SAYS ISN''T THIS FUN?';                                           |HELLO<br>                    ^^^^^^^                                                                                 <br>  11 M| 1   END;                                                                                            |ST#9<br>  12 M|   END;                                                                                              |ST#7<br>  13 M|   WRITE(6) 'THE END';                                                                               |HELLO<br>  14 M| CLOSE HELLO;                                                                                        |HELLO<br><br>------------------------------------------------------------------------------------------------------------------------------------------------------<br>  HAL/S REL32V0                T I T A N  S Y S T E M S  C O R P .                 AUGUST 11, 2024    6:29:48.84     PAGE 4<br>STMT                                                  SOURCE                                                  CURRENT SCOPE<br><br><br><font color="#009900">         *** HALMAT BLOCK 0 ***<br><br><br> HALMAT LINE     0:     5(  1),0, 0<br>                                     :     87(  0) 0,0<br> HALMAT LINE     2:    2B(  1),0, 0<br>                                     :      1(SYT) 0,0<br> HALMAT LINE     4:     4(  1),N, 0<br>                                     :      1(  0) 0,1<br> HALMAT LINE     6:     4(  1),N, 0<br>                                     :      2(  0) 0,0<br> HALMAT LINE     8:   841(  2),0, 2<br>                                     :      3(SYT) 0,0<br>                                                         :      2(LIT) 0,0<br> HALMAT LINE    11:     4(  1),N, 0<br>                                     :      3(  0) 0,0<br></font>⋮<br></pre>
            </blockquote>
          </td>
        </tr>
        <tr>
          <td valign="top">¢C</td>
          <td valign="top"><font color="#009900">Yes</font></td>
          <td valign="top">No</td>
          <td valign="top">No</td>
          <td valign="top">No</td>
          <td valign="top">Print Phase 1 state trace.&nbsp; The compiler
            is a kind of <a moz-do-not-send="true"
              href="https://en.wikipedia.org/wiki/Finite-state_machine">state


















              machine</a>, with each state having a unique identifying
            number.&nbsp; However, the state transitions are
            table-driven, with both the state numbering and the
            state-tables having been computer generated by an automated
            system based on the book <i>A Compiler Generator</i> by
            McKeeman <i>et al</i>.&nbsp; The point of that
            techno-babble explanation is that the compiler's "states"
            are extremely human-unfriendly, and indeed almost
            uninterpretable without computer assistance, so it's unclear
            how to make use of any knowledge about them.&nbsp; (Perhaps
            that's my own ignorance getting the better of me, so I'd be
            interested to hear any explanation of how the state trace
            might be helpful.&nbsp; Though if you do try to explain it
            to me, it may become more of a state trance than a state
            trace.)<br>
            <blockquote>
              <pre>⋮
     D| EBUG `C                                                                                             |<br><font color="#009900"> COMP: STATE=1 I=0 J=0<br> COMP: STATE=138 I=2 J=0<br> COMP: STATE=1118 I=251 J=0<br> COMP: STATE=655 I=688 J=1<br> COMP: STATE=1119 I=859 J=1<br> COMP: STATE=394 I=701 J=1<br> COMP: STATE=1121 I=1079 J=1<br> COMP: STATE=647 I=702 J=1<br> COMP: STATE=1115 I=825 J=1<br> COMP: STATE=391 I=687 J=1<br> COMP: STATE=1112 I=1073 J=1<br></font><br>------------------------------------------------------------------------------------------------------------------------------------------------------<br>  HAL/S REL32V0                T I T A N  S Y S T E M S  C O R P .                 AUGUST 11, 2024    6:35:35.36     PAGE 3<br>STMT                                                  SOURCE                                                  CURRENT SCOPE<br><br>   1 M| HELLO:                                                                                              |HELLO<br>   1 M| PROGRAM;                                                                                            |HELLO<br><font color="#009900"> COMP: STATE=618 I=686 J=1<br> COMP: STATE=345 I=706 J=1<br> COMP: STATE=144 I=901 J=1<br> COMP: STATE=538 I=283 J=1<br> COMP: STATE=1172 I=375 J=1<br></font>⋮
</pre>
            </blockquote>
          </td>
        </tr>
        <tr>
          <td valign="top">¢D</td>
          <td valign="top"><font color="#009900">Yes</font></td>
          <td valign="top">No</td>
          <td valign="top">No</td>
          <td valign="top">No</td>
          <td valign="top">Documentation describes this option as "Turn
            on standard Phase 1 listing".&nbsp; The "standard source
            listing" is the inclusion of the HAL/S source code in
            PASS1's output report that has been ubiquitous in all of the
            PASS1 reports we've seen so far.&nbsp; However, in practice
            ¢D operates in an unexpected way.&nbsp; Inclusion of the
            standard source listing is by default initially <i>enabled</i>,
            but in the table of ¢<i>T</i> options is (like all ¢<i>T</i>
            options) initially marked as <i>disabled</i>.&nbsp;
            Therefore, the first time ¢D is encountered, inclusion of
            the standard output listing simply remains enabled.&nbsp;
            Subsequent occurrences of ¢D will then properly toggle
            it.&nbsp; To avoid confusion, it's best to always use ¢D+ or
            ¢D-, rather than simply expecting ¢D to produce the desired
            result.&nbsp; I'd regard this as a bug in the original
            compiler.<br>
          </td>
        </tr>
        <tr>
          <td valign="top">¢E</td>
          <td valign="top"><font color="#009900">Yes</font></td>
          <td valign="top">No</td>
          <td valign="top">No</td>
          <td valign="top">No</td>
          <td valign="top">This adds a table of numeric and string
            literals to PASS1's output report.&nbsp; Numbers, even if
            integers rather than floating-point, are printed as
            hexadecimal representations of double-precision <a
              moz-do-not-send="true"
              href="https://en.wikipedia.org/wiki/IBM_hexadecimal_floating-point">IBM


















              hexadecimal floating-point</a> format.&nbsp; For example,
            the integer literal 20 will be printed as
            4214000000000000.&nbsp; As obtuse as that seems at first
            glance, it's actually useful information:&nbsp; The compiler
            communicates the values of literals from one compiler pass
            to the next in a file (the "literal file"), and the literal
            file does use the IBM hex format for all numbers.&nbsp; Thus
            knowing the IBM hex values is exactly what's needed for
            interpreting the literal file.&nbsp; (See <a
              moz-do-not-send="true" href="#filesUsed">the next section</a>
            for more info about files produced by the compiler.)<br>
            <blockquote>
              <pre>⋮
S Y M B O L  &amp;  C R O S S   R E F E R E N C E   T A B L E   L I S T I N G :<br><br>         (CROSS REFERENCE FLAG KEY:  4 = ASSIGNMENT, 2 = REFERENCE, 1 = SUBSCRIPT USE, 0 = DEFINITION)<br><br> DCL  NAME            TYPE                          ATTRIBUTES &amp; CROSS REFERENCE<br> <br>   1  HELLO     PROGRAM                              XREF: 0 0001  <br>   2  I         INTEGER                            SINGLE, ALIGNED, STATIC   XREF: 0 0002  4 0007  2 0008  <br>   4  J         INTEGER                            SINGLE, ALIGNED, STATIC   XREF: 0 0004  4 0009  2 0010  <br>   3  MY_NAME   CHARACTER(20)                      ALIGNED, STATIC, INITIAL  XREF: 0 0003  2 0010  <br>   5  PRINTER   REPLACE MACRO                      MACRO TEXT="6"    XREF: 0 0005  2 0006  2 0008  2 0010  <br><br><br><br><font color="#009900">L I T E R A L   T A B L E   D U M P:<br><br> LOC  TYPE          LITERAL<br> <br>   1 ARITH  4214000000000000<br>   2  CHAR  RON BURKEY<br>   3 ARITH  4160000000000000<br>   4  CHAR  THE BEGINNING<br>   5 ARITH  4110000000000000<br>   6 ARITH  4150000000000000<br>   7 ARITH  4160000000000000<br>   8  CHAR  HELLO, WORLD!<br>   9 ARITH  4120000000000000<br>  10 ARITH  4180000000000000<br>  11 ARITH  4120000000000000<br>  12 ARITH  4160000000000000<br>  13  CHAR  SAYS ISN'T THIS FUN?<br>  14 ARITH  4160000000000000<br>  15  CHAR  THE END<br></font>⋮
</pre>
            </blockquote>
          </td>
        </tr>
        <tr>
          <td valign="top">¢F</td>
          <td valign="top"><font color="#009900">Yes</font></td>
          <td valign="top">No</td>
          <td valign="top">No</td>
          <td valign="top">No</td>
          <td valign="top">This adds some extra info to the symbol-table
            listing provided in PASS1's output report.<br>
            <blockquote>
              <pre>⋮
S Y M B O L  &amp;  C R O S S   R E F E R E N C E   T A B L E   L I S T I N G :<br><br>         (CROSS REFERENCE FLAG KEY:  4 = ASSIGNMENT, 2 = REFERENCE, 1 = SUBSCRIPT USE, 0 = DEFINITION)<br><br> DCL  NAME            TYPE                          ATTRIBUTES &amp; CROSS REFERENCE<br> <br>   1  HELLO     PROGRAM                            <font color="#009900">FLAGS=20040, NEST=0, SCOPE=1, PTR=2, LENGTH=0, LINK1=-1, LINK2=0, SYT_NO=1, <br>                                                   ARRAY=-8192, ADDR=0, CLASS=2, TYPE=73   </font>  XREF: 0 0001  <br>   2  I         INTEGER                            SINGLE, ALIGNED, STATIC<font color="#009900">, FLAGS=808208, NEST=1, SCOPE=1, PTR=0, LENGTH=0, <br>                                                   LINK1=0, LINK2=0, SYT_NO=2, ARRAY=0, ADDR=0, CLASS=1, TYPE=6     </font> XREF: 0 0002  <br>                                                   4 0007  2 0008  <br>   3  MY_NAME   CHARACTER(20)                      ALIGNED, STATIC, INITIAL<font color="#009900">, FLAGS=8A08, NEST=1, SCOPE=1, PTR=0, LENGTH=20, <br>                                                   LINK1=0, LINK2=0, SYT_NO=3, ARRAY=0, ADDR=0, CLASS=1, TYPE=2</font>      XREF: 0 0003  <br>                                                   2 0010  <br>   4  J         INTEGER                            SINGLE, ALIGNED, STATIC<font color="#009900">, FLAGS=808208, NEST=1, SCOPE=1, PTR=0, LENGTH=0, <br>                                                   LINK1=0, LINK2=0, SYT_NO=4, ARRAY=0, ADDR=0, CLASS=1, TYPE=6</font>      XREF: 0 0004  <br>                                                   4 0009  2 0010  <br>   5  PRINTER   REPLACE MACRO                      <font color="#009900">FLAGS=C000, NEST=1, SCOPE=1, PTR=0, LENGTH=0, LINK1=0, LINK2=0, SYT_NO=5, <br>                                                   ARRAY=0, ADDR=0, CLASS=6, TYPE=0,</font> MACRO TEXT="6"  XREF: 0 0005  2 0006  2 0008  <br>                                                   2 0010  <br>⋮
</pre>
            </blockquote>
          </td>
        </tr>
        <tr>
          <td valign="top">¢G</td>
          <td valign="top">No<br>
          </td>
          <td valign="top">No<br>
          </td>
          <td valign="top">No<br>
          </td>
          <td valign="top">No<br>
          </td>
          <td valign="top">(The compiler accepts option ¢G, but it is
            apparently not used for anything.)<br>
          </td>
        </tr>
        <tr>
          <td valign="top">H(1)<br>
          </td>
          <td valign="top">No<br>
          </td>
          <td valign="top">TBD<br>
          </td>
          <td valign="top">TBD<br>
          </td>
          <td valign="top">No<br>
          </td>
          <td valign="top"><a moz-do-not-send="true"
              href="Shuttle/19760020796.pdf#page=661">Documentation</a>
            describes this as "Optimizer off until next such statement
            encountered. No CSE's recognized across the pair of
            DEBUG's".&nbsp; A more-understandable explanation is
            TBD.&nbsp; I can say with confidence that it does <i>not</i>
            affect the optimized HALMAT output by the OPT pass, other
            than storing 1 in the location reserved for the value of H(<i>n</i>).<br>
          </td>
        </tr>
        <tr>
          <td valign="top">H(2)<br>
          </td>
          <td valign="top">No<br>
          </td>
          <td valign="top">TBD<br>
          </td>
          <td valign="top">TBD<br>
          </td>
          <td valign="top">No<br>
          </td>
          <td valign="top"><a moz-do-not-send="true"
              href="Shuttle/19760020796.pdf#page=661">Documentation</a>
            describes this as "Same as above, but CSE's may be
            recognized across the pair".&nbsp; A more-understandable
            explanation is TBD. </td>
        </tr>
        <tr>
          <td valign="top">H(3)<br>
          </td>
          <td valign="top">No<br>
          </td>
          <td valign="top">TBD<br>
          </td>
          <td valign="top">TBD<br>
          </td>
          <td valign="top">No<br>
          </td>
          <td valign="top"><a moz-do-not-send="true"
              href="Shuttle/19760020796.pdf#page=661">Documentation</a>
            describes this as "WATCH status changed", which appears to
            mean that printing of HALMAT changes is toggled on or
            off.&nbsp; Whether this option is available in HAL/S-FC
            versus whether it is confined to HAL/S-360 is TBD.&nbsp; A
            more-understandable explanation is TBD. </td>
        </tr>
        <tr>
          <td valign="top">H(5)<br>
          </td>
          <td valign="top">No<br>
          </td>
          <td valign="top"><font color="#009900">Yes</font><br>
          </td>
          <td valign="top">No<br>
          </td>
          <td valign="top">No<br>
          </td>
          <td valign="top">Toggles tracing that's similar (but
            apparently not identical) to that of the X5 compiler
            option.&nbsp; See X5 in the preceding section for a sample.<br>
          </td>
        </tr>
        <tr>
          <td valign="top">H(6) <br>
          </td>
          <td valign="top">No<br>
          </td>
          <td valign="top"><font color="#009900">Yes</font> </td>
          <td valign="top">No<br>
          </td>
          <td valign="top">No<br>
          </td>
          <td valign="top">The H(6) option embeds HALMAT into OPT's
            output report.&nbsp; Put another way, it does for OPT what
            ¢5 does for PASS2.&nbsp; (See ¢5 above.)<br>
          </td>
        </tr>
        <tr>
          <td valign="top">H(7)<br>
          </td>
          <td valign="top">No<br>
          </td>
          <td valign="top">TBD<br>
          </td>
          <td valign="top">TBD<br>
          </td>
          <td valign="top">No<br>
          </td>
          <td valign="top"><a moz-do-not-send="true"
              href="Shuttle/19760020796.pdf#page=661">Documentation</a>
            describes this as "HALMAT_BLAB status changed".&nbsp; A
            more-understandable explanation is TBD.&nbsp; I do not
            observe any effect on the output reports.<br>
          </td>
        </tr>
        <tr>
          <td valign="top">H(64)<br>
          </td>
          <td valign="top">No<br>
          </td>
          <td valign="top">TBD<br>
          </td>
          <td valign="top">TBD<br>
          </td>
          <td valign="top">No<br>
          </td>
          <td valign="top"><a moz-do-not-send="true"
              href="Shuttle/19760020796.pdf#page=661">Documentation</a>
            describes this as "Set VALIDITY TRACE status changed".&nbsp;
            A more-understandable explanation is TBD.&nbsp; I do not
            observe any effect on the output reports. </td>
        </tr>
        <tr>
          <td valign="top">H(200)<br>
          </td>
          <td valign="top">No </td>
          <td valign="top">No </td>
          <td valign="top">No </td>
          <td valign="top"><font color="#009900">Yes</font> </td>
          <td valign="top">In PASS2's output report, disables HALMAT
            (¢5-), assembler code (¢6-), and stack trace (¢9-) </td>
        </tr>
        <tr>
          <td valign="top">H(201)<br>
          </td>
          <td valign="top">No </td>
          <td valign="top">No </td>
          <td valign="top">No </td>
          <td valign="top"><font color="#009900">Yes</font> </td>
          <td valign="top">In PASS2's output report, enables HALMAT
            (¢5+), assembler code (¢6+), and stack trace (¢9+) </td>
        </tr>
        <tr>
          <td valign="top">H(202)<br>
          </td>
          <td valign="top">No </td>
          <td valign="top">No </td>
          <td valign="top">No </td>
          <td valign="top"><font color="#009900">Yes</font> </td>
          <td valign="top">In PASS2's output report, disables HALMAT
            (¢5-) and assembler code (¢6-) </td>
        </tr>
        <tr>
          <td valign="top">H(203)<br>
          </td>
          <td valign="top">No </td>
          <td valign="top">No </td>
          <td valign="top">No </td>
          <td valign="top"><font color="#009900">Yes</font> </td>
          <td valign="top">In PASS2's output report, enables HALMAT
            (¢5+) and assembler code (¢6+) </td>
        </tr>
        <tr>
          <td valign="top">H(204)<br>
          </td>
          <td valign="top">No </td>
          <td valign="top">No </td>
          <td valign="top">No </td>
          <td valign="top"><font color="#009900">Yes</font> </td>
          <td valign="top">In PASS2's output report, toggles the
            register trace.&nbsp; There's an excerpt below of PASS2's
            output report from HELLO.hal showing the effect.&nbsp;
            Presumably it would be more-meaningful intermixed with
            HALMAT or assembly code, but in the interest of space I
            haven't done that.&nbsp; While I cannot give you a full
            explanation of how to read the trace, I'd venture the
            following guesses:<br>
            <ul>
              <li>R indicates a particular AP-101S CPU register.</li>
              <li>NAME tells you the identifier of the variable stored
                in it.</li>
              <li>VAR gives you the "DCL" number of the variable in the
                symbol table in PASS1's output report</li>
              <li>TYP indicates the datatype of the variable stored in
                the register.&nbsp; 2 is <code>CHARACTER</code>, 5 is <code>SCALAR</code>,
                6 is <code>INTEGER</code>.&nbsp; (The complete list of
                numeric codes for datatypes can be found beginning at
                punchcard 00150900 in <a moz-do-not-send="true"
href="https://github.com/virtualagc/virtualagc/blob/master/yaShuttle/Source%20Code/PASS.REL32V0/PASS1.PROCS/%23%23DRIVER.xpl">HAL/S-FC


















                  source-code file PASS1.PROCS/##DRIVER.xpl</a>, though
                since most of the datatypes won't fit in a single CPU
                register, not all of the codes are applicable to the
                register trace.)<br>
              </li>
            </ul>
            <blockquote>
              <pre>PAGE 1<br><br><br>   HAL/S COMPILER PHASE 2  --  VERSION OF AUGUST 9, 2024.  CLOCK TIME = 12:39:23.00<br><br>HAL/S PHASE 2 ENTERED AUGUST 11, 2024.  CLOCK TIME = 9:34:6.06<br><br><font color="#009900"> R USE LIN CTN TYP VAR XR XS     XC  CONST   XCON MULT VR2  NAME<br> 5  1    0   5   6   0  0  0      0      3      0    0   0<br> 6  1    0   5   6   0  0  0      0      6      0    0   0<br> R USE LIN CTN TYP VAR XR XS     XC  CONST   XCON MULT VR2  NAME<br> 7  1    0   1   6   2  0  0      0      0      0    0   0   I<br> R USE LIN CTN TYP VAR XR XS     XC  CONST   XCON MULT VR2  NAME<br> 5  1    0   1   6   2  0  0      0      0      0    0   0   I<br> 6  1    0   5   6   0  0  0      0      6      0    0   0<br> 7  1    0   1   6   2  0  0      0      0      0    0   0   I<br> R USE LIN CTN TYP VAR XR XS     XC  CONST   XCON MULT VR2  NAME<br> 4  1    0   1   6   4  0  0      0      0      0    0   0   J<br> R USE LIN CTN TYP VAR XR XS     XC  CONST   XCON MULT VR2  NAME<br> 4  1    0   1   6   4  0  0      0      0      0    0   0   J<br> 5  1    0   1   6   4  0  0      0      0      0    0   0   J<br> 6  1    0   5   6   0  0  0      0      6      0    0   0<br> R USE LIN CTN TYP VAR XR XS     XC  CONST   XCON MULT VR2  NAME<br> 5  1    0   5   6   4  0  0      0      3      0    0   0<br> 6  1    0   5   6   0  0  0      0      6      0    0   0<br> R USE LIN CTN TYP VAR XR XS     XC  CONST   XCON MULT VR2  NAME<br> 4  1   -1  10   6   4  0  0      0      0      0    0   0<br></font><br><br> STACK   NAME<br>    20  HELLO<br>⋮</pre>
            </blockquote>
          </td>
        </tr>
        <tr>
          <td valign="top">H(205)<br>
          </td>
          <td valign="top">No </td>
          <td valign="top">No </td>
          <td valign="top">No </td>
          <td valign="top"><font color="#009900">Yes</font> </td>
          <td valign="top">In PASS2's output report, toggles HALMAT
            (¢5). </td>
        </tr>
        <tr>
          <td valign="top">H(206)<br>
          </td>
          <td valign="top">No </td>
          <td valign="top">No </td>
          <td valign="top">No </td>
          <td valign="top"><font color="#009900">Yes</font> </td>
          <td valign="top">In PASS2's output report, toggles assembler
            code (¢6). </td>
        </tr>
        <tr>
          <td valign="top">H(207)<br>
          </td>
          <td valign="top">No </td>
          <td valign="top">No </td>
          <td valign="top">No </td>
          <td valign="top"><font color="#009900">Yes</font> </td>
          <td valign="top">In PASS2's output report, toggles binary
            code. This is just what it sounds like:<br>
            <blockquote>
              <pre>PAGE 1<br><br><br>   HAL/S COMPILER PHASE 2  --  VERSION OF AUGUST 9, 2024.  CLOCK TIME = 12:39:23.00<br><br>HAL/S PHASE 2 ENTERED AUGUST 11, 2024.  CLOCK TIME = 9:53:49.38<br><br><font color="#009900">000000:    49,   0001<br>000000:    38,   0002<br>000000:   80000000<br>000000:     0,   0000<br>000001:     0,   0000<br>000002:    43,   1001<br>000002:    43,   4003<br>000002:    55,   0001<br>000002:   00000700<br>000004:     0,   0000<br>000005:     0,   0000<br>000000:    38,   0003<br></font>⋮
</pre>
            </blockquote>
          </td>
        </tr>
        <tr>
          <td valign="top">H(208)<br>
          </td>
          <td valign="top">No </td>
          <td valign="top">No </td>
          <td valign="top">No </td>
          <td valign="top"><font color="#009900">Yes</font> </td>
          <td valign="top">In PASS2's output report, toggles subscript
            trace. Our simple HELLO.hal test program doesn't actually
            have any array variables in it, so a subscript trace shows
            nothing at all.&nbsp; Let's instead use <a
              moz-do-not-send="true"
href="https://github.com/virtualagc/virtualagc/blob/master/yaShuttle/Source%20Code/Programming%20in%20HAL-S/106-EXAMPLE_2.hal">the


















              EXAMPLE_2 program</a> from <a moz-do-not-send="true"
              href="Shuttle/Programming%20in%20HAL_S%20Sept%201978.pdf#page=106">p.


















              6-6 of Ryer's "Programming in HAL/S"</a>, which looks like
            so:<br>
            <blockquote>
              <pre><font color="#663300">  EXAMPLE_2:<br>  PROGRAM;<br>     DECLARE GYRO_INPUT ARRAY(4, 3) INTEGER <br>             INITIAL(1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12);<br>     DECLARE ATT_RATE ARRAY(4, 3) SCALAR;<br>     DECLARE SCALE ARRAY(3) CONSTANT(.013, .026, .013);<br>     DECLARE BIAS SCALAR INITIAL(57.296);<br>     DO FOR TEMPORARY I = 1 TO 4;<br>        DO FOR TEMPORARY J = 1 TO 3;<br>M          ATT_RATE    = GYRO_INPUT    SCALE  + BIAS;<br>S                  I,J             I,J      J<br><br>        END;<br>     END;<br>     WRITE(6) ATT_RATE;<br>  CLOSE EXAMPLE_2;</font><br></pre>
            </blockquote>
            Compiling this with the H(208) option enabled gives the
            following PASS2 output report:<br>
            <blockquote>
              <pre>PAGE 1<br><br><br>   HAL/S COMPILER PHASE 2  --  VERSION OF AUGUST 9, 2024.  CLOCK TIME = 12:39:23.00<br><br>HAL/S PHASE 2 ENTERED AUGUST 11, 2024.  CLOCK TIME = 10:7:31.25<br><br><font color="#009900">INX_CON=0, SUB#=1<br>INX_CON=0, SUB#=2<br>INX_CON=0, SUB#=2<br>INX_CON=0, SIZE/ROW=1, COLUMN=0<br>INX_CON=0, SUB#=1<br>INX_CON=0, SUB#=2<br>INX_CON=0, SUB#=2<br>INX_CON=0, SIZE/ROW=1, COLUMN=0<br>INX_CON=0, SUB#=1<br>INX_CON=0, SUB#=1<br>INX_CON=0, SIZE/ROW=1, COLUMN=0<br></font><br><br> STACK   NAME<br>    20  EXAMPLE_2<br><br><br>       OPTIONAL TABLE SIZES<br><br>NAME       REQUESTED    USED<br>^^^^       ^^^^^^^^^    ^^^^<br> <br>LITSTRINGS      2000       0<br>LABELSIZE       1200      10<br> <br> <br>46 HALMAT OPERATORS CONVERTED<br> <br>45 INSTRUCTIONS GENERATED<br> <br>68 HALFWORDS OF PROGRAM, 54 HALFWORDS OF DATA.<br> <br>MAX. OPERAND STACK SIZE            =10<br>END  OPERAND STACK SIZE            =0<br>MAX. STORAGE DESCRIPTOR STACK SIZE =3<br>END  STORAGE DESCRIPTOR STACK SIZE =0<br>NUMBER OF MINOR COMPACTIFIES       =0<br>NUMBER OF MAJOR COMPACTIFIES       =0<br>NUMBER OF REALLOCATIONS            =5<br>FREE STRING AREA                   =16623296<br> <br>END OF HAL/S PHASE 2 AUGUST 11, 2024.  CLOCK TIME = 10:7:31.25<br>TOTAL CPU TIME FOR PHASE 2       0:0:0.01<br>CPU TIME FOR PHASE 2 SET UP      0:0:0.01<br>CPU TIME FOR PHASE 2 GENERATION  0:0:0.00<br>CPU TIME FOR PHASE 2 CLEAN UP    0:0:0.00<br></pre>
            </blockquote>
          </td>
        </tr>
        <tr>
          <td valign="top">H(209)<br>
          </td>
          <td valign="top">No </td>
          <td valign="top">No </td>
          <td valign="top">No </td>
          <td valign="top"><font color="#009900">Yes</font> </td>
          <td valign="top">In PASS2's output report, toggles stack trace
            (¢9). </td>
        </tr>
      </tbody>
    </table>
    <h1><a name="filesUsed"></a>Files Used or Created by the HAL/S
      Compiler</h1>
    Among themselves, the seven passes of HAL/S-FC use a
    somewhat-consistent scheme for associating filenames to file
    numbers, though not all of the passes necessarily use all of the
    files.&nbsp; I say "somewhat", because files output by one pass are
    occasionally input to another pass using a different file
    number.&nbsp; Here's a handy table that summarizes the file usage of
    each pass.&nbsp; When you see something italicized, such as <i><code>halmat.bin</code></i>
    in <code><font color="#663300">--raf=B,7200,1,<i>halmat.bin</i></font></code>,
    I mean to imply that while these are the names that the shell script
    <b>HALSFC</b> uses, you may or may not want to choose a different
    name if you were to bypass <b>HALSFC</b> and concoct your own
    program flow.&nbsp; On the other hand, the names must be consistent
    between the passes outputting them and the passes using them as
    input.&nbsp; The cells that have been highlighted in color emphasize
    those places in which the <i>same</i> file must be used on
    successive passes; in the case of the virtual-memory file, I don't
    know if the same file is used on successive passes or not, so I
    haven't highlighted it, but I've been using the same file without
    any apparent difficulty.<br>
    <br>
    <table width="100%" cellspacing="2" cellpadding="2" border="1">
      <tbody>
        <tr>
          <th valign="bottom">HAL/S-FC Usage<br>
          </th>
          <th valign="bottom">PASS1 or PASS1B<br>
          </th>
          <th valign="bottom">FLO<br>
          </th>
          <th valign="bottom">OPT or OPTB<br>
          </th>
          <th valign="bottom">AUXP<br>
          </th>
          <th valign="bottom">PASS2 or PASS2B<br>
          </th>
          <th valign="bottom">PASS3 or PASS3B<br>
          </th>
          <th valign="bottom">PASS4<br>
          </th>
          <th valign="bottom">Notes<br>
          </th>
        </tr>
        <tr>
          <td valign="middle" align="center">Input HAL source code<br>
          </td>
          <td valign="middle" align="center"><b><code><font
                  color="#663300">--ddi=0,<i>SOURCEFILE</i>.hal</font></code></b><b>
              or </b><b><code><font color="#663300">stdin<br>
                </font></code></b></td>
          <td valign="middle" align="center"><b>n/a</b><b><br>
            </b> </td>
          <td valign="middle" align="center"><b>n/a</b></td>
          <td valign="middle" align="center"><b>n/a</b></td>
          <td valign="middle" align="center"><b>n/a</b></td>
          <td valign="middle" align="center"><b>n/a</b></td>
          <td valign="middle" align="center"><b>n/a</b></td>
          <td valign="middle"><br>
          </td>
        </tr>
        <tr>
          <td valign="middle" align="center">Output report<br>
          </td>
          <td valign="top" align="center"><b><font color="#663300"><code>--ddo=0,<i>pass1.rpt</i></code></font></b><b>
              or </b><b><font color="#663300"><code>stdout</code></font></b><b><br>
            </b> </td>
          <td valign="middle" align="center"><b><font color="#663300"><code>--ddo=0,<i>flo.rpt</i></code></font></b><b>
              or </b><b><font color="#663300"><code>stdout</code></font></b></td>
          <td valign="middle" align="center"><b><font color="#663300"><code>--ddo=0,<i>opt.rpt</i></code></font></b><b>
              or </b><b><font color="#663300"><code>stdout</code></font></b></td>
          <td valign="middle" align="center"><b><font color="#663300"><code>--ddo=0,<i>auxp.rpt</i></code></font></b><b>
              or </b><b><font color="#663300"><code>stdout</code></font></b></td>
          <td valign="middle" align="center"><b><font color="#663300"><code>--ddo=0,<i>pass2.rpt</i></code></font></b><b>
              or </b><b><font color="#663300"><code>stdout</code></font></b></td>
          <td valign="middle" align="center"><b><font color="#663300"><code>--ddo=0,<i>pass3.rpt</i></code></font></b><b>
              or </b><b><font color="#663300"><code>stdout</code></font></b></td>
          <td valign="middle" align="center"><b><font color="#663300"><code>--ddo=0,<i>pass4.rpt


















                  </i></code></font></b><b>or </b><b><font
                color="#663300"><code>stdout</code></font></b></td>
          <td valign="middle"><br>
          </td>
        </tr>
        <tr>
          <td valign="middle" align="center">Output error messages<br>
          </td>
          <td valign="middle" align="center"><b><font color="#663300"><code>stderr</code></font></b><b><br>
            </b> </td>
          <td valign="middle" align="center"><b><font color="#663300"><code>stderr</code></font></b></td>
          <td valign="middle" align="center"><b><font color="#663300"><code>stderr</code></font></b></td>
          <td valign="middle" align="center"><b><font color="#663300"><code>stderr</code></font></b></td>
          <td valign="middle" align="center"><b><font color="#663300"><code>stderr</code></font></b></td>
          <td valign="middle" align="center"><b><font color="#663300"><code>stderr</code></font></b></td>
          <td valign="middle" align="center"><b><font color="#663300"><code>stderr</code></font></b></td>
          <td valign="middle"><br>
          </td>
        </tr>
        <tr>
          <td valign="middle" align="center">Extra listing file, plus
            SPACELIB error messages<br>
          </td>
          <td valign="middle" align="center"><b><font color="#663300"><code>--ddo=2,<i>listing2</i>.txt</code></font></b><b><br>
            </b> </td>
          <td valign="middle" align="center"><b><font color="#663300"><code></code></font></b><b>n/a</b></td>
          <td valign="middle" align="center"><font color="#663300"><code></code></font><b>n/a</b>
          </td>
          <td valign="middle" align="center"><font color="#663300"><code></code></font><b>n/a</b>
          </td>
          <td valign="middle" align="center"><font color="#663300"><code></code></font><b>n/a</b>
          </td>
          <td valign="middle" align="center"><font color="#663300"><code></code></font><b>TBD</b>
          </td>
          <td valign="middle" align="center"><b>TBD</b> </td>
          <td valign="middle">This file is produced by PASS1 if
            "LISTING2" is among the compiler options.&nbsp; (The
            memory-management system may also direct certain error
            messages to this device, but that's presently TBD.)<br>
          </td>
        </tr>
        <tr>
          <td valign="middle" align="center">AP-101S object code<br>
          </td>
          <td valign="middle" align="center"><b>n/a</b><b><br>
            </b></td>
          <td valign="middle" align="center"><b>n/a</b></td>
          <td valign="middle" align="center"><b>n/a</b></td>
          <td valign="middle" align="center"><b>n/a</b></td>
          <td valign="middle" align="center"><font color="#663300"><b><code>--ddo=3,<i>cards.bin</i>,E</code></b><font
                color="#000000"> (PASS) or</font></font><br>
            <font color="#663300"><code>-<b>-pdso=3,</b><b><i>cards</i></b><b>,E</b></code></font>
            (BFS)<br>
          </td>
          <td valign="middle" align="center"><b>TBD<br>
            </b></td>
          <td valign="middle" align="center"><b>TBD<br>
            </b></td>
          <td valign="top">Generated object code, in a format similar to
            the IBM 360 object-code format.&nbsp; The PASS and BFS
            versions of the compiler differ, in that the PASS version
            outputs a single object file per HAL/S input file, whereas
            the BFS version output a number of output files as members
            of a partitioned data set in a manner that's TBD.<br>
          </td>
        </tr>
        <tr>
          <td valign="middle" align="center">Object code "deck"<br>
          </td>
          <td valign="middle" align="center"><b>n/a</b></td>
          <td valign="middle" align="center"><b>n/a</b></td>
          <td valign="middle" align="center"><b>n/a</b></td>
          <td valign="middle" align="center"><b>n/a</b></td>
          <td valign="middle" align="center"><b><font color="#663300"><code>--ddo=4,<i>deck</i><i>.bin</i>,E</code></font></b></td>
          <td valign="middle" align="center"><b>TBD</b><br>
          </td>
          <td valign="middle" align="center"><b>TBD</b><br>
          </td>
          <td valign="middle" align="left">An optional copy of the
            object code.&nbsp; For the PASS version of the compiler,
            it's identical to <font color="#663300"><code><i>cards.bin</i></code></font>
            (see above).&nbsp; For the BFS version, it's a single-file
            format, unlike the PDS format of <font color="#663300"><code><i>cards</i></code></font>.<code></code><code></code><font
              color="#663300"><code></code></font><br>
          </td>
        </tr>
        <tr>
          <td valign="middle" align="center">Template library<br>
          </td>
          <td valign="middle" align="center"><b><code><font
                  color="#663300"><font color="#663300">--pdsi=4,TEMPLIB,E<br>
                    --pdso=6,TEMPLIB,E<br>
                  </font></font></code></b></td>
          <td valign="middle" align="center"><b>n/a</b></td>
          <td valign="middle" align="center"><b>n/a</b></td>
          <td valign="middle" align="center"><b>n/a</b></td>
          <td valign="middle" align="center"><b>n/a</b></td>
          <td valign="middle" align="center"><b>n/a</b></td>
          <td valign="middle" align="center"><b>n/a</b></td>
          <td valign="middle">The output is optional, depending on
            whether or not "TEMPLATE" is among the compiler options.<br>
          </td>
        </tr>
        <tr>
          <td valign="middle" align="center">Input error-message library<br>
          </td>
          <td valign="middle" align="center"><b><code><font
                  color="#663300"><font color="#663300">--pdsi=5,/<i>path</i>/<i>to</i>/ERRORLIB</font></font></code></b></td>
          <td valign="middle" align="center"><b>n/a</b> </td>
          <td valign="middle" align="center"><b>n/a</b> </td>
          <td valign="middle" align="center"><b>n/a</b> </td>
          <td valign="middle" align="center"><b><code><font
                  color="#663300"><font color="#663300">--pdsi=5,/<i>path</i>/<i>to</i>/ERRORLIB</font></font></code></b>
          </td>
          <td valign="middle" align="center"><b>TBD</b><br>
          </td>
          <td valign="middle" align="center"><b>TBD</b><br>
          </td>
          <td valign="middle"><font color="#663300"><code>ERRORLIB</code></font>
            is a library of standardized error messages supplied with
            the HAL/S compiler source code, contained in the source tree
            as "<i>virtualagc</i>/yaShuttle/Source
            Code/PASS.REL32V0/ERRORLIB".<br>
            <blockquote><font size="-1"><b>Important note:</b>&nbsp; If
                you accidentally use an <i>incorrect</i> path for this
                library, it will be essentially transparent to you as
                long as the HAL/S code being compiled is
                error-free.&nbsp; But if compilation errors are
                encountered and the path for ERRORLIB is incorrect, the
                original compiler source code doesn't seem to recognize
                the possibility that the desired error message may
                simply not exist in ERRORLIB.&nbsp; Consequently, the
                compiler endlessly searches the missing ERRORLIB for the
                error message it wants to print, and thus never exits.
                Lesson:&nbsp; Get this path correct!&nbsp; The easiest
                way is simply to copy ERRORLIB into the working folder
                which you're using for compiling HAL/S programs, so that
                the path to it is simply "ERRORLIB".</font><br>
            </blockquote>
          </td>
        </tr>
        <tr>
          <td valign="middle" align="center">Input access-rights library<br>
          </td>
          <td valign="middle" align="center"><b><code><font
                  color="#663300">--pdsi=6,ACCESS</font></code></b></td>
          <td valign="middle" align="center"><b>n/a</b> </td>
          <td valign="middle" align="center"><b>n/a</b> </td>
          <td valign="middle" align="center"><b>n/a</b> </td>
          <td valign="middle" align="center"><b>n/a</b> </td>
          <td valign="middle" align="center"><b>TBD</b> </td>
          <td valign="middle" align="center"><b>TBD</b> </td>
          <td valign="middle"><font color="#663300"><code>ACCESS</code></font>
            is a library of access-code rights, by which different
            sections of HAL/S code can be restricted in terms of what
            other code they can access.&nbsp; The supplied version of <font
              color="#663300"><code>ACCESS</code></font> is empty.<br>
          </td>
        </tr>
        <tr>
          <td valign="middle" align="center">Extra listing<br>
          </td>
          <td valign="middle" align="center"><b>n/a</b></td>
          <td valign="middle" align="center"><b>n/a</b></td>
          <td valign="middle" align="center"><b>n/a</b></td>
          <td valign="middle" align="center"><b>n/a</b></td>
          <td valign="middle" align="center"><b><font color="#663300"><code>--ddo=7,<i>extra.txt</i></code></font></b></td>
          <td valign="middle" align="center"><b>TBD</b><br>
          </td>
          <td valign="middle" align="center"><b>TBD</b><br>
          </td>
          <td valign="middle">TBD<br>
          </td>
        </tr>
        <tr>
          <td valign="middle" align="center">Output or input HALMAT<br>
          </td>
          <td nowrap="nowrap" valign="middle" align="center"
            bgcolor="#ffcccc"><b><code><font color="#663300">--raf=B,7200,1,<i>halmat.bin</i></font></code></b></td>
          <td nowrap="nowrap" valign="middle" align="center"
            bgcolor="#ffcccc"><b><code><font color="#663300">--raf=B,7200,1,<i>halmat.bin</i></font></code></b></td>
          <td nowrap="nowrap" valign="middle" align="center"
            bgcolor="#ffcccc"><b><code><font color="#663300">--raf=B,7200,1,<i>halmat.bin</i></font></code></b></td>
          <td nowrap="nowrap" valign="middle" align="center"
            bgcolor="#999900"><b><code><font color="#663300">--raf=B,7200,1,<i>auxmat.bin</i></font></code></b></td>
          <td nowrap="nowrap" valign="middle" align="center"
            bgcolor="#999900"><b><code><font color="#663300">--raf=B,7200,1,<i>auxmat.bin</i></font></code></b></td>
          <td valign="middle" align="center"><b>TBD</b></td>
          <td valign="middle" align="center"><b>TBD</b></td>
          <td valign="top">HALMAT is the "intermediate" language into
            which HAL/S code is converted prior to generation of machine
            code.&nbsp; Various versions are created by the several
            compiler passes; see also <font color="#663300"><code><i>optmat.bin</i></code></font>,
            below.<br>
          </td>
        </tr>
        <tr>
          <td valign="middle" align="center">Literal file<br>
          </td>
          <td nowrap="nowrap" valign="middle" align="center"
            bgcolor="#cc33cc"><b><code><font color="#663300">--raf=B,1560,2,<i>litfile.bi</i><i>n</i></font></code></b></td>
          <td nowrap="nowrap" valign="middle" align="center"
            bgcolor="#cc33cc"><b><code><font color="#663300">--raf=B,1560,2,<i>litfile.bi</i><i>n</i></font></code></b></td>
          <td nowrap="nowrap" valign="middle" align="center"
            bgcolor="#cc33cc"><b><code><font color="#663300">--raf=B,1560,2,<i>litfile.bi</i><i>n</i></font></code></b></td>
          <td nowrap="nowrap" valign="middle" align="center"
            bgcolor="cc33cc"><b><code><font color="#663300">--raf=B,1560,2,<i>litfile.bi</i><i>n</i></font></code></b></td>
          <td nowrap="nowrap" valign="middle" align="center"
            bgcolor="#cc33cc"><b><code><font color="#663300">--raf=B,1560,2,<i>litfile.bi</i><i>n</i></font></code></b></td>
          <td valign="middle" align="center"><b><font color="#663300">TBD</font></b></td>
          <td valign="middle" align="center"><b>TBD</b></td>
          <td valign="middle">This is a "random-access file" that the
            compiler uses to store the values of string, floating-point,
            and bit-string literals.</td>
        </tr>
        <tr>
          <td valign="middle" align="center">Workfiles<br>
          </td>
          <td valign="middle" align="center"><b><code><font
                  color="#663300">--raf=B,1560,3,<i>icfile.bin</i></font></code></b></td>
          <td valign="middle" align="center"><b><code></code></b><b>n/a</b><b><br>
            </b> </td>
          <td valign="middle" align="center"><b>n/a</b><b><br>
            </b> </td>
          <td valign="middle" align="center"><b>n/a</b></td>
          <td valign="middle" align="center"><b><code><font
                  color="#663300">--raf=B,1600,3,<i>objcode.bin</i><br>
                </font></code></b></td>
          <td valign="middle" align="center"><b>TBD</b></td>
          <td valign="middle" align="center"><b>TBD</b></td>
          <td valign="middle">TBD, but I think that <font
              color="#663300"><code><i>icfile.bin</i></code></font>
            holds values of <font color="#663300"><code>INITIAL</code></font>
            and <font color="#663300"><code>CONSTANT</code></font>
            clauses for <font color="#663300"><code>DECLARE</code></font>
            statements, which may be swapped out of memory if there are
            too many of them.&nbsp; Presumably it is just a workfile not
            used by other compiler passes.<br>
            <br>
            I think that <font color="#663300"><i><code>objcode.bin</code></i></font>
            is a workfile into which data used for object-generation is
            swapped to preserve memory.&nbsp; In spite of the name I
            used for it, I don't think it is object code as such.<br>
          </td>
        </tr>
        <tr>
          <td valign="middle" align="center">Second HALMAT file<br>
          </td>
          <td valign="middle" align="center"><b><code></code></b><b>n/a</b><b><br>
            </b> </td>
          <td valign="middle" align="center"><b>n/a</b><b><br>
            </b> </td>
          <td valign="middle" align="center" bgcolor="#cc9933"><b><code><font
                  color="#663300">--raf=B,7200,4,<i>optmat.bin</i></font></code></b></td>
          <td valign="middle" align="center" bgcolor="#cc9933"><b><code><font
                  color="#663300">--raf=B,7200,4,<i>optmat.bin</i></font></code></b></td>
          <td valign="middle" align="center" bgcolor="#cc9933"><b><code><font
                  color="#663300">--raf=B,7200,4,<i>optmat.bin</i></font></code></b></td>
          <td valign="middle" align="center"><b><code></code></b><b>TBD</b></td>
          <td valign="middle" align="center"><b>TBD</b></td>
          <td valign="top">See the comments for <font color="#663300"><i><code>halmat.bin</code></i></font>
            and <font color="#663300"><i><code>auxmat.bin</code></i></font>
            above.<br>
          </td>
        </tr>
        <tr>
          <td valign="middle" align="center">SDF<br>
          </td>
          <td valign="middle" align="center"><b>n/a</b></td>
          <td valign="middle" align="center"><b>n/a</b></td>
          <td valign="middle" align="center"><b>n/a</b></td>
          <td valign="middle" align="center"><b>n/a</b></td>
          <td valign="middle" align="center"><b>n/a</b></td>
          <td nowrap="nowrap" valign="middle" align="center"><b><code><font
                  color="#663300">--raf=B,1680,5,<i>sdf.bin</i></font></code></b></td>
          <td nowrap="nowrap" valign="middle" align="center"><b>TBD</b></td>
          <td valign="top">Simulation Data File (SDF), for "phase 3"
            compilation only.<br>
          </td>
        </tr>
        <tr>
          <td valign="middle" align="center">Virtual-memory<br>
            file<br>
          </td>
          <td valign="middle" align="center"><b><code><font
                  color="#663300">--raf=B,3360,6,<i>vmem.bin</i></font></code></b></td>
          <td valign="middle" align="center"><b><code><font
                  color="#663300">--raf=B,3360,6,<i>vmem.bin</i></font></code></b></td>
          <td valign="middle" align="center"><b><code><font
                  color="#663300">--raf=B,3360,6,<i>vmem.bin</i></font></code></b><b>
            </b> </td>
          <td valign="middle" align="center"><b><code><font
                  color="#663300">--raf=B,3360,6,<i>vmem.bin</i></font></code></b></td>
          <td valign="middle" align="center"><b><code><font
                  color="#663300">--raf=B,3360,6,<i>vmem.bin</i></font></code></b></td>
          <td nowrap="nowrap" valign="middle" align="center"><b><code><font
                  color="#663300">--raf=B,3360,6,<i>vmem.bin</i></font></code></b></td>
          <td nowrap="nowrap" valign="middle" align="center"><b>TBD</b></td>
          <td valign="middle">This is a "random-access file" that the
            compiler uses to store blocks of virtual memory which have
            been temporarily unloaded from memory.<br>
          </td>
        </tr>
        <tr>
          <td valign="middle" align="center">Input <font
              color="#663300"><code>COMMON</code></font> file<br>
          </td>
          <td valign="middle" align="center"><b>n/a</b><b><br>
            </b> </td>
          <td valign="middle" align="center" bgcolor="#ffff99"><b><font
                color="#663300"><code>--commono=</code><code><i>COMMON0.out</i></code></font></b><b><br>
            </b></td>
          <td valign="middle" align="center" bgcolor="#99ff99"><b><font
                color="#663300"><code>--commoni=</code><code><i>COMMON1.out</i></code><code></code></font></b></td>
          <td valign="middle" align="center" bgcolor="#99ffff"><b><font
                color="#663300"><code>--commoni=</code><code><i>COMMON2.out</i></code><code></code></font></b></td>
          <td valign="middle" align="center" bgcolor="#ff6666"><b><font
                color="#663300"><code>--commoni=</code><code><i>COMMON</i></code><code><i>3.out</i></code></font></b></td>
          <td nowrap="nowrap" valign="middle" align="center"
            bgcolor="#ff99ff"><b><font color="#663300"><code>--commoni=</code><code><i>COMMON4.out</i></code><code></code></font></b></td>
          <td nowrap="nowrap" valign="middle" align="center"
            bgcolor="#cccccc"><b><font color="#663300"><code>--commoni=</code><code><i>COMMON</i></code><code><i>5.out</i></code></font></b></td>
          <td valign="middle">The state of <font color="#663300"><code>COMMON</code></font>
            memory upon program start.<br>
          </td>
        </tr>
        <tr>
          <td valign="middle" align="center">Output <font
              color="#663300"><code>COMMON</code></font> file<br>
          </td>
          <td valign="middle" align="center" bgcolor="#ffff99"><b><font
                color="#663300"><code>--commono=</code><code><i>COMMON0.out</i></code></font></b><b><br>
            </b> </td>
          <td valign="middle" align="center" bgcolor="#99ff99"><b><font
                color="#663300"><code>--commono=</code><code><i>COMMON1.out</i></code><code></code></font></b></td>
          <td valign="middle" align="center" bgcolor="#99ffff"><b><font
                color="#663300"><code>--commono=</code><code><i>COMMON2.out</i></code><code></code></font></b></td>
          <td valign="middle" align="center" bgcolor="#ff6666"><b><font
                color="#663300"><code>--commono=</code><code><i>COMMON3.out</i></code><code></code></font></b></td>
          <td valign="middle" align="center" bgcolor="#ff99ff"><b><font
                color="#663300"><code>--commono=</code><code><i>COMMON4.out</i></code><code></code></font></b></td>
          <td nowrap="nowrap" valign="middle" align="center"
            bgcolor="#cccccc"><b><font color="#663300"><code>--commono=</code><code><i>COMMON5.out</i></code><code></code></font></b></td>
          <td nowrap="nowrap" valign="middle" align="center"><b>TBD</b><b><br>
            </b> </td>
          <td valign="middle">The state of <font color="#663300"><code>COMMON</code></font>
            memory upon program end.&nbsp; <b>Warning:</b>&nbsp; The
            input and output files cannot have the same name.<br>
          </td>
        </tr>
      </tbody>
    </table>
    <p><br>
    </p>
    <h1><a name="validation"></a>Validating the Compiler<br>
    </h1>
    <h2><a name="mindReader"></a>My Mind-Reading Trick<br>
    </h2>
    I will now perform a mind-reading act:&nbsp; I predict that you
    trust software you download from the online sources.&nbsp; I'm
    referring not to the security aspects of such downloaded software,
    but to the functionality of it.&nbsp; You may well be worried that
    the software is a scam somehow.&nbsp; But barring that, you assume
    that it works correctly as advertised&nbsp; You trust the
    developers.&nbsp; You have no interest in whatever means were used
    to develop the software you've downloaded or to validate that it
    operates correctly.&nbsp; <br>
    <br>
    <img moz-do-not-send="true" src="GoldStar.png" alt="" align="right"><img
      moz-do-not-send="true" src="Gold_Star.png" alt="" width="60"
      height="60" align="left">Was I right about you?&nbsp; If was, then
    Congratulations!&nbsp; Give yourself a gold star.&nbsp; You don't
    need to read this section.&nbsp; You're all done absorbing
    information about the HAL/S compiler.&nbsp; That's why I've stuck
    this section at almost the very end.&nbsp; It's easier to skip it
    that way.<br>
    <br>
    However, that's not a very productive way of thinking if you're the
    one actually trying to resuscitate ancient software that was
    originally used by very few people, in a protected, secretive
    environment, and trying to do so in the absence of the environment
    and the tools (and often, the documentation) that those original
    developers relied on.&nbsp; That's just not the digital archaeology
    way of thinking!&nbsp; No, in situations like that, we have to make
    an enormous effort to check and cross-check everything we can think
    of, to insure the highest degree of authenticity we can.&nbsp; <br>
    <br>
    So that's what this optional section is about.&nbsp; <br>
    <h2><a name="valPASS1"></a>Validating PASS1</h2>
    As I mentioned earlier, we actually have two separately-developed
    modern versions of the HAL/S compiler's phase 1:&nbsp; namely, the
    ubiquitous PASS1 (AKA HALSFC-PASS1) that has been discussed so much
    above, <i>and</i> a Python 3 port of phase 1 that I call
    HAL_S_FC.&nbsp; In an ideal world, I'd like to say that these two
    programs were developed completely independently, in clean-room
    fashion.&nbsp; Unfortunately, I can't say that, because I developed
    both of them myself, albeit at different times, though using
    entirely-different development methods and relying on my sieve-like
    memory to have forgotten everything in the meantime.&nbsp;
    Hopefully, that's good enough to let us pretend that they were
    independently developed.&nbsp; Because PASS1 and HAL_S_FC were
    developed separately, using different methods, it is likely that
    although they could individually be buggy, it is extremely <i>unlikely</i>
    that they are buggy in the same ways at the same places in their
    code.&nbsp; Thus by closely comparing the results of the two, we can
    debug (or alternatively, validate) both of them at once.<br>
    <br>
    Now unfortunately, to support my claim that these two
    implementations of phase 1 can each be used to validate the other,
    we do have to talk a little bit about how the modern HAL/S-FC
    compiler was developed, and I doubt that that's something of too
    much interest to you.&nbsp; But if we have to, we have to.&nbsp;
    Here's a side-by-side comparison of the development methods:<br>
    <br>
    <table width="50%" cellspacing="2" cellpadding="2" align="center">
      <tbody>
        <tr>
          <th valign="top"><u>Stage of Development</u><u><br>
            </u></th>
          <th valign="bottom"><u>HAL_S_FC</u><u><br>
            </u></th>
          <th valign="bottom"><u>PASS1</u><u><br>
            </u></th>
        </tr>
        <tr>
          <td valign="top">First stage: separate development<br>
          </td>
          <td valign="top">
            <ol>
              <li>HAL/S-FC source code for PASS1 manually translated
                from from XPL/I language and IBM 360 assembly language
                to Python 3, calling it <b>HAL_S_FC</b>.</li>
              <li>Manually debugged until compilation of a HAL/S program
                could proceed to its conclusion without aborting.</li>
              <li>Manually debugged until the compiler report and output
                files (literals, HALMAT) seemed plausible.<br>
              </li>
            </ol>
          </td>
          <td valign="top">
            <ol>
              <li><a moz-do-not-send="true" href="XPL-I.html">Developed
                  <b>XCOM-I</b></a>, a general-purpose XPL/I-to-C cross
                compiler.<br>
              </li>
              <li>Extensively tested <b>XCOM-I</b> with legacy XPL code
                (such as source code of 1970's XPL compilers).</li>
              <li>Manually developed C-language "patches" for the small
                amount of IBM 360 assembly-language source code in
                HAL/S-FC.</li>
              <li>Created C-language version of HAL/S-FC, using <b>XCOM-I</b>
                and C-language patches.</li>
              <li>Compiled the C code, calling the resulting executable
                <b>HALSFC-PASS1</b>.<br>
              </li>
            </ol>
          </td>
        </tr>
        <tr>
          <td valign="top">Second stage: joint debugging<br>
          </td>
          <td rowspan="1" colspan="2" valign="top" align="left">
            <ol type="A">
              <li>Compiled all existing HAL/S source-code files using
                both <b>HAL_S_FC</b> and <b>HALSFC-PASS1</b>, with the
                same compiler options for each.</li>
              <li>Used automated comparisons (such as <b>diff</b>)
                of:&nbsp; compiler reports and HALMAT files.&nbsp; (For
                technical reasons, literal files aren't immediately
                comparable.)</li>
              <li>Where discrepancies were found, corrected either <b>HAL_S_FC</b>
                or <b>XCOM-I</b> or IBM 360 "patches" of HAL/S-FC.<br>
              </li>
              <li>Went back to step 1 until no more discrepancies were
                found!</li>
              <li>Went back to step A until no more HAL/S source-code
                files are available.</li>
            </ol>
          </td>
        </tr>
      </tbody>
    </table>
    <br>
    The end result of that process, obviously, is that all available
    HAL/S source-code files (not including Space Shuttle flight
    software) were compiled to give matching results in the two
    implementations of phase 1.<br>
    <br>
    We already know, of course, that the comparison of HALSFC-PASS1's
    results to those of HAL_S_FC can be performed with any/every
    compilation, simply by using the TEST feature of <b>HALSFC</b>.&nbsp;


















    My claim is that in doing so, we've validated our modern version of
    PASS1.<br>
    <br>
    <h2><a name="valPASS2"></a>Validating Phase 1.5 and Phase 2</h2>
    Unfortunately, we have no independent implementations of FLO, OPT,
    AUX, or PASS2 against which to compare HALSFC-FLO, HALSFC-OPT,
    HALSFC-AUX, and HALSFC-PASS2.<br>
    <br>
    However, there is a potential method of performing an adequate
    validation test.&nbsp; Suppose one were to have (say) all of the
    following items:<br>
    <ul>
      <li>The complete HAL/S and AP-101S source code for some version of
        the Space Shuttle flight software (roughly 700K lines of code).</li>
      <li>A knowledge of the <a moz-do-not-send="true" href="#moron">compiler


















          options</a> and the module ordering used to compile that
        flight software.</li>
      <li>A complete binary dump of the compiled flight software of the
        same version.</li>
    </ul>
    <p>If so, it would be possible to perform an automated end-to-end
      check that the compiled source code produced an executable that
      was byte-for-byte correct, <i>and</i> that it had presumably
      exercised every feature of the HAL/S language.<br>
    </p>
    At present, I can report merely that no such check has been
    performed, so for now this is just something that's on my wish-list.<br>
    <h2><a name="DebuggingCompiler"></a>Debugging the Compiler Itself</h2>
    <p>Of course, if the validation process described above fails, then
      the HAL/S compiler itself may need to be fixed somehow.&nbsp;
      That's quite a tall order, and I cannot give much general guidance
      for doing so that covers <i>all</i> possible cases!&nbsp; In
      general, though, I can say this:&nbsp; The source code for the
      HAL/S compiler, written in XPL/I and IBM 360 Basic, must be
      regarded for this discussion as 100% complete and correct.&nbsp;
      This assertion of perfection is obviously factually false, but may
      as well be true since substantively modifying the original source
      code is prohibited by the Virtual AGC Project's
      admittedly-unwritten principles.&nbsp; Any errors must therefore
      be sought elsewhere, in the modern code provided by the Virtual
      AGC Project itself.&nbsp; That leaves two possibilities:<br>
    </p>
    <ol>
      <li>The "modern" XPL/I compiler (<b>XCOM-I</b>) has bugs that must
        be fixed.&nbsp; If so, address them in the Python 3 source code
        for <b>XCOM-I</b> in the XCOM-I/ folder of the Virtual AGC
        source tree.&nbsp; The top-level Python file is XCOM-I.py, but
        it directly or indirectly imports additional custom Python
        modules as well (parseCommandLine.py, auxiliary.py,
        xtokenize.py, generateC.py, parseExpression.py, etc.).<br>
      </li>
      <li>Or else some manually-produced "patch files" in which IBM 360
        Basic assembly-language source code has been ported to the C
        language have bugs that must be fixed.&nbsp; The source code for
        those patch files (patch*.c) are found in the subfolders PASS<i>X</i>.PROCS/,









        FLO.PROC/, AUX_PROCS/, and OPT.PROCS/ of the folder
        "yaShuttle/Source Code/PASS.REL32V0/".<br>
      </li>
    </ol>
    <p>(Or both.)&nbsp; Either possibility is dreadful, but for what
      it's worth (very little!) possibility #2 is slightly less
      dreadful, and is often a slightly better place to start looking
      anyway.&nbsp; <br>
    </p>
    <p><a moz-do-not-send="true" href="XPL-I.html#debugging">What little
        else I can say about debugging can be found on the XPL/I page</a>.<br>
    </p>
    <h1><a name="halmat"></a>The Mystery and Magic of HALMAT</h1>
    <p>All throughout this page, we've seen numerous references to
      "HALMAT", with nary a suggestion that HALMAT might be of use to us
      today in our space-shuttling activities, and only minimal
      explanations as to what HALMAT might be.&nbsp; But the truth is
      that HALMAT could indeed potentially be of a lot of use, and so it
      may behoove us to give a little better explanation of what HALMAT
      is and how it might be of use <i>now</i> as opposed to back in
      the Space Shuttle era.<br>
    </p>
    <p>As you already know, the original compiler used for converting
      Space Shuttle flight software written in the high-level language
      known as HAL/S into assembly-language object code for the Space
      Shuttle's general purpose computers was partitioned into several
      successive passes as follows:<br>
    </p>
    <ul>
      <li>PASS1 parsed the HAL/S source code and generated a
        representation of the software in terms of an "intermediate
        language" called HALMAT.</li>
      <li>OPT "optimized" the HALMAT produced by PASS1, thus producing
        another functionally-identical but presumably more-efficient set
        of HALMAT instructions.</li>
      <li>PASS2 imported the optimized HALMAT and generated AP-101S
        assembly-language object code.</li>
    </ul>
    If our main interest in compiling the Space Shuttle flight software
    or indeed any HAL/S program is to actually <i>run</i> that
    software, two additional items must be available to us once the
    compilation passes above have completed their work:<br>
    <ul>
      <li>We must have a linker program that can combine into a single
        executable the bits and pieces of AP-101S object code that were
        derived potentially from many, many original HAL/S source-code
        files.</li>
      <li>We must have an emulator for the AP-101S CPU that can run the
        now-linked object code.<br>
      </li>
    </ul>
    That's a pretty imposing list of things we need to have in order to
    get it all working!&nbsp; Stepping back a bit from the list, though,
    so that we can see the forest rather than the trees, we might ask
    ourselves the following question:&nbsp; If we had a sufficient
    understanding of HALMAT at the technical level, mightn't we bypass
    the entire chain of must-haves after OPT by creating a program that
    ran HALMAT directly?&nbsp; For that matter, while OPT may have been
    needed for the relatively-slow computers used back in the Shuttle
    era, with our much faster computers of today do we even need to
    "optimize" the HALMAT at all?&nbsp; Mightn't we simply run it
    directly after PASS1, without running OPT?<br>
    <br>
    If we could do that, the entire process of moving from HAL/S source
    code to running it in emulation might reduce just to:<br>
    <ul>
      <li>Use PASS1 to compile HAL/S source code to HALMAT.</li>
      <li>Run the HALMAT in a HALMAT emulator.&nbsp; (Assuming, of
        course, that the HALMAT emulator had enough of a primitive
        linking capability to simultaneously deal with multiple HALMAT
        files derived from different HAL/S source-code files.)<br>
      </li>
    </ul>
    (And even if we decided that OPT is indeed a necessity, the
    complexity is hardly any greater.)&nbsp; This notion is particularly
    appealing when we recall from our prior discussions above that we
    actually have <i>two</i> working versions of PASS1, namely <b>HALSFC-PASS1</b>,
    which was created by compiling the original source code of
    Intermetrics's compiler HAL/S-FC, and a 100% compatible version
    entirely written in Python, namely <b>HAL_S_FC.py</b>.&nbsp; Then
    too, communication between the CPU and whatever other simulated
    peripherals exist in the spacecraft might be easier at the HALMAT
    level than at the AP-101S level.<br>
    <br>
    Sounds promising.&nbsp; But alas, not perfect!&nbsp; Where this
    concept has fallen apart up to now is the inadequacy of surviving
    documentation <i>about</i> HALMAT.&nbsp; Without a satisfactory
    definition of the HALMAT language, how might we be expected to
    create an emulator for it?&nbsp; <i>Some</i> HALMAT documentation
    has survived:<br>
    <ol>
      <li><a moz-do-not-send="true"
          href="Shuttle/HALMAT%20-%20An%20Intermediate%20Language.pdf">A
          complete description was written up in 1971</a>.&nbsp; As the
        document itself explains, it "is essentially a handbook of an
        intermediate language HALMAT produced and used during the
        operation of the HAL360-V1 compiler".&nbsp; In case it isn't
        obvious, HAL360-V1 was Intermetrics's very first attempt at a
        HAL compiler — <i>not</i> yet HAL/S —, producing object code
        running on an IBM System/360 computer rather than an AP-101S
        computer.&nbsp; Actually, the document says only that HAL360-V1
        ran on an IBM System/360, and doesn't explicitly say that the
        compiled form of the HAL software ran on a System/360; but the
        document nowhere mentions the AP-101 computer, and that seems
        very telling!&nbsp; Besides which, the document specifically
        calls HAL360-V1 a "preliminary version", or as we might think of
        it, a proof of concept.&nbsp; The problem is, that being
        "preliminary", details changed later!&nbsp; How much was changed
        or added we don't know, but changes there definitely were.</li>
      <li>Intermetrics's much later document IR-60, "HAL/S-360 Compiler
        System Specification", has a very large Appendix A that
        specifies the HALMAT instructions in detail.&nbsp; We have no
        assurance that this is the final form of the HALMAT language,
        but all later documentation refers back to IR-60 as the
        authoritative source, so I think we should probably recognize it
        as such as well.&nbsp; <i>Unfortunately</i>, the only copy of
        IR-60 which has survived to fall into our hands is <a
          moz-do-not-send="true"
href="Shuttle/HAL_S-360%20Compiler%20System%20Specification%204%20Feb%201977.pdf">Revision

          5 of the document, IR-60-5 from 1977</a>, and this version
        contains only the pages that changed between Revision 4 and
        Revision 5.&nbsp; The complete Appendix A, which from the page
        markings must contain at least 118 pages, has only 20 pages in
        our surviving copy!&nbsp; Then too, a Revision 6 is known to
        have been in the JSC library at one time — though not any longer
        — and so potentially there could have been changes later even
        than in what has survived in our copy.&nbsp; It could be that
        more-complete copies of IR-60 still exist somewhere, perhaps in
        the hands of a collector, but for now we have no reason to
        believe that they weren't all simply thrown away.<br>
      </li>
      <li>Though not "documentation" as such, the HAL/S-FC compiler
        passes PASS1, OPT, and PASS2 all output and/or input HALMAT
        files, so potentially one could get additional information about
        HALMAT's individual instructions or groupings of instructions by
        looking through HAL/S-FC source code.</li>
      <li>Moreover, PASS1 has the optional capability of interleaving
        HAL/S statements with the derived HALMAT in the compilation
        reports it generates.&nbsp; Similarly, PASS2 has the optional
        capability of interleaving HALMAT with the assembly-language
        instructions it generates in the compilation reports it
        generates.&nbsp; (And even OPT, which normally doesn't output
        much of a report, has an analogous capability.)&nbsp; Therefore,
        by crafting sample HAL/S source-code files and compiling them,
        it's possible to deduce more detail about HALMAT instructions as
        well.</li>
    </ol>
    <p>Thus although complete documentation about HALMAT in a
      nicely-packaged, authoritative document seems to have escaped us,
      it is not necessarily clear that we couldn't regenerate a complete
      description of the language through reverse engineering.&nbsp; And
      if we could do that, perhaps a HALMAT emulator could become a
      reality.&nbsp; <br>
    </p>
    As it turns out, Zane Hambly has gotten us moving in that direction:<br>
    <ul>
      <li>He has collected data from the sources mentioned above into <a
          moz-do-not-send="true" href="Halmat.pdf">a single document
          describing all that's presently known about HALMAT</a>.&nbsp;
        <br>
      </li>
      <li>He has in fact written a HALMAT emulator which he calls <b>yaHALMAT</b>,
        based on the information he collected.<br>
      </li>
    </ul>
    The emulator is quite impressive so far, but it's still in a very
    preliminary state, so I won't write much about it just yet.&nbsp;
    While it's good at handling a number of numerical operations, its
    string handling leaves something to be desired at this stage.&nbsp;
    For example, don't expect to be able to write a "HELLO, WORLD!"
    program yet and have it actually print out "HELLO, WORLD!"&nbsp; But
    you may still enjoy experimenting with it.<br>
    <br>
    <a moz-do-not-send="true"
      href="https://github.com/Zaneham/Halmat/blob/main/Halmat.pdf">All
      of Zane's material is in his own GitHub repository</a>, rather
    than in the Virtual AGC source tree, so if you want to work with it
    you'll probably want to fetch his source tree onto your local
    computer, and you'll want to follow his very-simple directions for
    building the program.&nbsp; As I said, this program is called <b>yaHALMAT</b>
    — or probably yaHALMAT.exe on Windows, though I haven't tried it
    there myself — and you'll want to make sure that it gets into your
    PATH.<br>
    <p> </p>
    <h1><a name="glossary"></a>A Glossary and Some References</h1>
    <ul>
      <li>Organizations:</li>
      <ul>
        <li><a moz-do-not-send="true"
            href="https://en.wikipedia.org/wiki/AverStar"><i>Intermetrics,






              Inc.</i></a>:&nbsp; The company which originally developed
          the Space Shuttle flight software and the development
          tool-chain for it.&nbsp; At this writing, its current
          successor is L-3 Communications.<br>
        </li>
        <li><a moz-do-not-send="true"
            href="https://en.wikipedia.org/wiki/United_Space_Alliance"><i>United






              Space Alliance</i> (USA)</a>:&nbsp; The company which
          eventually took over the flight-software development.&nbsp; It
          was a joint venture of Rockwell International (succeeded by
          Boeing) and Lockheed-Martin.&nbsp; It was dissolved in 2019,
          without a successor that I'm aware of, and no longer exists.<br>
        </li>
      </ul>
      <li>Timeframes:</li>
      <ul>
        <li><i>Contemporary</i> or <i>original</i> or <i>Intermetrics</i>:&nbsp;



















          I use these terms more-or-less interchangeably to refer to the
          software and/or documentation created for the Space Shuttle
          project itself, in the rough time-frame 1975-2010.</li>
        <li><i>Modern</i>:&nbsp; I use this term to refer to software
          developed primarily by the Virtual AGC Project in the
          post-Shuttle era to replace or supports the contemporary
          development tool-chain.&nbsp; If you're reading this 100 or
          1000 years after I wrote it, I expect that it won't seem very
          "modern".<br>
        </li>
      </ul>
      <li>Computer hardware:</li>
      <ul>
        <li><a moz-do-not-send="true"
            href="https://en.wikipedia.org/wiki/IBM_System/360"><i>IBM
              System/360</i></a>:&nbsp; This, and its descendants (the
          370 and 390), were the types of mainframe computers on which
          the development tool-chain ran.</li>
        <li><a moz-do-not-send="true"
            href="https://en.wikipedia.org/wiki/IBM_System/4_Pi#AP-101"><i>IBM






              AP-101S</i></a> or <i>General Purpose Computer</i>
          (GPC):&nbsp; This is the type of computer onboard the Space
          Shuttle in which the flight software ran; each Shuttle had 5
          of these computers.&nbsp; Technically, early Shuttle flights
          used the <i>AP-101B</i> computer.<br>
        </li>
        <li><i>Native system</i>:&nbsp; This is the term I'll use to
          describe the computer system <i>you</i> might be using today
          to run the software from this page; presumably <i>not</i> an
          IBM 360 or AP-101S!&nbsp; I have in mind any computer running
          the Linux operating system, or to the extent it's feasible for
          me to support, the Mac OS or Windows operating systems.</li>
      </ul>
      <li>Computer languages:</li>
      <ul>
        <li><a moz-do-not-send="true"
            href="https://en.wikipedia.org/wiki/HAL/S"><i>HAL/S</i></a>:&nbsp;






          The high-level computer language in which the Space Shuttle
          flight software was primarily written.&nbsp; I refer
          specifically to the version of HAL/S implemented by
          Intermetrics, Inc., which though sharing the same name, would
          not have been 100% compatible with HAL/S implementations by
          other companies for other purposes. <br>
        </li>
        <li><i>AP-101S assembly language</i>:&nbsp; The low-level
          computer language in which some of the flight software was
          written.<br>
        </li>
        <li><i>HALMAT</i>:&nbsp; A contemporary "intermediate language"
          into which HAL/S program was compiled.&nbsp; HALMAT is more of
          a binary file format than a "language", since there is no
          easily-human-readable form of it, nor did humans ever write
          programs in HALMAT.&nbsp; Rather, the virtues of HALMAT were
          that it was agnostic as to the targeted computer type, that it
          was subject to optimization, and that target-specific assembly
          language could be generated from it.</li>
        <li><i>PALMAT</i>:&nbsp; A modern intermediate language, similar
          in spirit to HALMAT, but differing from HALMAT in all details.<br>
        </li>
        <li><a moz-do-not-send="true"
            href="https://en.wikipedia.org/wiki/XPL"><i>XPL</i></a> (or
          sometimes, <i>standard XPL</i>):&nbsp; A computer language
          defined by a book called <i>A Compiler Generator</i> (1979),
          by William M. McKeeman, James J. Horning, and David B.
          Wortman.&nbsp; This language was specialized for the purpose
          of writing compilers for other computer languages.</li>
        <li><i>XPL/I</i>:&nbsp; This is an extended but ofttimes
          undocumented form of XPL that was implemented by Intermetrics,
          Inc.&nbsp; The term "XPL/I" is my own; Intermetrics, and
          everyone else as far as I know, simply referred to it as
          "XPL", as if it were the same thing as standard XPL. <br>
        </li>
        <li><i>Basic Assembly Language</i> (BAL):&nbsp; This is the
          low-level language of the IBM System/360, 370, and 390
          computers.&nbsp; If you look for adequate reference material,
          it's best to think of it as IBM 390 assembly language.&nbsp;
          Confusingly, Intermetrics/USA also referred to AP-101S
          assembly language as "BAL".<br>
        </li>
        <li><i>Python</i> and <i>C</i>:&nbsp; Modern computer languages
          for native computer systems.&nbsp; By "Python", I refer to
          Python 3 (as opposed to Python 2).&nbsp; By "C", I refer to
          the language compiled by GNU <b>gcc</b>, or by
          100%-compatible compilers such as <b>clang</b>.<br>
        </li>
      </ul>
      <li>Space Shuttle Flight Software:</li>
      <ul>
        <li><i>Primary Flight Software</i> (PFS):&nbsp; This is what's
          usually thought of as the flight software.&nbsp; Written
          primarily in HAL/S, but with some AP-101S assembly language.<br>
        </li>
        <li><i>Flight Control Operating System</i> (FCOS):&nbsp; The
          operating system which the PFS ran atop.&nbsp; Written in
          AP-101S assembly language.</li>
        <li><i>Primary Avionics Software Subsystem</i> (PASS):&nbsp;
          PFS+FCOS.&nbsp; <b>Note:</b>&nbsp; <i>Unfortunately</i>, the
          original developers' verbal habit (carrying over to some
          documentation) seems to have become to refer to PFS by itself
          as "PASS".&nbsp; In fact, PASS became the preferred
          term!&nbsp; I fear that I've fallen into that habit myself in
          these writings. <br>
        </li>
        <li><i>Backup Flight Software</i> (BFS):&nbsp; Flight software
          written independently of PFS, specializing only in critical
          tasks, to provide improved reliability; in such critical
          flight phases, BFS ran on one of the Shuttle's 5 GPCs while
          PFS ran on the other 4 GPCs, so that BFS could quickly take
          over for PFS if needed.&nbsp; Written primarily in HAL/S, with
          some AP-101S assembly language.</li>
        <li><i>Backup Operating System</i> (BOS):&nbsp; The operating
          system atop which BFS ran.&nbsp; Written in AP-101S assembly
          language.<br>
        </li>
      </ul>
      <li>Especially-relevant documentation:</li>
      <ul>
        <li><i>McKeeman</i>:&nbsp; I use this term to refer to the book
          <i>A Compiler Generator</i> (1979), by William M. McKeeman,
          James J. Horning, and David B. Wortman.</li>
        <li><i>Ryer</i>:&nbsp; I use this term to refer to the book <i>Programming


















            in HAL/S</i>, second edition (1979), by Michael Ryer.</li>
        <li>Related Virtual AGC website pages:</li>
        <ul>
          <li><a moz-do-not-send="true" href="Shuttle.html">Space
              Shuttle</a></li>
          <li><a moz-do-not-send="true" href="links-shuttle.html#HAL/S">HAL/S


















              section of the Space Shuttle Document Library</a></li>
          <li><a moz-do-not-send="true" href="XPL-I.html">XPL/I
              programming language</a></li>
        </ul>
      </ul>
      <li>Other terms you may encounter here:</li>
      <ul>
        <li>FSW:&nbsp; Flight Software.<br>
        </li>
      </ul>
      <ul>
        <li>SDF:&nbsp; Simulation Data Files, used when running digital
          simulations of the Shuttle flight software in AP-101S
          load-file form.</li>
      </ul>
    </ul>
    <p> </p>
    <br>
    <hr style="width: 100%; height: 2px;">
    <center><br>
      <span style="color: rgb(84, 89, 93); font-family: sans-serif;
        font-size: 11.05px; font-style: normal; font-variant: normal;
        font-weight: normal; letter-spacing: normal; line-height:
        16.575px; orphans: auto; text-align: center; text-indent: 0px;
        text-transform: none; white-space: normal; widows: 1;
        word-spacing: 0px; -webkit-text-stroke-width: 0px; display:
        inline !important; float: none; background-color: rgb(255, 255,
        255);"> This page is available under the <a
          href="https://creativecommons.org/publicdomain/zero/1.0/">
          Creative Commons No Rights Reserved License</a> </span><br>
      <i><font size="-1">Last modified by <a
            href="mailto:info@sandroid.org">Ronald Burkey</a> on
          2026-02-11<br>
          <br>
          <a href="https://www.ibiblio.org"> <img style="border: 0px
              solid ; width: 300px; height: 100px;" alt="Virtual AGC is
              hosted by ibiblio.org" src="hosted.png" width="300"
              height="100"></a><br>
        </font></i></center>
    <br>
  </body>
</html>
